(this["webpackJsonpswap-front"]=this["webpackJsonpswap-front"]||[]).push([[20],{1041:function(e,t,s){"use strict";var a=s(0),i=s.n(a),n=s(39),o=s.n(n),c=s(1428),l=s(169),r=(s(1420),s(16));const p=Object(r.jsx)(l.a,{style:{fontSize:24},spin:!0});class d extends i.a.Component{constructor(e){super(e),this.state={}}render(){const{children:e}=this.props,t=i.a.Children.toArray(e).map(((e,t)=>{const{children:s,status:a,err:i,failed:n}=e.props;let l=s;return"error"===a&&(l=i||s),"pending"===a&&(l=o.a.get("action.doingAct")),"failed"===a&&(l=n||s),Object(r.jsxs)("div",{className:"al_item ".concat(a?"".concat(a):""),children:[Object(r.jsxs)("div",{className:"flex",children:[Object(r.jsx)("span",{className:"al_number",children:t+1}),Object(r.jsx)("span",{className:"al_title".concat(a?" ".concat(a):""),children:l})]}),"pending"===a&&Object(r.jsx)(c.a,{indicator:p,className:"spiny"})]},e.key)}));return Object(r.jsx)("div",{className:"action-line",children:t})}}t.a=d},1111:function(e,t,s){},1420:function(e,t,s){},1434:function(e,t,s){"use strict";var a,i=s(0),n=s.n(i),o=s(39),c=s.n(o),l=(s(196),s(253)),r=s(777),p=s(1439),d=(s(1445),s(300)),h=s(832),j=s(4),b=s(16);let m=Object(l.b)("network")(a=Object(l.c)(a=class extends n.a.Component{constructor(e){super(e),this.initState=(e,t)=>{this.setState({_slippage:e,_deadline:t,slippage:e,deadline:t},(()=>{this.showInfoMsg()}))},this.onCancel=()=>{this.setState({slippage:this.state._slippage,deadline:this.state._deadline},(()=>{this.showInfoMsg()})),this.props.onCancel&&this.props.onCancel()},this.onChange=()=>{this.setState({_slippage:this.state.slippage,_deadline:this.state.deadline},(()=>{this.showInfoMsg()})),this.props.onChange&&this.props.onChange(this.state.slippage,this.state.deadline)},this.onSlippageChange=e=>{const t=e.target.value,{valid:s,str:a}=Object(j.E)(t,2);s&&this.setState({slippage:a},(()=>{this.showInfoMsg()}))},this.onDeadlineChange=e=>{const t=e.target.value,{valid:s,str:a}=Object(j.E)(t,0);if(t){if(s){let e=a;Number(a)>1e4&&(e=1e4),this.setState({deadline:e})}}else this.setState({deadline:t})},this.onSlippageBlur=()=>{const e=this.state.slippage;Number(e)>=50?this.setState({slippage:e.slice(0,1)},(()=>{this.showInfoMsg()})):0!=Number(e)||this.setState({slippage:"0.01"},(()=>{this.showInfoMsg()}))},this.onDeadlineBlur=()=>{let e=Number(this.state.deadline);0===e&&(e=1),this.setState({deadline:e})},this.showInfoMsg=()=>{const e=this.state.slippage;e&&(Number(e)<.5?this.setState({info:c.a.get("settings.slippage_info_1")}):Number(e)>5&&Number(e)<50?this.setState({info:c.a.get("settings.slippage_info_2")}):Number(e)>=50?this.setState({info:c.a.get("settings.slippage_info_3")}):this.setState({info:""}))},this.state={_slippage:"0.5",_deadline:"1",slippage:"0.5",deadline:"1",info:""}}render(){return Object(b.jsx)(n.a.Fragment,{children:Object(b.jsxs)(r.a,{title:Object(b.jsx)("span",{className:"setting-title",children:c.a.get("settings.title")}),closable:!0,visible:this.props.visible,onCancel:this.onCancel,footer:null,className:"setting-modal",style:{marginLeft:Object(j.u)()},width:630,centered:!0,children:[Object(b.jsxs)("div",{className:"modal-content",children:[Object(b.jsx)(d.a,{tip:this.props.slippate_tip||c.a.get("settings.slippage_tip"),children:Object(b.jsx)("span",{className:"setting-slippage",children:c.a.get("settings.slippage")})}),Object(b.jsxs)("div",{className:"flex justify-content btns",children:[Object(b.jsx)("button",{className:"0.1"===this.state.slippage?"active":"default",onClick:()=>this.onSlippageChange({target:{value:"0.1"}}),children:"0.1%"}),Object(b.jsx)("button",{className:"0.5"===this.state.slippage?"active":"",onClick:()=>this.onSlippageChange({target:{value:"0.5"}}),children:"0.5%"}),Object(b.jsx)("button",{className:"1"===this.state.slippage?"active":"",onClick:()=>this.onSlippageChange({target:{value:"1"}}),children:"1%"}),Object(b.jsx)("div",{className:"slippage-input",children:Object(b.jsx)(p.a,{suffix:"%",value:this.state.slippage,onChange:this.onSlippageChange,onBlur:this.onSlippageBlur})})]}),this.state.info?Object(b.jsx)("div",{className:"info",children:this.state.info}):null,Object(b.jsxs)("div",{className:"dead-line",children:[Object(b.jsx)(d.a,{tip:c.a.get("settings.deadline_tip"),children:c.a.get("settings.deadline")}),Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)(p.a,{value:this.state.deadline,onChange:this.onDeadlineChange,onBlur:this.onDeadlineBlur}),Object(b.jsx)("div",{className:"minutes",children:c.a.get("settings.deadline_minutes")})]})]})]}),Object(b.jsx)(h.a,{type:"single",info:c.a.get("settings.confirm_btn"),onClick:this.onChange})]})})}})||a)||a;t.a=m},1443:function(e,t,s){"use strict";var a,i=s(0),n=s.n(i),o=s(39),c=s.n(o),l=s(253),r=s(777),p=(s(1444),s(942),s(4)),d=s(71),h=s(10),j=s(1434),b=s(1041),m=s(946),g=s(832),O=s(300),x=s(196),u=s(947),v=s(16);let k=Object(l.b)("network")(a=Object(l.b)("pool")(a=Object(l.c)(a=class extends n.a.Component{constructor(e){super(e),this.showModal=()=>{this.setState({visible:!0})},this.cancel=()=>{this.state.actionStarted?this.setState({miniPopVisible:!0}):(this.setState({visible:!1}),this.props.hideMigrateModal())},this.migrate=async()=>{const{migrateData:e,migrateDataV2:t}=this.props,{tokenV2:s,trxV2:a,lpV2:i}=this.computeV2(),n="v1.5"===this.props.version?h.a.migrateContract.v15:h.a.migrateContract.v1;let o,c,{settingSlippageMigrate:l,defaultAccount:r}=this.props.network;l=Number(l);const j=new p.a(a),b=new p.a(s);o="0x".concat(b.times(1-l/100).times(new p.a(10).pow(e.tokenDecimal)).integerValue(p.a.ROUND_DOWN).toString(16)),c="0x".concat(j.times(1-l/100).times(new p.a(10).pow(6)).integerValue(p.a.ROUND_DOWN).toString(16));const m={title:"pair_actions.add",obj:{trxAmount:Object(p.n)(e.trx.toString(),6),trx:"TRX",tokenAmount:Object(p.n)(e.value.toString(),e.tokenDecimal),tokenSymbol:Object(p.p)(e.tokenSymbol,e.tokenAddress)}},g={contractAddress:n,token:e.tokenAddress,amountTokenMin:Object(p.a)(o)._toIntegerDown()._toHex(),amountETHMin:Object(p.a)(c)._toIntegerDown()._toHex(),to:r,deadline:await Object(d.g)(this.props.network.settingDeadlineMigrate)};await Object(d.x)(g,m)?this.setState({step:3}):this.setApproveBarText("two",!1)},this.computeV2=()=>{const{migrateData:e,migrateDataV2:t}=this.props,s=Object(p.a)(e.value).div(Object(p.a)(e.trx)),a=Object(p.a)(t.exTokenABalance.div(new p.a(10).pow(e.tokenDecimal))).div(Object(p.a)(t.exTokenBBalance.div(new p.a(10).pow(6))));let i,n,o,c,l;return Object(p.a)(s).gt(Object(p.a)(a))?(i=Object(p.a)(e.trx),n=Object(p.a)(t.exTokenABalance.div(new p.a(10).pow(e.tokenDecimal))).div(Object(p.a)(t.exTokenBBalance.div(new p.a(10).pow(6)))).times(Object(p.a)(e.trx)),o=Object(p.a)(t.totalLiquidity.div(new p.a(10).pow(18))).div(Object(p.a)(t.exTokenBBalance.div(new p.a(10).pow(6)))).times(Object(p.a)(e.trx)),c=e.tokenSymbol,l=Object(p.o)(Object(p.a)(Object(p.a)(e.value).minus(n)),{miniText:1e-4,cutZero:!0,dp:4})):(n=Object(p.a)(e.value),i=Object(p.a)(t.exTokenBBalance.div(new p.a(10).pow(6))).div(Object(p.a)(t.exTokenABalance.div(new p.a(10).pow(e.tokenDecimal)))).times(Object(p.a)(e.value)),o=Object(p.a)(t.totalLiquidity.div(new p.a(10).pow(18))).div(Object(p.a)(t.exTokenABalance.div(new p.a(10).pow(e.tokenDecimal)))).times(Object(p.a)(e.value)),c="TRX",l=Object(p.o)(Object(p.a)(Object(p.a)(e.trx).minus(i)),{miniText:1e-4,cutZero:!0,dp:4})),{tokenV2:n,trxV2:i,lpV2:o,refundedToken:c,refundedValue:l}},this.checkApproveStatus=async()=>{await this.isApproved()?this.setState({needApproveOne:"false",actionRetry:"setApproveTwo",step:2,actionStarted:!0},(()=>{this.onRetryAction()})):this.onRetryAction()},this.onRetryAction=()=>{let{needApproveOne:e,needApproveTwo:t,actionRetry:s}=this.state;switch(s||(e?s="setApproveOne":t&&(s="setApproveTwo")),s){case"setApproveOne":this.setState({approveActionOneState:"start",actionInfo:c.a.get("action.startBtn"),actionDisabled:!0},(()=>{this.setApprove("one")}));break;case"setApproveTwo":this.setState({approveActionOneState:"success",approveActionTwoState:"start",actionInfo:c.a.get("action.startBtn"),actionDisabled:!0},(()=>{this.migrate()}))}},this.setApproveBarText=(e,t)=>{console.log(e),t?("one"===e&&this.setState({approveActionOneState:"pending",actionInfo:c.a.get("action.doingBtn"),actionDisabled:!0,actionStarted:!0},(()=>{console.log(273),setTimeout((()=>{this.setState({approveActionOneState:"success",approveActionTwoState:"start"})}),5e3)})),"two"===e&&this.setState({approveActionTwoState:"pending",actionInfo:c.a.get("action.doingBtn"),actionDisabled:!0,actionStarted:!0},(()=>{setTimeout((()=>{this.setState({approveActionTwoState:"success",baseActionState:"info"})}),5e3)}))):("one"===e&&this.setState({approveActionOneState:"error"}),"two"===e&&this.setState({approveActionTwoState:"error"}),this.setState({actionRetry:"one"===e?"setApproveOne":"setApproveTwo",actionInfo:c.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0}))},this.setApprove=async e=>{const{migrateData:t,migrateDataV2:s}=this.props,a="v1.5"===this.props.version?h.a.migrateContract.v15:h.a.migrateContract.v1;this.setState({step:2});await Object(d.e)(t.address,a,{title:"migrate.action1"})?(this.setApproveBarText(e,!0),"one"===e?this.setState({needApproveOne:!1,actionRetry:"setApproveTwo"},(()=>{this.onRetryAction()})):this.setState({needApproveTwo:!1})):this.setApproveBarText(e,!1)},this.miniPopOk=()=>{this.setState({miniPopVisible:!1,visible:!1,step:1,actionStarted:!1}),this.props.hideMigrateModal()},this.miniPopCancel=()=>{this.setState({miniPopVisible:!1})},this.gotoPool=()=>{this.props.pool.setData({actionLiqV2:0}),this.props.onChange(1),this.props.hideMigrateModal()},this.changeRate=()=>{const{migrateData:e,migrateDataV2:t}=this.props;1===this.state.newRateType?this.setState({oldRateType:2,oldRateLabel:"TRX-"+Object(p.p)(e.tokenSymbol,e.tokenAddress),oldRate:Object(p.o)(Object(p.a)(e.value).div(Object(p.a)(e.trx)),{miniText:1e-4,cutZero:!0,dp:4}),newRateType:2,newRateLabel:"TRX-"+Object(p.p)(e.tokenSymbol,e.tokenAddress),newRate:Object(p.o)(Object(p.a)(t.exTokenABalance.div(new p.a(10).pow(e.tokenDecimal))).div(Object(p.a)(t.exTokenBBalance.div(new p.a(10).pow(6)))),{miniText:1e-4,cutZero:!0,dp:4})}):this.setState({oldRateType:1,oldRateLabel:Object(p.p)(e.tokenSymbol,e.tokenAddress)+"-TRX",oldRate:Object(p.o)(Object(p.a)(e.trx).div(Object(p.a)(e.value)),{miniText:1e-4,cutZero:!0,dp:4}),newRateType:1,newRateLabel:Object(p.p)(e.tokenSymbol,e.tokenAddress)+"-TRX",newRate:Object(p.o)(Object(p.a)(t.exTokenBBalance.div(new p.a(10).pow(6))).div(Object(p.a)(t.exTokenABalance.div(new p.a(10).pow(e.tokenDecimal)))),{miniText:1e-4,cutZero:!0,dp:4})})},this.isApproved=async()=>{const e="v1.5"===this.props.version?h.a.migrateContract.v15:h.a.migrateContract.v1;let{defaultAccount:t}=this.props.network;const s=await Object(d.v)(this.props.migrateData.address,t,e);return Object(p.a)(s).gt(0)},this.settingsRef=n.a.createRef(),this.state={visible:!1,step:1,actionInfo:c.a.get("action.startBtn"),actionDisabled:!0,approveActionOneState:"",approveActionOneError:c.a.get("action.approveActErr"),approveActionOneTitle:c.a.get("migrate.action1"),needApproveOne:!0,needApproveTwo:!0,approveActionTwoState:"",supplyActionEapproveActionTwoErrorrror:c.a.get("action.supplyActErr"),approveActionTwoTitle:c.a.get("migrate.action2"),miniPopVisible:!1,actionStarted:!1,oldRateType:1,oldRateLabel:Object(p.p)(e.migrateData.tokenSymbol,e.migrateData.tokenAddress)+"-TRX",oldRate:Object(p.o)(Object(p.a)(e.migrateData.trx).div(Object(p.a)(e.migrateData.value)),{miniText:1e-4,cutZero:!0,dp:4}),newRateType:1,newRateLabel:Object(p.p)(e.migrateData.tokenSymbol,e.migrateData.tokenAddress)+"-TRX",newRate:Object(p.o)(Object(p.a)(e.migrateDataV2.exTokenBBalance.div(new p.a(10).pow(6))).div(Object(p.a)(e.migrateDataV2.exTokenABalance.div(new p.a(10).pow(e.migrateData.tokenDecimal)))),{miniText:1e-4,cutZero:!0,dp:4}),refundedValue:"",refundedToken:"",actionRetry:""}}componentDidMount(){}render(){const{migrateData:e,migrateDataV2:t}=this.props,{tokenV2:s,trxV2:a,lpV2:i,refundedToken:n,refundedValue:o}=this.computeV2(),{step:l,actionDisabled:d,actionInfo:k,approveActionTwoState:N,approveActionTwoError:w,approveActionTwoTitle:f,approveActionOneState:S,approveActionOneError:T,approveActionOneTitle:A,oldRateLabel:y,oldRate:C,newRateLabel:D,newRate:_}=this.state;return Object(v.jsxs)("div",{children:[Object(v.jsxs)(r.a,{title:null,closable:3!==this.state.step,visible:this.props.visible||this.state.visible,onCancel:this.cancel,className:"pool-modal add-gai ".concat(1===l?"migrateModal":""),footer:null,style:{marginLeft:Object(p.u)()},width:630,destroyOnClose:!0,centered:!0,children:[1===l&&Object(v.jsxs)("div",{className:"step1",children:[Object(v.jsx)("div",{className:"title",children:c.a.get("migrate.title")}),Object(v.jsx)("p",{className:"desc",children:c.a.get("migrate.desc")}),Object(v.jsxs)("section",{className:"info",children:[Object(v.jsxs)("div",{className:"lptokens",children:[Object(v.jsxs)("span",{className:"images",children:[Object(v.jsx)("img",{className:"logo",src:h.a.trxLogoUrl,alt:""}),Object(v.jsx)("img",{className:"logo",src:e.tokenLogoUrl,alt:""})]}),Object(v.jsxs)("span",{className:"name",children:["TRX-",Object(p.p)(e.tokenSymbol,e.tokenAddress)]}),Object(v.jsx)("span",{className:"version",children:"v1.5"===this.props.version?"V1.5":"V1"})]}),Object(v.jsxs)("div",{className:"box",children:[Object(v.jsx)("div",{className:"line-box",children:Object(v.jsx)("span",{})}),Object(v.jsxs)("div",{className:"lp",children:[Object(v.jsxs)("span",{className:"images",children:[Object(v.jsx)("img",{className:"logo",src:h.a.trxLogoUrl,alt:""}),Object(v.jsx)("img",{className:"logo",src:e.tokenLogoUrl,alt:""})]}),Object(v.jsxs)("span",{className:"name",children:[Object(p.p)(e.tokenSymbol,e.tokenAddress),"-TRX LP"]}),Object(v.jsx)("span",{className:"amount",children:Object(p.o)(e.tokens,{miniText:1e-4,cutZero:!0,dp:4})})]}),Object(v.jsxs)("div",{className:"token",children:[Object(v.jsx)("span",{className:"images",children:Object(v.jsx)("img",{className:"logo",src:e.tokenLogoUrl,alt:""})}),Object(v.jsx)("span",{className:"name",children:Object(p.p)(e.tokenSymbol,e.tokenAddress)}),Object(v.jsx)("span",{className:"amount",children:Object(p.o)(e.value,{miniText:1e-4,cutZero:!0,dp:4})})]}),Object(v.jsxs)("div",{className:"token",children:[Object(v.jsx)("span",{className:"images",children:Object(v.jsx)("img",{className:"logo",src:h.a.trxLogoUrl,alt:""})}),Object(v.jsx)("span",{className:"name",children:"TRX"}),Object(v.jsx)("span",{className:"amount",children:Object(p.o)(e.trx,{miniText:1e-4,cutZero:!0,dp:4})})]})]}),Object(v.jsxs)("div",{className:"rate",children:[Object(v.jsx)("span",{className:"rate-title",children:c.a.get("migrate.rate")}),y,Object(v.jsx)("em",{onClick:()=>this.changeRate()}),Object(v.jsx)("span",{className:"value mr-0",children:C})]})]}),Object(v.jsx)("div",{className:"advanced",children:Object(v.jsx)("span",{onClick:()=>{this.settingsRef.current.initState(this.props.network.settingSlippageMigrate,this.props.network.settingDeadlineMigrate),this.props.network.setData({settingVisibleMigrate:!0})},children:c.a.get("migrate.set_link")})}),Object(v.jsxs)("section",{className:"info v2",children:[Object(v.jsxs)("div",{className:"lptokens",children:[Object(v.jsxs)("span",{className:"images",children:[Object(v.jsx)("img",{className:"logo",src:h.a.trxLogoUrl,alt:""}),Object(v.jsx)("img",{className:"logo",src:e.tokenLogoUrl,alt:""})]}),Object(v.jsxs)("span",{className:"name",children:["TRX-",Object(p.p)(e.tokenSymbol,e.tokenAddress)]}),Object(v.jsx)("span",{className:"version",children:"V2"})]}),Object(v.jsxs)("div",{className:"box",children:[Object(v.jsx)("div",{className:"line-box",children:Object(v.jsx)("span",{})}),Object(v.jsxs)("div",{className:"lp",children:[Object(v.jsxs)("span",{className:"images",children:[Object(v.jsx)("img",{className:"logo",src:h.a.trxLogoUrl,alt:""}),Object(v.jsx)("img",{className:"logo",src:e.tokenLogoUrl,alt:""})]}),Object(v.jsxs)("span",{className:"name",children:[Object(p.p)(e.tokenSymbol,e.tokenAddress),"-TRX LP"]}),Object(v.jsx)("span",{className:"amount",children:Object(p.o)(i,{miniText:1e-4,cutZero:!0,dp:4})})]}),Object(v.jsxs)("div",{className:"token",children:[Object(v.jsx)("span",{className:"images",children:Object(v.jsx)("img",{className:"logo",src:e.tokenLogoUrl,alt:""})}),Object(v.jsx)("span",{className:"name",children:Object(p.p)(e.tokenSymbol,e.tokenAddress)}),Object(v.jsx)("span",{className:"amount",children:Object(p.o)(s,{miniText:1e-4,cutZero:!0,dp:4})})]}),Object(v.jsxs)("div",{className:"token",children:[Object(v.jsx)("span",{className:"images",children:Object(v.jsx)("img",{className:"logo",src:h.a.trxLogoUrl,alt:""})}),Object(v.jsx)("span",{className:"name",children:"TRX"}),Object(v.jsx)("span",{className:"amount",children:Object(p.o)(a,{miniText:1e-4,cutZero:!0,dp:4})})]})]}),Object(v.jsxs)("div",{className:"rate",children:[Object(v.jsx)("span",{className:"rate-title",children:c.a.get("migrate.rate")}),D,Object(v.jsx)("em",{onClick:()=>this.changeRate()}),Object(v.jsx)("span",{className:"value",children:_})]}),Object(v.jsx)("div",{className:"refunded",children:Object(v.jsx)(O.a,{tip:Object(v.jsx)("div",{className:"pool-tooltip-text",children:c.a.get("migrate.refunded_tips")}),children:c.a.get("migrate.refunded",{value1:o,value2:Object(p.p)(n,e.tokenAddress)}),toolClass:"common-tool",titleClass:"common-tool-title",tail:!0,placement:x.a?"left":"bottom"})})]}),Object(v.jsx)("div",{className:"btn",onClick:this.checkApproveStatus,children:c.a.get("migrate.btn")})]}),2===l&&Object(v.jsxs)("div",{className:"step2",children:[Object(v.jsx)("div",{className:"title normal",children:c.a.get("migrate.migrate")}),Object(v.jsxs)("div",{className:"line",children:[Object(v.jsx)("span",{className:"version",children:"v1.5"===this.props.version?"V1.5":"V1"}),Object(v.jsx)("span",{className:"version",children:"V2"})]}),Object(v.jsxs)("div",{className:"ib-parent center",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"add-value",children:Object(p.o)(e.value,{miniText:1e-4,cutZero:!0,dp:4})}),Object(v.jsx)("span",{className:"add-token",children:Object(p.p)(e.tokenSymbol,e.tokenAddress)})]}),Object(v.jsx)("span",{className:"plus",children:"+"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"add-value",children:Object(p.o)(e.trx,{miniText:1e-4,cutZero:!0,dp:4})}),Object(v.jsx)("span",{className:"add-token",children:"TRX"})]}),Object(v.jsx)("div",{className:"add-ver",children:"v1.5"===this.props.version?"V1.5":"V1"})]}),Object(v.jsx)("div",{className:"supplyLineTitle",children:c.a.get("action.supplyLineTitle")}),Object(v.jsxs)(b.a,{children:["success"!==S&&Object(v.jsx)("span",{status:S,err:T,children:A}),"success"!==N&&Object(v.jsx)("span",{status:N,err:w,children:f})]}),Object(v.jsx)(g.a,{type:"single",disabled:d,info:k,onClick:this.onRetryAction})]}),3===l&&Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"modal-success",children:[Object(v.jsx)("img",{src:u.a,alt:""}),Object(v.jsx)("div",{className:"title green",children:c.a.get("migrate.successTitle")}),Object(v.jsxs)("div",{className:"ib-parent center mb40",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"add-value",children:Object(p.o)(e.value,{miniText:1e-4,cutZero:!0,dp:4})}),Object(v.jsx)("span",{className:"add-token",children:Object(p.p)(e.tokenSymbol,e.tokenAddress)})]}),Object(v.jsx)("span",{className:"plus",children:"+"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"add-value",children:Object(p.o)(e.trx,{miniText:1e-4,cutZero:!0,dp:4})}),Object(v.jsx)("span",{className:"add-token",children:"TRX"})]}),Object(v.jsx)("div",{className:"add-ver",children:"v1.5"===this.props.version?"V1.5":"V1"})]}),Object(v.jsx)(g.a,{type:"single",info:c.a.get("action.closeBtn"),onClick:this.gotoPool}),Object(v.jsx)("div",{className:"supplyDescTitle",children:c.a.get("action.supplyDescTitle")})]})}),Object(v.jsx)(j.a,{slippate_tip:c.a.get("migrate.slippate_tip"),ref:this.settingsRef,visible:this.props.network.settingVisibleMigrate,onCancel:e=>{this.props.network.setData({settingVisibleMigrate:!1})},onChange:(e,t)=>{this.props.network.setData({settingVisibleMigrate:!1}),this.props.network.saveSettingsForMigrate(e,t)}})]}),this.state.miniPopVisible&&Object(v.jsx)(m.a,{visible:this.state.miniPopVisible,confirm:this.miniPopOk,cancel:this.miniPopCancel})]})}})||a)||a)||a;t.a=k},1444:function(e,t,s){},1445:function(e,t,s){},1452:function(e,t,s){"use strict";t.a=s.p+"static/media/wallet.d2b086d3.svg"},1453:function(e,t,s){"use strict";t.a=s.p+"static/media/arrow-right-long.03b7f6c0.svg"},1479:function(e,t,s){"use strict";var a,i=s(0),n=s.n(i),o=s(39),c=s.n(o),l=s(196),r=s(253),p=s(1496),d=s(1034),h=s(1428),j=s(71),b=s(1443),m=s(10),g=s(4),O=s(111),x=(s(942),s(109)),u=s(832),v=s(300),k=s(296),N=s(301),w=s(1452),f=s(1453),S=s(169),T=s(16);const A=Object(T.jsx)(S.a,{style:{fontSize:24},spin:!0});let y=Object(r.b)("network")(a=Object(r.b)("pool")(a=Object(r.c)(a=class extends n.a.Component{constructor(e){super(e),this.componentDidMount=async()=>{this.unmount=!1;const e=setInterval((()=>{this.props.network.isConnected&&(this.timer=setInterval((()=>{this.getLiquidityUserData()}),6e3),this.getLiquidityUserData(!0),clearInterval(e))}),1e3)},this.componentWillUnmount=()=>{this.unmount=!0,clearInterval(this.timer)},this.addLiq=e=>{this.props.pool.setData({actionLiqV2:1,tokenTwoFixed:!0,tokenInfo:e})},this.removeLiq=e=>{if(!(e.tokens.times(m.a.defaultTokenPrecision).integerValue(g.a.ROUND_DOWN).gt(0)&&e.trx.times(m.a.trxPrecision).integerValue(g.a.ROUND_DOWN).gt(0)&&e.value.times(m.a.defaultTokenPrecision).integerValue(g.a.ROUND_DOWN).gt(0)))return!1;e.tokens.lte(0)||this.props.pool.setData({actionLiqV2:2,tokenInfo:e})},this.migrateLiq=async e=>{const t=m.a.wtrxAddress,s=e.tokenAddress,a=this.props.network.defaultAccount,{exchangeAddr:i,exTokenABalance:n,exTokenBBalance:o,totalLiquidity:c}=await Object(j.o)(a,s,t),l={exchangeAddr:i,exTokenABalance:n,exTokenBBalance:o,totalLiquidity:c};this.setState({migrateModalVisbile:!0,migrateData:e,migrateDataV2:l})},this.hasContractV2=async e=>{const t=m.a.wtrxAddress,s=e.tokenAddress,a=Object(g.j)(t,s),i=m.a.chain,n=new O.a({fullHost:i.fullHost});let o;const c=await n.trx.getContract(a);return"{}"!==JSON.stringify(c)&&(o=!0,!0)},this.hideMigrateModal=e=>{this.setState({migrateModalVisbile:!1})},this.changeAndFree=()=>{this.props.pool.setData({actionLiqV2:1,tokenTwoFixed:!1,tokenInfo:{tokenAddress:"",tokenSymbol:""},tokenDetail:{trx:new g.a(0),value:new g.a(0),tokens:new g.a(0),price1:"--",price2:"--",exTrx:new g.a(0)}})},this.getContractData=async()=>{try{const e=this.state.currentPage,t=this.props.pool.originLiquidityList.slice((e-1)*this.pageSize,(e-1)*this.pageSize+this.pageSize);if(t.length>0){if(this.props.pool.originLiquidityList.map((e=>{const s=t.filter((t=>{t.tokenAddress,e.tokenAddress}));s.length>0&&Object.assign(e,s[0])})),this.unmount)return;e===this.state.currentPage&&this.setState({liquidityList:t})}}catch(e){console.log(e)}},this.onChange=async e=>{this.setState({currentPage:e},(()=>{this.getContractData()}))},this.showLoginModal=e=>{this.props.network.connectWallet()},this.timer=0,this.unmount=!1,this.pageSize=3,this.state={currentPage:1,liquidityList:[],version:window.localStorage.getItem("swapVersion")||"v1.0",migrateModalVisbile:!1,migrateData:"",status:!1}}reload(e){this.setState({currentPage:1,liquidityList:[],version:e,status:!1},(()=>{this.getLiquidityUserData(!0)}))}async getLiquidityUserData(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.setState({status:!1});const t=this.props.network.defaultAccount;if(!t)return;const{originLiquidityList:s=[],version:a}=this.props.pool;let i="v1.5"===a?2:1,n=(await x.a.getLiquidityUserList(t)).filter((e=>new g.a(e.jswapBalance).gt(0)&&e.ver===i)),o=[];for(let p of n)new g.a(p.jswapBalance).gt(0)&&o.push(p.address);let c=await Object(j.q)(this.props.network.defaultAccount,o);for(let p=0;p<(null===(l=c._trx)||void 0===l?void 0:l.length);p++){var l;n[p].trx=new g.a(c._trx[p]).div(new g.a(10).pow(6)),n[p].value=new g.a(c._token[p]).div(new g.a(10).pow(n[p].tokenDecimal)),n[p].tokens=new g.a(c._uniToken[p]).div(new g.a(10).pow(6)),n[p].share=new g.a(c._uniToken[p]).times(100).div(new g.a(c._totalsupply[p])),n[p].hasContractV2=await this.hasContractV2(n[p])}n=n.filter((e=>Object(g.a)(e.tokens).gt(0))),this.props.pool.setData({originLiquidityList:n}),e&&this.setState({status:!0});const{currentPage:r}=this.state;1===r&&this.getContractData()}render(){const{liquidityList:e,status:t}=this.state,{isConnected:s}=this.props.network,{originLiquidityList:a=[]}=this.props.pool;let i=e.length,n=c.a.options.currentLocale;const o=window.localStorage.getItem("swapVersion")||"v2.0";return Object(T.jsxs)(p.a,{className:"pool-content",children:[Object(T.jsx)(u.a,{type:"single",info:c.a.get("pool.base_addLiq_btn"),onClick:this.changeAndFree}),Object(T.jsx)(v.a,{tip:Object(T.jsx)("div",{className:"pool-tooltip-text",children:c.a.get("pool.base_list_title_tip")}),children:c.a.get("pool.base_list_title")+(t&&i>0&&a.length>0?"(".concat(a.length,")"):""),toolClass:"common-tool",titleClass:"common-tool-title",tail:!0,placement:l.a?"left":"bottom"}),s?t?Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("section",{className:i>0?"base-list":"err-list",children:i>0&&a.length>0?Object(T.jsxs)("div",{children:[Object(T.jsx)("ul",{children:e.map(((e,t)=>Object(T.jsxs)("li",{className:"item",children:[Object(T.jsxs)("div",{className:"line-name flex between",children:[Object(T.jsxs)("div",{className:"inline-flex",children:[Object(T.jsx)("img",{className:"logo",src:N.a,alt:""}),Object(T.jsx)("img",{className:"logo",src:e.tokenLogoUrl||k.a,onError:e=>{e.target.onerror=null,e.target.src=k.a},alt:""}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("span",{className:"name",children:[Object(g.p)(e.tokenSymbol,e.tokenAddress),Object(T.jsx)("span",{className:"symbol",children:"/"}),"TRX"]}),Object(T.jsx)("a",{className:"link",href:"/?lang="+n+"#/scan/detail/"+e.tokenAddress,target:"_blank",children:c.a.get("pool.base_info_link")})]})]}),Object(T.jsxs)("div",{className:"inline-flex actions actions-new",children:[!Object.keys(m.a.deflationToken).includes(e.tokenAddress)&&e.hasContractV2&&e.tokens.gt(0)&&e.trx.gt(0)&&e.value.gt(0)&&Object(T.jsx)("span",{className:"link migrate",onClick:t=>this.migrateLiq(e),children:c.a.get("migrate.title")}),Object(T.jsxs)("div",{className:"inline-flex",children:[Object(T.jsx)("span",{className:"link",onClick:t=>this.addLiq(e),children:c.a.get("pool.base_increase_link")}),Object(T.jsx)("span",{className:"link ".concat(e.tokens.times(m.a.trxPrecision).integerValue(g.a.ROUND_DOWN).gt(0)&&e.trx.times(m.a.trxPrecision).integerValue(g.a.ROUND_DOWN).gt(0)&&e.value.times(m.a.defaultTokenPrecision).integerValue(g.a.ROUND_DOWN).gt(0)?"":"disabled"),onClick:t=>this.removeLiq(e),children:c.a.get("pool.base_remove_link")})]})]})]}),Object(T.jsxs)("div",{className:"line-value ",children:[Object(T.jsxs)("div",{className:"flex between",children:[Object(T.jsxs)("p",{children:[c.a.get("pool.base_amount_text"),Object(T.jsxs)("span",{className:"name",children:[Object(g.p)(e.tokenSymbol,e.tokenAddress),Object(T.jsx)("span",{className:"symbol",children:"/"}),"TRX"]})]}),Object(T.jsx)("p",{children:Object(T.jsxs)("span",{className:"name",children:[c.a.get("pool.base_tokens_text"),Object(T.jsx)("span",{className:"symbol",children:"/"}),c.a.get("pool.base_share_text")]})})]}),Object(T.jsxs)("div",{className:"flex between",children:[Object(T.jsx)("p",{children:e.value&&Object(T.jsxs)("span",{className:"value",children:[e.value._toFixed(4,1),Object(T.jsx)("span",{className:"symbol",children:"/"}),e.trx._toFixed(4,1)]})}),Object(T.jsx)("p",{children:e.value&&Object(T.jsxs)("span",{className:"value",children:[Object(g.o)(e.tokens,{miniText:1e-4,cutZero:!0,dp:4}),Object(T.jsx)("span",{className:"symbol",children:"/"}),e.share.gt(0)&&e.share.lt(.01)?"<0.01":isNaN(e.share._toFixed(2,1))?"--":e.share._toFixed(2,1),"%"]})})]})]})]},e.address)))}),Object(T.jsx)(d.a,{current:this.state.currentPage,pageSize:3,size:"small",onChange:this.onChange,total:a.length,hideOnSinglePage:!0})]}):c.a.get("pool.base_noLiquidity_tip")})}):Object(T.jsxs)("section",{className:"err-list loading-section",children:[Object(T.jsx)(h.a,{indicator:A,className:"spiny loading-spiny"}),Object(T.jsx)("span",{className:"loading-text",children:c.a.get("loading")})]}):Object(T.jsx)("section",{className:"err-list",children:Object(T.jsxs)("span",{className:"wallet-link",onClick:e=>{this.showLoginModal(e)},children:[Object(T.jsx)("img",{src:w.a}),Object(T.jsx)("span",{children:c.a.get("pool.base_notConnect_tip")}),Object(T.jsx)("img",{src:f.a})]})}),this.state.migrateModalVisbile&&Object(T.jsx)(b.a,{visible:this.state.migrateModalVisbile,hideMigrateModal:this.hideMigrateModal,migrateData:this.state.migrateData,migrateDataV2:this.state.migrateDataV2,onChange:this.onChange,version:o})]})}})||a)||a)||a;t.a=y},1533:function(e,t,s){"use strict";s.r(t);var a,i=s(0),n=s.n(i),o=s(253),c=s(1479),l=s(16);let r=Object(o.b)("network")(a=Object(o.c)(a=class extends n.a.Component{render(){return Object(l.jsx)("div",{children:Object(l.jsx)(c.a,{})})}})||a)||a;t.default=r},832:function(e,t,s){"use strict";var a=s(0),i=s.n(a),n=(s(39),s(196),s(887),s(16));class o extends i.a.Component{constructor(e){super(e),this.onClick=()=>{this.props.disabled||this.props.state||this.props.onClick&&this.props.onClick()},this.onLeftClick=()=>{this.props.lDisabled||this.props.lState||this.props.onLeftClick&&this.props.onLeftClick()},this.onMiddleClick=()=>{this.props.mDisabled||this.props.mState||this.props.onMiddleClick&&this.props.onMiddleClick()},this.onRightClick=()=>{this.props.rDisabled||this.props.rState||this.props.onRightClick&&this.props.onRightClick()},this.state={}}render(){let e=null;switch(this.props.type){case"trisection":e=Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"trisection "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick,children:this.props.lInfo}),Object(n.jsx)("button",{className:"trisection "+(this.props.mDisabled?"gray":this.props.mState?this.props.mState:"blue"),onClick:this.onMiddleClick,children:this.props.mInfo}),Object(n.jsx)("button",{className:"trisection "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick,children:this.props.rInfo})]});break;case"half":e=Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"half "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick,children:this.props.lInfo}),Object(n.jsx)("button",{className:"half "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick,children:this.props.rInfo})]});break;default:e=Object(n.jsx)("button",{className:"single "+(this.props.disabled?"gray":this.props.state?this.props.state:this.props.btnColor?this.props.btnColor:"blue"),onClick:this.onClick,...this.props,children:this.props.info})}return Object(n.jsx)(i.a.Fragment,{children:e})}}t.a=o},887:function(e,t,s){},942:function(e,t,s){},946:function(e,t,s){"use strict";var a=s(0),i=s.n(a),n=s(196),o=s(39),c=s.n(o),l=s(777),r=s(4),p=(s(1111),s(16));class d extends i.a.Component{constructor(e){super(e),this.confirm=()=>{this.props.confirm&&this.props.confirm()},this.cancel=()=>{this.props.cancel&&this.props.cancel()},this.state={}}render(){const e=Object(n.a)(window.navigator).any?0:64;return Object(p.jsxs)(l.a,{footer:null,title:null,closable:!0,maskClosable:!1,visible:this.props.visible,className:"unfinished-pop",onCancel:this.cancel,style:{marginLeft:Object(r.u)()+e},width:430,centered:!0,children:[Object(p.jsxs)("div",{className:"title",children:[c.a.get("action.popTitle"),Object(p.jsx)("p",{children:c.a.get("action.popDesc")})]}),Object(p.jsxs)("div",{className:"btns",children:[Object(p.jsx)("button",{onClick:this.confirm,children:c.a.get("action.popQuitBtn")}),Object(p.jsx)("button",{onClick:this.cancel,children:c.a.get("action.popCancelBtn")})]})]})}}t.a=d},947:function(e,t,s){"use strict";t.a=s.p+"static/media/TransactionSuccess.9be097c2.svg"}}]);