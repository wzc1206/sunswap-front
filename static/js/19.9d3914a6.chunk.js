(this["webpackJsonpswap-front"]=this["webpackJsonpswap-front"]||[]).push([[19],{1078:function(e,t,a){"use strict";var n=a(6),o=a(7),r=a(11),s=a(12),l=a(1),c=a.n(l),i=a(29),d=a.n(i),p=a(1401),u=a(124),m=(a(1392),c.a.createElement(u.a,{style:{fontSize:24},spin:!0})),k=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={},o}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.children,t=c.a.Children.toArray(e).map((function(e,t){var a=e.props,n=a.children,o=a.status,r=a.err,s=a.failed,l=n;return"error"===o&&(l=r||n),"pending"===o&&(l=d.a.get("action.doingAct")),"failed"===o&&(l=s||n),c.a.createElement("div",{className:"al_item ".concat(o?"".concat(o):""),key:e.key},c.a.createElement("div",{className:"flex"},c.a.createElement("span",{className:"al_number"},t+1),c.a.createElement("span",{className:"al_title".concat(o?" ".concat(o):"")},l)),"pending"===o&&c.a.createElement(p.a,{indicator:m,className:"spiny"}))}));return c.a.createElement("div",{className:"action-line"},t)}}]),a}(c.a.Component);t.a=k},1083:function(e,t,a){},1084:function(e,t,a){},1391:function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));var n=a(0),o=a.n(n),r=a(3),s=a(6),l=a(7),c=a(18),i=a(11),d=a(12),p=a(1),u=a.n(p),m=a(1081),k=a.n(m),f=a(29),b=a.n(f),v=a(1460),g=a(74),h=a.n(g),S=(a(13),a(1411)),x=a(89),E=a(159),w=a(240),y=a(1405),O=a.n(y),A=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getChartOptions=function(){Object(c.a)(n);var e=n.state,t=e.xAxisData,a=void 0===t?[]:t,o=e.seriesData,r=void 0===o?[]:o,s=e.ymin,l=e.d_max,i=e.d_min,d=(b.a.get("swap.chart_price_title",{d_max:l,d_min:i,ymin:s}),n.props.type);return{toolbox:{feature:{saveAsImage:{}},show:!1},color:["rgba(69,77,226,0.20)"],grid:{left:"0",top:"8%",right:"10%",bottom:"2%",containLabel:!0,show:!1},xAxis:[{type:"category",boundaryGap:["20%","20%"],data:a,show:!0,axisLine:{lineStyle:{color:"#F3F3F3"}},axisLabel:{showMaxLabel:!0,fontSize:10,color:"#999"}}],yAxis:[{type:"value",axisTick:{},splitLine:{show:!1},axisLine:{lineStyle:{color:"#F3F3F3"}},axisLabel:{showMaxLabel:!1,showMinLabel:!1,fontSize:10,color:"#999",formatter:function(e){return e<100?e.toPrecision(3):Number(e.toPrecision(3))}},min:function(e){return Number((.98*e.min).toPrecision(3))},max:function(e){return Number((1.02*e.max).toPrecision(3))}}],series:[{type:void 0===d?"line":d,smooth:!0,barCategoryGap:"0",itemStyle:{normal:{lineStyle:{color:"#5915E1"}}},emphasis:{itemStyle:{borderColor:"#5915E1",borderWidth:2}},symbol:"none",markPoint:{data:[{coord:[a.length-1,r[r.length-1]],value:r[r.length-1],itemStyle:{color:"transparent"},label:{fontSize:10,backgroundColor:"#FF8E18",padding:[4,5],color:"#ffffff",borderRadius:5}}],symbol:"roundRect",symbolOffset:[0,"-100%"],symbolSize:[50,20]},markLine:{label:{show:!1},data:[{0:{lineStyle:{type:"dashed",color:"rgba(72,80,229,.5)",width:1},coord:[a.length-1,Number((.98*i).toPrecision(3))],value:Number((.98*i).toPrecision(3)),symbol:"none"},1:{symbol:"path://M1552,577C1552,574.7900390625,1553.7900390625,573,1556,573C1558.2099609375,573,1560,574.7900390625,1560,577C1560,579.2099609375,1558.2099609375,581,1556,581C1553.7900390625,581,1552,579.2099609375,1552,577Z",symbolSize:8,symbolKeepAspect:!1,coord:[a.length-1,r[r.length-1]],value:r[r.length-1]}}]},data:r}]}},n.conversionData=function(){var e=Object(r.a)(o.a.mark((function e(t){var a,r,s,l,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.getKlineData({token_address:t,granularity:"5min",time_start:parseInt((new Date).getTime()/1e3)-9e4,time_end:parseInt((new Date).getTime()/1e3),type:1}).catch((function(e){return console.log(e)}));case 2:a=e.sent,r=[],s=[],a&&a.data&&a.data.map((function(e,t){t%3===(a.data.length-1)%3&&(r.push(h()(1e3*e.t).format("HH:mm")),s.push(e.c))})),l=Math.max.apply(null,s),c=Math.min.apply(null,s),n.setState({d_max:l,d_min:c}),n.setState({xAxisData:r,seriesData:s});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setChart=function(){var e=n.state,t=e.d_max,a=e.d_min,o=n.props.token_adddress,r=n.getChartOptions(),s=Object(E.a)(window.navigator).any?"80vw":"430px",l=n.props.token;return u.a.createElement("div",{className:"chart-content"},u.a.createElement(w.b,{to:{pathname:"scan/detail/".concat(o),search:"".concat(Object(E.a)(window.navigator).any?"?to=kline":"")},target:"".concat(Object(E.a)(window.navigator).any?"":"_blank")},u.a.createElement("div",{className:"chart-title"},u.a.createElement("div",null,u.a.createElement("h4",null,b.a.get("swap.chart_title",{token:l})),u.a.createElement("p",{dangerouslySetInnerHTML:{__html:b.a.get("swap.chart_price_title",{d_max:t,d_min:a})}})),u.a.createElement("img",{src:O.a})),u.a.createElement(k.a,{option:r,style:{height:"254px",width:s},lazyUpdate:!0,notMerge:!0})))},n.setLineChart=function(e){var t=Object(E.a)(window.navigator).any?"150px":"194px",a=Object(E.a)(window.navigator).any?"40px":"44px";return u.a.createElement(S.Sparklines,{data:e,style:{width:t,height:a}},u.a.createElement(S.SparklinesCurve,{style:{strokeWidth:1,stroke:"#5915E1",fill:"#A3A6DF",fillOpacity:"0.05"}}))},n.state={xAxisData:[],seriesData:[],token_adddress:"",d_max:0,d_min:0,ymin:0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.token_adddress,e.next=3,this.conversionData(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(){var e=Object(r.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.token_adddress===t.token_adddress){e.next=7;break}if(this.setState({seriesData:[]}),e.t0=t.token_adddress,!e.t0){e.next=6;break}return e.next=6,this.conversionData(t.token_adddress);case 6:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.seriesData,t=this.props.token_adddress,a=this.setChart();return u.a.createElement("div",{className:"sparkline-content align-items-center"},e.length>0&&u.a.createElement(p.Fragment,null,u.a.createElement(v.a,{content:a,trigger:"".concat(Object(E.a)(window.navigator).any?"click":"hover"),overlayClassName:"price-chart-popover"},u.a.createElement("div",{className:"sparkline-wrap"},Object(E.a)(window.navigator).any?this.setLineChart(e):u.a.createElement(w.b,{to:{pathname:"scan/detail/".concat(t)},target:"_blank"},this.setLineChart(e))))))}}]),a}(p.Component)},1392:function(e,t,a){},1399:function(e,t,a){"use strict";var n,o=a(6),r=a(7),s=a(11),l=a(12),c=a(1),i=a.n(c),d=a(202),p=a(29),u=a.n(p),m=a(800),k=a(1075),f=a(8),b=a(13),v=Object(d.b)("network")(n=Object(d.c)(n=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).changeCheckStatus=function(e){n.setState({checkStatus:e})},n.comfirmContinue=function(){n.state.checkStatus&&n.props.cb()},n.componentDidMount=function(){},n.state={checkStatus:!1},n}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.dealWarningSymbol,o=this.state.checkStatus,r=n?b.a.deflationToken[n]:{symbol:"",slippage:""},s=r.symbol,l=r.slippage;return i.a.createElement(m.a,{title:u.a.getHTML("list.deal_warning_title",{value:s}),closable:!1,visible:a,footer:null,style:{marginLeft:Object(f.C)(500)},width:525,className:"list-addtoken-modal deal-warning-modal",centered:!0},i.a.createElement("div",{className:"solor-modal-body"},i.a.createElement("div",{className:"tips"},i.a.createElement("div",{className:"tips1"},u.a.getHTML("list.deal_warning_content_1",{value:s})),i.a.createElement("div",{className:"tips1 yellow"},u.a.getHTML("list.deal_warning_content_2",{value:l})),i.a.createElement("div",{className:"tips1"},u.a.getHTML("list.deal_warning_content_3",{value:s}))),i.a.createElement("div",{className:"check-box"+(o?" checked":"")},i.a.createElement(k.a,{onChange:function(t){return e.changeCheckStatus(t.target.checked)}},u.a.get("list.i_understand"))),i.a.createElement("div",{className:"btns"},i.a.createElement("button",{onClick:this.comfirmContinue,className:o?"button-active":""},u.a.get("list.continue")))))}}]),a}(i.a.Component))||n)||n;t.a=v},1404:function(e,t,a){},1405:function(e,t,a){e.exports=a.p+"static/media/kline.6788783b.svg"},1416:function(e,t,a){e.exports=a.p+"static/media/Add.bfa88258.svg"},1428:function(e,t,a){"use strict";var n=a(9),o=a(1),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},s=a(43),l=function(e,t){return o.createElement(s.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:r}))};l.displayName="CopyOutlined";t.a=o.forwardRef(l)},1432:function(e,t,a){"use strict";var n,o=a(60),r=a(17),s=a(205),l=a(0),c=a.n(l),i=a(3),d=a(6),p=a(7),u=a(11),m=a(12),k=a(1),f=a.n(k),b=a(123),v=a.n(b),g=a(29),h=a.n(g),S=a(159),x=a(202),E=a(1074),w=a(1076),y=a(1409),O=a(800),A=a(1075),N=a(13),T=a(59),_=a(1428),j=a(8),C=(a(1404),a(243)),V=a(238),L=a.n(V),I=a(244),D=a.n(I),B=a(382),M=a.n(B),F=a(89),R=a(1399),P=Object(x.b)("pool")(n=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=window.localStorage.getItem("solor");if(e){var t=JSON.parse(e);window.localStorage.setItem("solor",JSON.stringify(t)),n.props.pool.setData({solor:t})}},n.setTokenList=Object(i.a)(c.a.mark((function e(){var t,a,o,r,s,l,i,d,p,u,m,k,f,b,g,h,S,x,E,w,y,O,A=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=A.length>0&&void 0!==A[0]?A[0]:null,e.prev=1,a=n.props.pool,o=a.byUrl,r=void 0===o?{}:o,s=a.selectedListUrl,l=void 0===s?"":s,i=a.solor,d=void 0===i?[]:i,p=window.localStorage.getItem("swapVersion"),u=r[l].tokens||[],v.a.uniqBy(u,"address").length!=u.length&&(u=[]),void 0!==(m=r[l].isToken)){e.next=15;break}return e.next=11,F.a.isToken(u.map((function(e){return e.address})));case 11:return m=e.sent,r[l].isToken=Number(m),e.next=15,n.props.pool.updateByUrl(r[l]);case 15:2===Number(m)&&(u=[]),k={tokenAddress:N.a.trxFakeAddress,address:"",addressV1:"",addressV2:"",tokenSymbol:"TRX",tokenLogoUrl:D.a,tokenName:"TRX",tokenDecimal:N.a.trxDecimal,balance:"-"},f=n.props.pool,b=f.exchanges,g=void 0===b?{}:b,h=f.allExchanges,S=void 0===h?{}:h,x=[],n.props.swap?u.map((function(e){e.address&&g[e.address]&&g[e.address].e&&x.push({tokenAddress:e.address,address:g[e.address]?g[e.address].e:null,addressV1:S&&S[0]&&S[0][e.address]?S[0][e.address].e:null,addressV2:S&&S[1]&&S[1][e.address]?S[1][e.address].e:null,tokenSymbol:e.symbol||"",tokenLogoUrl:e.logoURI||L.a,tokenName:e.name||"",tokenDecimal:Number(g[e.address].d),balance:"-"})})):u.map((function(e){e.address&&x.push({tokenAddress:e.address,address:"",addressV1:"",addressV2:"",tokenSymbol:e.symbol||"",tokenLogoUrl:e.logoURI||L.a,tokenName:e.name||"",tokenDecimal:g[e.address]&&g[e.address].d?Number(g[e.address].d):e.decimals,balance:"-"})})),d.map((function(e){e.addressV1=S&&S[0]&&S[0][e.tokenAddress]?S[0][e.tokenAddress].e:null,e.addressV2=S&&S[1]&&S[1][e.tokenAddress]?S[1][e.tokenAddress].e:null,e.address="v1.0"===p?S&&S[0]&&S[0][e.tokenAddress]?S[0][e.tokenAddress].e:null:S&&S[1]&&S[1][e.tokenAddress]?S[1][e.tokenAddress].e:null})),E=d.slice(),d.map((function(e){v.a.findIndex(x,(function(t){return t.tokenAddress===e.tokenAddress}))>=0&&v.a.remove(E,(function(t){return t.tokenAddress===e.tokenAddress}))})),x=[k].concat(E,x),w=[],y=[],O={},x.map((function(e){w.push(e),y.push(e),O[e.tokenAddress]=e})),n.state.tokenMap=O,n.setState({allTokenList:w,tokenList:y},(function(){n.getTokenBalance(),t&&t()})),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(1),console.log(e.t0);case 35:case"end":return e.stop()}}),e,null,[[1,32]])}))),n.getTokenBalance=Object(i.a)(c.a.mark((function e(){var t,a,o,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.defaultAccount,a=n.state,o=a.tokenList,r=a.tokenMap,s=[],o.map((function(e){s.push(e.tokenAddress)})),!t){e.next=8;break}return e.next=7,Object(T.k)(t,s,r);case 7:n.setState({});case 8:case"end":return e.stop()}}),e)}))),n.showModal=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.disabled){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n.props.pool.getTokensDataFromLocal(),e.next=6,n.setTokenList((function(){var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}},(function(){n.setState({modalVisible:!0,defaultStatus:1})}))}));case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("tokenModal err",e.t0),n.setState({modalVisible:!0}),n.getTokenBalance();case 13:case"end":return e.stop()}}),e,null,[[2,8]])}))),n.calcItem=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,o,r,s,l,i,d,p,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.localStorage.getItem("swapVersion"),o=n.props.pool.allExchanges,r=void 0===o?{}:o,s=N.a.contract.factory,l=N.a.sunContract.factory,i=r[0][t.tokenAddress]&&r[0][t.tokenAddress].e||null,d=r[1][t.tokenAddress]&&r[1][t.tokenAddress].e||null,i){e.next=22;break}return e.next=9,Object(T.l)(t.tokenAddress,s);case 9:if(!(p=e.sent)){e.next=21;break}if(t.addressV1=p,t.notCreatedV1=!1,"v1.0"!==a){e.next=19;break}return t.address=p,e.next=17,n.removeSolor(t);case 17:return e.next=19,n.addSolor(t);case 19:e.next=22;break;case 21:t.tokenAddress!==N.a.trxFakeAddress&&(t.notCreatedV1=!0);case 22:if(!t.addressV1||2!==t.cst){e.next=27;break}return e.next=25,Object(T.v)(t.addressV1);case 25:e.sent.gt(0)||t.tokenAddress===N.a.trxFakeAddress?t.notCreatedV1=!1:t.notCreatedV1=!0;case 27:if(d){e.next=43;break}return e.next=30,Object(T.l)(t.tokenAddress,l);case 30:if(!(u=e.sent)){e.next=42;break}if(t.addressV2=u,t.notCreatedV2=!1,"v1.5"!==a){e.next=40;break}return t.address=u,e.next=38,n.removeSolor(t);case 38:return e.next=40,n.addSolor(t);case 40:e.next=43;break;case 42:t.tokenAddress!==N.a.trxFakeAddress&&(t.notCreatedV2=!0);case 43:if(!t.addressV2||2!==t.cst){e.next=48;break}return e.next=46,Object(T.v)(t.addressV2);case 46:e.sent.gt(0)||t.tokenAddress===N.a.trxFakeAddress?t.notCreatedV2=!1:t.notCreatedV2=!0;case 48:return e.abrupt("return",t);case 49:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setTokenAddressCallback=function(){var e=n.state.selectSearchItem;n.setState({dealWarningVisible:!1}),n.props.onChange&&n.props.onChange(n.state.tokenMap[e.tokenAddress])},n.setTokenAddress=function(){var e=Object(i.a)(c.a.mark((function e(t,a,o){var r,s,l,i,d,p,u,m,k,f,b,v,g,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props.pool,s=r.exchanges,l=void 0===s?{}:s,i=r.allExchanges,d=void 0===i?{}:i,!t||!n.state.tokenMap[t]){e.next=8;break}if("swap"!==o||!Object.keys(N.a.deflationToken).includes(t)){e.next=5;break}return n.setState({dealWarningVisible:!0,callbacks:n.setTokenAddressCallback,selectSearchItem:{tokenAddress:t}}),e.abrupt("return");case 5:n.props.onChange&&n.props.onChange(n.state.tokenMap[t]),e.next=35;break;case 8:if(!Object(j.A)(t)||!a){e.next=22;break}return e.next=11,F.a.tokenBrief(t);case 11:if(!(p=e.sent).success){e.next=20;break}if(!(u=p.data).tokenAddr){e.next=20;break}return m={tokenAddress:t,address:l[u.tokenAddr]&&l[u.tokenAddr].e||null,addressV1:d[0][u.tokenAddr]&&d[0][u.tokenAddr].e||null,addressV2:d[1][u.tokenAddr]&&d[1][u.tokenAddr].e||null,tokenSymbol:u.tokenSymbol,tokenLogoUrl:u.tokenLogo,tokenName:u.tokenName,tokenDecimal:u.tokenDecimal,cst:1,balance:"-"},e.next=18,n.calcItem(m);case 18:k=e.sent,n.setState({tokenBrief:k,solorModalVisible:!0});case 20:e.next=35;break;case 22:if(!Object(j.A)(t)){e.next=35;break}return e.next=25,F.a.tokenBrief(t);case 25:if(!(f=e.sent).success){e.next=35;break}if(!(b=f.data).tokenAddr){e.next=35;break}return v=window.localStorage.getItem("swapVersion"),g={tokenAddress:t,address:b.exchangeAddr,addressV1:"v1.0"===v?b.exchangeAddr:null,addressV2:"v1.5"===v?b.exchangeAddr:null,tokenSymbol:b.tokenSymbol,tokenLogoUrl:b.tokenLogo,tokenName:b.tokenName,tokenDecimal:b.tokenDecimal,cst:1,balance:"-"},e.next=33,n.calcItem(g);case 33:h=e.sent,n.setState({tokenBrief:h,solorModalVisible:!0});case 35:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.onChange=function(){var e=Object(i.a)(c.a.mark((function e(t,a){var o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.stopPropagation(),t.tokenAddress!==n.props.value){e.next=3;break}return e.abrupt("return");case 3:if(!n.props.fromPool||t.tokenAddress!==N.a.trxFakeAddress){e.next=5;break}return e.abrupt("return");case 5:if(1!==(o=n.props.type)&&2!==o||!Object.keys(N.a.deflationToken).includes(t.tokenAddress)){e.next=9;break}return n.setState({modalVisible:!1,dealWarningVisible:!0,callbacks:n.selectSearchCallback,selectSearchItem:t}),e.abrupt("return");case 9:return e.next=11,n.calcItem(t);case 11:r=e.sent,n.setState({modalVisible:!1}),n.props.onChange&&n.props.onChange(r);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.selectSearchCallback=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.selectSearchItem,e.next=3,n.calcItem(t);case 3:a=e.sent,n.setState({dealWarningVisible:!1}),n.props.onChange&&n.props.onChange(a);case 6:case"end":return e.stop()}}),e)}))),n.hideModal=function(){1===n.state.defaultStatus?n.setState({modalVisible:!1,customTokenUriLeg:!0}):n.hideListModal()},n.onTokenStrChange=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,o,r,s,l,i,d,p,u,m,k,f,b,v,g,h=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=h.length>1&&void 0!==h[1]?h[1]:null,o=n.props.pool,r=o.exchanges,s=void 0===r?{}:r,l=o.allExchanges,i=void 0===l?{}:l,e.prev=2,d=t.target.value,p=n.state.allTokenList,u=[],m=n.state.tokenSort,!(d.length>1)){e.next=31;break}if(!Object(j.A)(d)){e.next=27;break}if(0!==(u=p.filter((function(e){return e.tokenAddress===d.trim()}))).length){e.next=25;break}return e.next=13,F.a.tokenBrief(d);case 13:if(!(k=e.sent).success){e.next=25;break}if(f=window.defaultAccount,b=k.data,v="-",!f){e.next=22;break}return e.next=21,Object(T.A)(f,[d],n.state.tokenMap);case 21:v=e.sent;case 22:g={tokenAddress:d,address:s[b.tokenAddr]&&s[b.tokenAddr].e||null,addressV1:i[0][b.tokenAddr]&&i[0][b.tokenAddr].e||null,addressV2:i[1][b.tokenAddr]&&i[1][b.tokenAddr].e||null,tokenSymbol:b.tokenSymbol,tokenLogoUrl:b.tokenLogo,tokenName:b.tokenName,tokenDecimal:b.tokenDecimal,cst:1,balance:"-"==v?"-":Object(j.n)(v,2)},u.push(g),p.push(g);case 25:e.next=29;break;case 27:u=p.filter((function(e){return e.tokenSymbol.toLowerCase().indexOf(d.toLowerCase())>-1&&1!==Number(e.cst)})),m&&(u=u.sort((function(e,t){var a=e.tokenSymbol.toLowerCase(),n=t.tokenSymbol.toLowerCase();return a<n?-1:a>n?1:0})));case 29:e.next=33;break;case 31:u=p.slice().filter((function(e){return 1!==Number(e.cst)})),m&&(u=u.sort((function(e,t){var a=e.tokenSymbol.toLowerCase(),n=t.tokenSymbol.toLowerCase();return a<n?-1:a>n?1:0})));case 33:n.setState({tokenStr:d,tokenList:u},(function(){a&&a(),n.getTokenBalance()})),e.next=39;break;case 36:e.prev=36,e.t0=e.catch(2),console.log("onTokenStrChange: ",e.t0);case 39:case"end":return e.stop()}}),e,null,[[2,36]])})));return function(t){return e.apply(this,arguments)}}(),n.clearStorage=function(){var e=N.a.localStorage;for(var t in e)window.localStorage.removeItem(e[t]);window.location.reload()},n.showListModal=function(){n.setState({defaultStatus:2})},n.hideListModal=function(){n.setState({defaultStatus:1})},n.selectTokenList=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.props.pool.selectedListUrl,n.props.pool.setData({selectedListUrl:t}),n.props.pool.setTokensDataIntoLocal(),e.next=6,n.setTokenList((function(){n.setState({defaultStatus:1});var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}})}));case 6:n.props.pool.handleNotifiction(),n.props.pool.setTokensDataIntoLocal(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),n.backTokensCategory=function(){n.setState({changeStatus:1})},n.onTokenUriChange=function(e){try{var t=e.target.value;n.setState({customTokenUri:t.trim(),errInfo:""})}catch(a){console.log(a)}},n.checkUrl=function(e){return e||(h.a.get("list.err1"),Object(s.a)("errInfo")),""},n.isListsOver=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>=N.a.maxLists},n.addCustomTokens=Object(i.a)(c.a.mark((function e(){var t,a,o,s,l,i,d,p,u,m,k;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=n.state.customTokenUri,a="",Object(j.B)(t)){e.next=7;break}return a=h.a.get("list.add_failed_tip"),n.setState({errInfo:a}),e.abrupt("return");case 7:if(o=n.props.pool.byUrl,!(s=void 0===o?{}:o)[t]||s[t].rs){e.next=12;break}return a=h.a.get("list.exists"),n.setState({errInfo:a}),e.abrupt("return");case 12:if(!n.isListsOver(s)){e.next=16;break}return a=h.a.getHTML("list.lists_over",{value:N.a.maxLists}),n.setState({errInfo:a}),e.abrupt("return");case 16:return e.next=18,F.a.getTokenListJson(t);case 18:if(l=e.sent,i=l.tokens,!((void 0===i?[]:i).length>N.a.maxTokens)){e.next=24;break}return a=h.a.getHTML("list.tokens_over",{value:N.a.maxTokens}),n.setState({errInfo:a}),e.abrupt("return");case 24:if(d=Object(j.Q)(l),p=d.key,u=void 0===p?"":p,m=d.valid,void 0!==m&&m){e.next=29;break}return a=h.a.get("list.add_err_tip",{value:u}),n.setState({errInfo:a}),e.abrupt("return");case 29:return n.props.pool.updateTokensData(t,Object(r.a)(Object(r.a)({},l),{},{uri:t,rs:0})),e.next=32,n.setTokenList((function(){n.setState({defaultStatus:1,customTokenUri:""});var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}})}));case 32:e.next=39;break;case 34:e.prev=34,e.t0=e.catch(0),k=h.a.get("list.add_failed_retry"),n.setState({errInfo:k}),console.log(e.t0);case 39:case"end":return e.stop()}}),e,null,[[0,34]])}))),n.updateList=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.uri,o=n.props.pool.byUrlNew,r=(void 0===o?{}:o)[a],Object(j.i)(r,Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.pool.updateByUrl(r);case 2:n.setState({});case 3:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.hideRemoveModal=function(){n.setState({removeId:"",removeModalVisible:!1,removeText:""})},n.showRemoveModal=function(e){try{n.setState({removeId:e.uri,removeModalVisible:!0})}catch(t){console.log(t)}},n.removeTokens=function(){try{var e=n.state,t=e.removeId,a=e.removeText;if(!t)return;if("REMOVE"!=a.trim())return;var o=n.props.pool.byUrl,r=(void 0===o?{}:o)[t],s=r.cst,l=void 0!==s&&s,c=r.uri,i=void 0===c?"":c;l?n.props.pool.deleteByUrlById(i):(r.rs=1,n.props.pool.updateByUrl(r)),n.hideRemoveModal()}catch(d){console.log(d)}},n.inputRemoveText=function(e){var t=e.target.value;n.setState({removeText:t})},n.addSolor=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n.props.pool.solor,o=void 0===a?[]:a,!(v.a.findIndex(o,(function(e){return e.tokenAddress===t.tokenAddress}))>=0)){e.next=5;break}return e.abrupt("return");case 5:return o.unshift(Object(r.a)(Object(r.a)({},t),{},{cst:2})),n.props.pool.setData({solor:o}),e.next=9,n.setTokenList((function(){var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}},(function(){n.getTokenBalance()}))}));case 9:window.localStorage.setItem("solor",JSON.stringify(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),n.removeSolor=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.tokenAddress!==n.props.value&&t.tokenAddress!==n.props.switchValue){e.next=3;break}return e.abrupt("return");case 3:return a=n.props.pool.solor,o=void 0===a?[]:a,r=t.tokenAddress,v.a.remove(o,(function(e){return e.tokenAddress===r})),n.props.pool.setData({solor:o}),e.next=9,n.setTokenList((function(){var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}},(function(){n.getTokenBalance()}))}));case 9:window.localStorage.setItem("solor",JSON.stringify(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),n.getKeys=function(e){try{return Object.keys(e).sort((function(t,a){return e[t].name>e[a].name?1:-1}))}catch(t){return[]}},n.tokenSortByAsCII=function(e){try{var t=n.state.tokenList;if(e=!e){var a=t.sort((function(e,t){var a=e.tokenSymbol.toLowerCase(),n=t.tokenSymbol.toLowerCase();return a<n?-1:a>n?1:0})),o=v.a.findIndex(a,(function(e){return e.tokenAddress===N.a.trxFakeAddress}));if(o>=0){var r=a.splice(o,1);a.unshift(r[0])}n.setState({tokenList:a})}else n.setTokenList((function(){var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}},(function(){n.getTokenBalance()}))}));n.setState({tokenSort:e})}catch(s){console.log(s)}},n.comfirmContinue=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=n.state,a=t.tokenBrief,t.checkStatus){e.next=4;break}return e.abrupt("return");case 4:if(!Object.keys(N.a.deflationToken).includes(a.tokenAddress)){e.next=7;break}return n.setState({solorModalVisible:!1,dealWarningVisible:!0,callbacks:n.dealWarningCallback}),e.abrupt("return");case 7:return e.next=9,n.addSolor(a);case 9:n.setState({solorModalVisible:!1}),n.props.onChange&&n.props.onChange(a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),n.setState({dealWarningVisible:!1,solorModalVisible:!1});case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),n.dealWarningCallback=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({dealWarningVisible:!1}),t=n.state.tokenBrief,e.next=5,n.addSolor(t);case 5:n.setState({solorModalVisible:!1}),n.props.onChange&&n.props.onChange(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),n.setState({dealWarningVisible:!1,solorModalVisible:!1});case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),n.changeCheckStatus=function(e){n.setState({checkStatus:e.target.checked})},n.renderSelectedList=function(e,t,a,o,r){var s=n.state,l=s.tokenSort,c=s.tokenMap;return e&&t&&e[t]?f.a.createElement(f.a.Fragment,null,f.a.createElement("input",{className:"select-search",type:"text",placeholder:h.a.get("tokens.select_placeholder_text"),value:a,onChange:n.onTokenStrChange}),f.a.createElement("div",{className:"title flexB"},f.a.createElement("span",{className:"text"},h.a.get("tokens.select_tokenName_title")),f.a.createElement("span",{className:"sort "+(l?"active":""),onClick:function(){return n.tokenSortByAsCII(l)}})),f.a.createElement("div",{className:"itemList"},0===r.length?f.a.createElement("div",{className:"no-token-fund"},h.a.get("tokens.loading_tokens")):o.length?o.map((function(e,t){return f.a.createElement("div",{className:"flex item "+(e.tokenAddress===n.props.value||e.tokenAddress===n.props.switchValue?"opac":""),key:e.tokenAddress+t,onClick:function(t){return n.onChange(e,t)}},f.a.createElement("div",{className:"a-center"},f.a.createElement("img",{src:e.tokenLogoUrl,alt:"",onError:function(e){e.target.onerror=null,e.target.src=L.a}}),f.a.createElement("div",{className:"searchRes left"},f.a.createElement("span",{className:"item-content"},e.tokenSymbol,n.props.fromPool?"":n.props.asInput?e.tokenAddress===n.props.value&&" (".concat(h.a.get("tokens.selected_as_input"),")")||e.tokenAddress===n.props.switchValue&&" (".concat(h.a.get("tokens.selected_as_output"),")"):e.tokenAddress===n.props.value&&" (".concat(h.a.get("tokens.selected_as_output"),")")||e.tokenAddress===n.props.switchValue&&" (".concat(h.a.get("tokens.selected_as_input"),")")),1===e.cst&&f.a.createElement("div",{className:"item-content solor-detail"},f.a.createElement("span",null,h.a.get("list.search_by_addr")),f.a.createElement("span",{className:"ib",onClick:function(t){t.stopPropagation(),n.addSolor(e)}},"(",h.a.get("list.add"),")")),2===e.cst&&f.a.createElement("div",{className:"item-content solor-detail"},f.a.createElement("span",null,h.a.get("list.add_by_user")),f.a.createElement("span",{className:"solor-remove ib",onClick:function(t){t.stopPropagation(),n.removeSolor(e)}},"(",h.a.get("list.remove_token"),")")))),e.tokenAddress===N.a.trxFakeAddress?f.a.createElement("div",null,f.a.createElement("p",null,Object(j.o)(c[e.tokenAddress]?c[e.tokenAddress].balance:e.balance))):f.a.createElement("div",{className:"inline-flex balanceAndAddr"},f.a.createElement("p",null,c[e.tokenAddress]&&!isNaN(c[e.tokenAddress].balance)?Object(j.o)(c[e.tokenAddress].balance):"--"),f.a.createElement("p",null,Object(S.a)(window.navigator).any?Object(j.l)(e.tokenAddress,4,4):Object(j.l)(e.tokenAddress,8,10))))})):f.a.createElement("div",{className:"no-token-fund"},h.a.getHTML("list.no_token_found"))),f.a.createElement("div",{className:"list-switch flexB"},f.a.createElement("div",{className:"list-switch-name"},f.a.createElement("img",{src:e[t].logoURI,alt:""}),f.a.createElement("span",null,e[t].name||"")),f.a.createElement("button",{className:"list-switch-btn",onClick:function(){return n.showListModal()}},h.a.get("list.switch")))):f.a.createElement(f.a.Fragment,null)},n.renderUpdateListItem=function(e){var t=n.props.pool.byUrlNew,a=void 0===t?{}:t,o=e.version,r=void 0===o?{}:o,s=a[e.uri]||{},l=s.version||{},c=Object(j.h)(r,l),i=Object(j.g)(e,s).success,d=void 0!==i&&i;return!v.a.isEqual(s,{})&&c&&d&&f.a.createElement(E.a.Item,{onClick:function(){n.updateList(e)}},h.a.get("list.update"))},n.adjustAndroid=function(e){var t=Object(j.e)(e);n.setState({adjust:t})},n.renderTokensCategory=function(){var e=n.state,t=e.customTokenUri,a=e.lang,o=e.errInfo,r=n.props.pool,s=r.byUrl,l=r.selectedListUrl,c=n.getKeys(s);return f.a.createElement(f.a.Fragment,null,f.a.createElement("ul",{className:"list-list"},s&&c.length&&c.map((function(e){var t=s[e];return!t.rs&&f.a.createElement("li",{key:t.name+"_"+e,className:"flex"},f.a.createElement("div",{className:"drop-parent flexB w-80"},f.a.createElement("div",{className:"left flex"},f.a.createElement("img",{src:t.logoURI,alt:"",className:"logo"}),f.a.createElement("div",null,f.a.createElement("div",{className:"name"},t.name),f.a.createElement("div",{className:"source"},Object(j.r)(t.uri)))),f.a.createElement(w.a,{trigger:"click",placement:"bottomRight",overlay:f.a.createElement(E.a,null,f.a.createElement(E.a.ItemGroup,{title:f.a.createElement("div",null,f.a.createElement("span",{className:"key"},h.a.get("list.version")),f.a.createElement("span",{className:"value"},Object(j.z)(t.version)))},f.a.createElement(E.a.Item,null," ",f.a.createElement("a",{href:"".concat(N.a.justList,"?lang=").concat(a,"#/detail?uri=").concat(t.uri),target:t.uri||"_blank"},h.a.get("list.view"))),n.renderUpdateListItem(t),t.uri!==l&&f.a.createElement(E.a.Item,{onClick:function(){n.showRemoveModal(t)}},h.a.get("list.remove"))))},f.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}}))),f.a.createElement("div",{className:"right"},f.a.createElement("button",{className:String(l)===String(t.uri)?"selected":"",onClick:function(){return n.selectTokenList(e)}},String(l)===String(t.uri)?h.a.get("list.selected"):h.a.get("list.select"))))})),f.a.createElement("div",{className:"list-more"},f.a.createElement("a",{href:"en-US"===a?N.a.moreList.en:N.a.moreList.zh,target:"_blank"},h.a.get("more.more")))),f.a.createElement("div",{className:"list-add"},f.a.createElement("div",{className:"list-input-line flex"},f.a.createElement(y.a,{type:"text",className:"list-input w-80",placeholder:"https://",value:t,onChange:n.onTokenUriChange,onFocus:function(){return n.adjustAndroid(!0)},onBlur:function(){return n.adjustAndroid(!1)}}),f.a.createElement("div",{className:"right"},f.a.createElement("button",{onClick:n.addCustomTokens,disabled:!t.trim()},h.a.get("list.add_list"))))),!!o&&f.a.createElement("div",{className:"list-add-errTip"},f.a.createElement("span",{className:"icon"},"!"),f.a.createElement("span",{className:"text"},o)),f.a.createElement("div",{className:"list-footer"},f.a.createElement("a",{href:"".concat(N.a.justList,"?lang=").concat(a,"#/home"),className:"link",target:"justList"},h.a.get("list.view_list_home"))))},n.hideSolorModal=function(){n.setState({solorModalVisible:!1})},n.state={lang:window.localStorage.getItem("lang")||h.a.options.currentLocale,modalVisible:!1,tokenStr:"",allTokenList:[],tokenList:[],tokenMap:Object(o.a)({},N.a.trxFakeAddress,{tokenAddress:N.a.trxFakeAddress,address:"",addressV1:"",addressV2:"",tokenSymbol:"TRX",tokenLogoUrl:D.a,tokenName:"TRX",tokenDecimal:N.a.trxDecimal,removeText:""}),defaultStatus:1,removeModalVisible:!1,removeText:"",removeId:"",solor:JSON.parse(window.localStorage.getItem("solor")||"[]"),customTokenUri:"",customTokenUriLeg:!0,errInfo:"",tokenSort:!1,solorModalVisible:!1,tokenBrief:{},checkStatus:!1,dealWarningVisible:!1,selectSearchItem:""},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.tokenList,n=(t.tokenMap,t.tokenStr),o=t.allTokenList,r=t.defaultStatus,s=t.removeText,l=t.removeModalVisible,c=t.adjust,i=t.solorModalVisible,d=t.tokenBrief,p=t.checkStatus,u=t.dealWarningVisible,m=t.callbacks,k=t.selectSearchItem,b=this.props,v=b.value,g=b.tokenInfo,S=this.props.pool,x=S.byUrl,E=S.selectedListUrl;return f.a.createElement(f.a.Fragment,null,f.a.createElement("p",{className:"dragDown "+(this.props.disabled?"no-bg":""),onClick:this.showModal},v&&g?f.a.createElement(f.a.Fragment,null,f.a.createElement("img",{src:g.tokenLogoUrl||L.a,alt:"",onError:function(e){e.target.onerror=null,e.target.src=L.a}}),f.a.createElement("span",null,g.tokenSymbol)):h.a.get("tokens.add_choose_select")),this.props.disabled?null:f.a.createElement(O.a,{title:1===r?f.a.createElement(C.a,{tip:h.a.get("tokens.add_choose_select_tip"),toolClass:"select-ib left"},f.a.createElement("span",{className:"add-title"},h.a.get("tokens.add_choose_select"))):f.a.createElement("div",{className:"list-modal-header"},f.a.createElement("img",{src:M.a,alt:"",onClick:function(){return e.hideListModal()}}),f.a.createElement("span",{className:"add-title"},h.a.get("list.select_list"))),closable:!0,visible:this.state.modalVisible,onCancel:this.hideModal,className:"select-modal "+(1===r?"":"list-modal "+(c?"adjust":"")),footer:null,style:{marginLeft:Object(j.t)()},width:630,centered:!0},1===r?this.renderSelectedList(x,E,n,a,o):this.renderTokensCategory()),f.a.createElement(O.a,{title:"",closable:!1,visible:l,footer:null,style:{marginLeft:Object(j.C)()},width:420,className:"list-remove-modal"},f.a.createElement("div",{className:"title"},h.a.get("list.remove_confirm")),f.a.createElement("div",{className:"tips"},h.a.get("list.remove_confirm_tip")),f.a.createElement("input",{type:"text",className:"list-input w-80",value:s,onChange:this.inputRemoveText}),f.a.createElement("div",{className:"btns"},f.a.createElement("button",{onClick:this.removeTokens,disabled:"REMOVE"!==s.trim()},h.a.get("list.confirm")),f.a.createElement("button",{onClick:this.hideRemoveModal},h.a.get("list.cancel")))),f.a.createElement(O.a,{title:h.a.get("list.add_token"),closable:!1,visible:i,footer:null,style:{marginLeft:Object(j.C)(500)},width:525,className:"list-addtoken-modal",centered:!0},f.a.createElement("div",{className:"solor-modal-body"},f.a.createElement("div",{className:"tips"},f.a.createElement("div",{className:"tips1"},h.a.get("list.add_token_tip1")),f.a.createElement("div",{className:"tips1"},h.a.get("list.add_token_tip2")),f.a.createElement("div",{className:"tips1"},h.a.get("list.add_token_tip3"))),f.a.createElement("div",{className:"token-info flex"},f.a.createElement("div",{className:"logo"},f.a.createElement("img",{src:d.tokenLogoUrl?d.tokenLogoUrl:L.a})),f.a.createElement("div",{className:"info"},f.a.createElement("div",{className:"symbol"},d.tokenName,"(",d.tokenSymbol,")"),f.a.createElement("div",{className:"addr"},f.a.createElement("span",null,d.tokenAddress),f.a.createElement("span",{className:"pointer",title:d.tokenAddress,id:"copySpan",onClick:function(e){Object(j.k)(e,"5px","copySpan")}},f.a.createElement(_.a,null))))),f.a.createElement("div",{className:"check-box"+(p?" checked":"")},f.a.createElement(A.a,{onChange:this.changeCheckStatus},h.a.get("list.add_token_tip4"))),f.a.createElement("div",{className:"btns"},f.a.createElement("button",{onClick:this.comfirmContinue,className:p?"button-active":""},h.a.get("list.continue"))))),u&&f.a.createElement(R.a,{visible:u,cb:m,dealWarningSymbol:d.tokenAddress||k.tokenAddress}))}}]),a}(f.a.Component))||n;t.a=P},1450:function(e,t,a){"use strict";var n,o=a(60),r=a(17),s=a(0),l=a.n(s),c=a(3),i=a(6),d=a(7),p=a(11),u=a(12),m=a(1),k=a.n(m),f=a(29),b=a.n(f),v=a(159),g=a(202),h=a(800),S=a(13),x=a(1432),E=a(243),w=a(908),y=a(1078),O=a(980),A=a(1391),N=(a(89),a(8)),T=a(59),_=(a(976),a(382)),j=a.n(_),C=a(1416),V=a.n(C),L=a(238),I=a.n(L),D=a(244),B=a.n(D),M=a(981),F=a.n(M),R=Object(g.b)("network")(n=Object(g.b)("pool")(n=Object(g.c)(n=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.props.pool.setData({addRef:n.toTokenRef}),t=setInterval((function(){n.props.network.isConnected&&(n.timer=setInterval((function(){n.selectedToken(n.props.pool.tokenInfo,!0)}),6e3),n.selectedToken(n.props.pool.tokenInfo,!1),clearInterval(t))}),1e3),n.getTokenBalance(),a=Object(v.a)(window.navigator).apple.device,n.setState({appleDevice:a}),e.next=8,n.toTokenRef.current.setTokenList();case 8:n.toTokenRef.current.setTokenAddress(n.props.pool.tokenInfo.tokenAddress),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])}))),n.componentWillUnmount=function(){clearInterval(n.timer)},n.initInputData=function(){n.setState({tokenOneValueStr:"",tokenTwoValueStr:"",tokenOneValue:new N.a(0),tokenTwoValue:new N.a(0),versionChanged:!0},(function(){n.selectedToken(n.props.pool.tokenInfo)}))},n.getTokenBalance=Object(c.a)(l.a.mark((function e(){var t,a,o,r,s,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.network.isConnected){e.next=15;break}return t=n.props.pool.tokenInfo,a=n.props.network.defaultAccount,o=n.state.fromToken,e.next=6,Object(T.i)(a,[o.tokenAddress]);case 6:if(r=e.sent,(s=r[0].div(new N.a(10).pow(o.tokenDecimal))).eq(n.state.fromBalance)||n.setState({fromBalance:s,fromBalanceStr:s._toFixed(6,1)},(function(){n.calcEh()})),!t.tokenAddress){e.next=15;break}return e.next=12,Object(T.i)(a,[t.tokenAddress]);case 12:c=e.sent,i=c[0].div(new N.a(10).pow(t.tokenDecimal)),isNaN(i.toNumber())||i.eq(n.state.toBalance)||n.setState({toBalance:i,toBalanceStr:i._toFixed(6,1)},(function(){n.calcEh()}));case 15:case"end":return e.stop()}}),e)}))),n.setInsufficient=function(e,t,a){e<=t?n.setState({insufficientBalance:""}):n.setState({insufficientBalance:a})},n.calcEh=function(){var e=n.props.pool,t=e.tokenInfo,a=e.tokenDetail,o=e.selectTokenOne,r=e.tokenTwoFixed,s=n.state,l=s.fromBalance,c=s.toBalance,i=s.noPoolBalance,d=Object(N.L)(document.querySelector(".token-sec-input-1").value),p=Object(N.L)(document.querySelector(".token-sec-input-2").value);if(d.gt(l)||d.lt(S.a.firstTRXLimit)&&0!==i&&!r?n.setState({insufficientBalance:o.tokenSymbol}):p.gt(c)||isNaN(c.toNumber())?n.setState({insufficientBalance:t.tokenSymbol}):n.setState({insufficientBalance:""}),d.gt(0)&&a.exTrx.gt(0)){var u=a.exTrx;n.setState({calcStatus:!0,shareOfPool:d.div(d.plus(u)).times(100)},(function(){}))}else"--"===a.price1&&d.toNumber()>0&&p.toNumber()>0?n.setState({calcStatus:!0,shareOfPool:new N.a(100)}):n.setState({calcStatus:!1,shareOfPool:new N.a(0)})},n.setInputValue=function(e,t,a){var o;o=t?{num:new N.a(t.num),str:t.str,baseTwo:!1}:{num:new N.a(-1),str:"",baseTwo:!0};var r=n.props.pool,s=r.tokenInfo,l=r.tokenDetail,c=n.state,i=c.tokenTwoValue,d=c.tokenOneValue;c.needCreate;if(s.tokenAddress&&""!==s.tokenAddress&&"--"!==l.price1){if(2===e){var p=i;o.num.eq(-1)||(p=o.num);var u=p.times(l.price1)._toFixed(S.a.trxDecimal,1),m=n.state.fromBalance;Object(N.L)(u).gt(m)&&a?n.setMaxFrom("TRX"):n.setState({tokenTwoValue:p,tokenTwoValueStr:Object(N.c)(o.str||i.toString()),tokenOneValue:Object(N.L)(u),tokenOneValueStr:Object(N.c)(u)},(function(){n.calcEh()}))}else if(1===e){var k=d;o.num.eq(-1)||(k=o.num);var f=k.div(l.price1),b="";f.gt(0)&&(b=f._toFixed(Number(s.tokenDecimal),1));var v=o.str||d.toString(),g=n.state.toBalance;Object(N.L)(b).gt(g)&&a?n.setMaxFrom("token"):n.setState({tokenOneValue:k,tokenOneValueStr:Object(N.c)(v),tokenTwoValue:Object(N.L)(b),tokenTwoValueStr:Object(N.c)(b)},(function(){n.calcEh()}))}}else 1===e&&n.setState({tokenOneValue:o.num,tokenOneValueStr:Object(N.c)(o.str)},(function(){n.calcEh()})),2===e&&n.setState({tokenTwoValue:o.num,tokenTwoValueStr:Object(N.c)(o.str)},(function(){n.calcEh()}))},n.initTokenDetail=function(e){n.props.pool.setData({tokenDetail:{trx:new N.a(0),value:new N.a(0),tokens:new N.a(0),price1:"--",price2:"--",exTrx:new N.a(0),totalSupply:new N.a(0)}}),"createdNoBalance"!==e&&n.setState({createTxt:b.a.get("pool.create_pair_btn"),createState:"",approveTxt:b.a.get("pool.add_approve_btn"),approveState:"",supplyTxt:b.a.get("pool.add_supply_btn"),supplyState:""})},n.selectedToken=function(){var e=Object(c.a)(l.a.mark((function e(t){var a,o,s,c,i,d,p,u,m,k,f,b,v,g,h,x,E,w,y,O,A,_,j,C,V=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=V.length>1&&void 0!==V[1]&&V[1],t.tokenAddress){e.next=3;break}return e.abrupt("return");case 3:if(o=Object(r.a)({},t),s=n.state,c=s.fromOrTo,i=s.tokenOneValue,d=s.tokenOneValueStr,p=s.tokenTwoValue,u=s.tokenTwoValueStr,a||(c=0,i=new N.a(0),p=new N.a(0),d="",u="",n.setState({tokenOneValueStr:d,tokenTwoValueStr:u,tokenOneValue:i,tokenTwoValue:p,fromOrTo:0,calcStatus:!1}),n.props.pool.setData({tokenInfo:Object(r.a)(Object(r.a)({},o),{},{address:""})})),1!==c||n.state.versionChanged){e.next=11;break}if(i.gt(0)){e.next=9;break}return e.abrupt("return");case 9:e.next=14;break;case 11:if(2!==c||n.state.versionChanged){e.next=14;break}if(p.gt(0)){e.next=14;break}return e.abrupt("return");case 14:if(n.props.network.isConnected){e.next=16;break}return e.abrupt("return");case 16:return m=n.props.network.defaultAccount,e.next=19,Object(T.m)(m,o.tokenAddress);case 19:k=e.sent,f=k.exchangeAddr,b=k.allowance,v=k.exTokenBalance,g=k.exTrxBalance,h=k.totalLiquidity,x=k.userLiquidity,E=k.userTrxBalance,w=k.userTokenBalance,y=k.success,a||n.props.pool.setData({tokenInfo:Object(r.a)(Object(r.a)({},o),{},{address:f})}),y?f?(n.setState({networkError:!1}),a?(O=!0,n.state.approvedAmount.gte(n.state.tokenTwoValue)&&(O=!1),n.setState({poolIsExist:0,needApprove:O})):(n.setState({poolIsExist:0,noPoolBalance:0,needCreate:!1}),n.setState({poolIsExist:0,approvedAmount:b.div(new N.a(10).pow(o.tokenDecimal))})),A="--",_="--",h.gt(0)?(j=g.div(new N.a(10).pow(S.a.trxDecimal)),C=v.div(new N.a(10).pow(o.tokenDecimal)),A=j.div(C),_=C.div(j),a&&n.setInputValue(n.state.fromOrTo),(n.props.pool.tokenInfo.address===f||n.state.versionChanged)&&(n.setState({noPoolBalance:0}),n.props.pool.setData({tokenDetail:{trx:new N.a(E).div(new N.a(10).pow(S.a.trxDecimal)),value:new N.a(w).div(new N.a(10).pow(o.tokenDecimal)),tokens:new N.a(x).div(new N.a(10).pow(S.a.trxDecimal)),totalSupply:new N.a(h).div(new N.a(10).pow(S.a.trxDecimal)),price1:A,price2:_,exTrx:j,exToken:C}}))):(n.setState({noPoolBalance:1}),a||n.initTokenDetail("createdNoBalance"))):(n.setState({networkError:!1}),n.setState({poolIsExist:1,noPoolBalance:-1,needCreate:!0}),a||n.initTokenDetail()):n.setState({networkError:!0}),n.getTokenBalance();case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.judgeIssues=function(){var e=Object(c.a)(l.a.mark((function e(t,a,o){var r,s,c,i,d,p,u,m,k,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.fromOrTo=a,r=n.state.fromBalanceStr,s=n.props.pool,c=s.selectTokenOne,i=s.tokenInfo,d={},!t){e.next=15;break}if(p=6,p=1===a?6:i.tokenDecimal,u=Object(N.D)((""+t).replace(/,/g,""),p),m=u.valid,k=u.str,!m){e.next=14;break}t=k,d.num=k,d.str=t,e.next=15;break;case 14:return e.abrupt("return");case 15:f=r,""!==t?""===i.tokenSymbol?(1===a&&(n.setState({tokenTwoValue:new N.a(0),tokenOneValue:new N.a(d.num),tokenOneValueStr:Object(N.c)(t),tokenTwoValueStr:""}),n.setInsufficient(d.num,f,c.tokenSymbol)),2===a&&n.setState({tokenOneValue:new N.a(0),tokenTwoValue:new N.a(d.num),tokenTwoValueStr:Object(N.c)(t),tokenOneValueStr:""})):(1===a&&n.setState({tokenOneValue:new N.a(d.num),tokenOneValueStr:Object(N.c)(t)}),2===a&&n.setState({tokenTwoValue:new N.a(d.num),tokenTwoValueStr:Object(N.c)(t)}),n.setInputValue(a,d,o)):(n.setState({calcStatus:!1,shareOfPool:new N.a(0)}),n.setState({tokenTwoValue:new N.a(0),tokenOneValue:new N.a(0),tokenOneValueStr:"",tokenTwoValueStr:""}));case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.setMaxFrom=function(e){var t=n.state,a=t.fromBalance,o=t.toBalance,r=t.poolIsExist,s=t.noPoolBalance,l=(t.needCreate,n.props.pool.tokenInfo),c=a;c.gt(0)&&o.gt(0)||(c=Object(N.a)(0),o=Object(N.a)(0)),"TRX"===e?((1!==r&&1!==s||""===l.tokenAddress)&&n.setState({tokenTwoValue:o,tokenTwoValueStr:Object(N.c)(o.toString())}),n.setState({tokenOneValue:c,tokenOneValueStr:Object(N.c)(c.toString())},(function(){n.calcEh()})),o.gt(0)&&n.judgeIssues(c,1,!0)):"token"===e&&((1!==r&&1!==s||""===l.tokenAddress)&&n.setState({tokenOneValue:c,tokenOneValueStr:Object(N.c)(c.toString())}),n.setState({tokenTwoValue:o,tokenTwoValueStr:Object(N.c)(o.toString())},(function(){n.calcEh()})),o.gt(0)&&n.judgeIssues(o,2,!0))},n.exchangeInfo=function(){var e=n.state,t=e.poolIsExist,a=e.shareOfPool,o=e.noPoolBalance,r=e.tokenOneValue,s=e.tokenTwoValue,l=n.props.pool,c=l.tokenInfo,i=l.tokenDetail,d="--",p="--";"--"!==i.price1&&(d=i.price1._toFixed(4,1)),"--"!==i.price2&&(p=i.price2._toFixed(4,1)),s.gt(0)&&r.gt(0)&&(1===t||1===o)&&(d=r.div(s),p=s.div(r));var u="--",m="--";u="--"===d?d:Object(N.a)(d).lt(1e-4)?"< 0.0001":Object(N.a)(d)._toFixed(4,1),m="--"===p?m:Object(N.a)(p).lt(1e-4)?"< 0.0001":Object(N.a)(p)._toFixed(4,1);var f=a._toFixed(2,1);return isNaN(f)?f="--":a.gt(0)&&a.lt(.01)&&(f="<0.01"),k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"flex justify-content price-chart-wrap align-items-center",style:{paddingBottom:0,paddingTop:"20px"}},k.a.createElement("div",{className:"token-pairs"},k.a.createElement("div",null,b.a.get("swap.detail_token_info")," "),k.a.createElement("div",null,k.a.createElement(k.a.Fragment,null,Object(N.O)(k.a.createElement(k.a.Fragment,null,k.a.createElement("img",{src:c.tokenLogoUrl?c.tokenLogoUrl:I.a,alt:"logo",onError:function(e){e.target.onerror=null,e.target.src=I.a}}),k.a.createElement("span",null,c.tokenSymbol)),c.tokenAddress)))),k.a.createElement(A.a,{token:c.tokenSymbol,token_adddress:c.tokenAddress})),k.a.createElement("div",null,k.a.createElement("div",{className:"action-info"},k.a.createElement("div",{className:"info-title"},1===t||1===o?b.a.get("pool.create_initial_title"):b.a.get("pool.add_price_title")),k.a.createElement("div",{className:"info-detail flex"},k.a.createElement("div",{className:"left"},k.a.createElement("p",null,b.a.get("pool.add_unit_text",{toToken:c.tokenSymbol?c.tokenSymbol:"--",fromToken:"TRX"})),k.a.createElement("p",null,u)),k.a.createElement("div",{className:"left"},k.a.createElement("p",null,b.a.get("pool.add_unit_text",{toToken:"TRX",fromToken:c.tokenSymbol?c.tokenSymbol:"--"})),k.a.createElement("p",null,m)),k.a.createElement("div",{className:"right"},k.a.createElement("p",null,b.a.get("pool.add_share_text")),k.a.createElement("p",null,f,"%")))),1===t||1===o?null:k.a.createElement("div",{className:"action-info"},k.a.createElement("div",{className:"info-title flex between"},k.a.createElement("span",null,b.a.get("pool.base_posi_title")),k.a.createElement("p",{className:"yourPosi"},k.a.createElement("img",{src:B.a,alt:""}),k.a.createElement("img",{src:c.tokenLogoUrl||I.a,onError:function(e){e.target.onerror=null,e.target.src=I.a},alt:""}),k.a.createElement("span",null,"TRX"),k.a.createElement("span",{className:"symbol"},"/"),k.a.createElement("span",null,c.tokenSymbol?c.tokenSymbol:"--"))),k.a.createElement("div",{className:"info-detail flex"},k.a.createElement("div",{className:"left"},k.a.createElement("p",null,"TRX"),k.a.createElement("p",null,i.trx.lt(1e-4)&&i.trx.gt(0)?"<0.0001":i.trx._toFixed(4,1))),k.a.createElement("div",{className:"left"},k.a.createElement("p",null,c.tokenSymbol?c.tokenSymbol:"--"),k.a.createElement("p",null,i.value.lt(1e-4)&&i.value.gt(0)?"<0.0001":i.value._toFixed(4,1))),k.a.createElement("div",{className:"right"},k.a.createElement("p",null,b.a.get("pool.add_tokens_text")),k.a.createElement("p",null,i.tokens.lt(1e-4)&&i.tokens.gt(0)?"<0.0001":i.tokens._toFixed(4,1)))))))},n.showSettingModal=function(){n.props.network.setData({settingVisible:!0})},n.setLiq=function(e){n.props.pool.setData({actionLiqV2:e})},n.retryGetExchange=function(){var e=Object(c.a)(l.a.mark((function e(t){var a,o,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=r.length>1&&void 0!==r[1]?r[1]:0)>10)){e.next=3;break}return e.abrupt("return","");case 3:return e.next=5,Object(T.l)(t);case 5:if(!(o=e.sent)){e.next=10;break}return e.abrupt("return",o);case 10:return e.next=12,new Promise((function(e){setTimeout((function(){e()}),1e3)}));case 12:return e.abrupt("return",n.retryGetExchange(t,a+1));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createPair=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.pool.tokenInfo,a={title:"pair_actions.create",obj:{trx:"TRX",tokenSymbol:t.tokenSymbol}},e.next=4,Object(T.h)(t.tokenAddress,a);case 4:e.sent?n.setState({createActionState:"pending",actionInfo:b.a.get("action.doingBtn"),actionDisabled:!0,actionStarted:!0},(function(){setTimeout(Object(c.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.retryGetExchange(t.tokenAddress);case 2:(a=e.sent)?(n.props.pool.setData({tokenInfo:Object(r.a)(Object(r.a)({},t),{},{address:a})}),n.setState({createActionState:"success",approveActionState:"start"},(function(){n.setApprove()}))):n.setState({createActionState:"failed",actionRetry:"createPair",actionInfo:b.a.get("action.retryBtn"),actionDisabled:!1});case 4:case"end":return e.stop()}}),e)}))),5e3)})):n.setState({createActionState:"error",actionRetry:"createPair",actionInfo:b.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0});case 6:case"end":return e.stop()}}),e)}))),n.setApprove=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.pool.tokenInfo,a={title:"pool.add_approve_token",obj:{token:t.tokenSymbol}},e.next=4,Object(T.e)(t.tokenAddress,t.address,a);case 4:e.sent?n.setState({approveActionState:"pending",actionInfo:b.a.get("action.doingBtn"),actionDisabled:!0,actionStarted:!0},(function(){setTimeout((function(){n.setState({approveActionState:"success",actionState:"info"})}),5e3)})):n.setState({approveActionState:"error",actionRetry:"setApprove",actionInfo:b.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0});case 6:case"end":return e.stop()}}),e)}))),n.beforeSupplyLiquidity=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({actionStarted:!0,supplyPopBtn:b.a.get("action.startBtn"),supplyPopBtnDisabled:!0},(function(){n.supplyLiquidity()}));case 1:case"end":return e.stop()}}),e)}))),n.supplyLiquidity=Object(c.a)(l.a.mark((function e(){var t,a,o,r,s,i,d,p,u,m,k,f,v,g,h,x,E;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.tokenOneValue,o=t.tokenTwoValue,r=t.needApprove,s=n.props.pool,i=s.tokenInfo,d=s.tokenDetail,p=n.props.network.settingSlippage,p=Number(p),k=a.times(1e6),f=o.times(new N.a(10).pow(i.tokenDecimal)),d.exTrx.eq(0)?(u=k,m=f):(u="0x".concat(a.times(d.totalSupply).div(d.exTrx).times(1-p/100).times(new N.a(10).pow(S.a.trxDecimal)).integerValue(N.a.ROUND_DOWN).toString(16)),m="0x".concat(a.times(d.exToken).div(d.exTrx).times(1+p/100).times(new N.a(10).pow(i.tokenDecimal)).integerValue(N.a.ROUND_DOWN).toString(16))),v={title:"pair_actions.add",obj:{trxAmount:Object(N.n)(a.toString(),6),trx:"TRX",tokenAmount:Object(N.n)(o.toString(),d.tokenDecimal),tokenSymbol:i.tokenSymbol}},g=n.state.tokenOneValueStr,h=n.state.tokenTwoValueStr,e.t0=T.b,e.t1=i.address,e.t2=u.toString(),e.t3=m.toString(),e.next=16,Object(T.g)(n.props.network.settingDeadline);case 16:return e.t4=e.sent,e.t5=k.toString(),e.t6=v,e.next=21,(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5,e.t6);case 21:e.sent?(x={supplyErrorInfo:"",supplyPopBtn:b.a.get("action.doingBtn"),supplyPopBtnDisabled:!0,actionStarted:!0},r&&(x={actionInfo:b.a.get("action.doingBtn"),actionDisabled:!0,supplyActionState:"pending",actionState:"line",actionStarted:!0}),n.setState(x,(function(){setTimeout(Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({tokenOneValue:new N.a(0),tokenOneValueStr:"",tokenTwoValue:new N.a(0),tokenTwoValueStr:"",successOneValueStr:g,successTwoValueStr:h,actionRetry:"",actionState:"success",actionStarted:!1});case 1:case"end":return e.stop()}}),e)}))),5e3)}))):(E={supplyErrorInfo:b.a.get("action.supplyActErr"),supplyPopBtn:b.a.get("action.retryBtn"),supplyPopBtnDisabled:!1,actionStarted:!0},r&&(E={actionState:"line",supplyActionState:"error",actionRetry:"supplyLiquidity",actionInfo:b.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0}),n.setState(E));case 23:case"end":return e.stop()}}),e)}))),n.initAddModal=function(){var e=n.props.pool.tokenInfo,t=!0;return n.state.approvedAmount.gte(n.state.tokenTwoValue)&&(t=!1),{needApprove:t,supplyPopBtn:b.a.get("pool.popup_supply_btn"),supplyPopBtnDisabled:!1,supplyErrorInfo:"",createActionTitle:b.a.get("action.createAct",{token:e.tokenSymbol}),createActionError:b.a.get("action.createActErr"),createActionFailed:b.a.get("action.createActFailed"),createActionState:"",approveActionTitle:b.a.get("action.approveAct",{token:e.tokenSymbol}),approveActionError:b.a.get("action.approveActErr"),approveActionState:"",supplyActionTitle:b.a.get("action.supplyAct"),supplyActionError:b.a.get("action.supplyActErr"),supplyActionState:"",actionInfo:b.a.get("action.startBtn"),actionDisabled:!0,actionRetry:"",actionState:t?"line":"info",actionStarted:!1,successOneValueStr:"",successTwoValueStr:"",miniPopVisible:!1}},n.showAddModal=function(){n.setState(Object(r.a)(Object(r.a)({},n.initAddModal()),{},{addVisible:!0}),(function(){n.onRetryAction()}))},n.beforeHideAddModal=function(){n.state.actionStarted?n.setState({miniPopVisible:!0}):n.hideAddModal()},n.hideAddModal=function(){n.setState({addVisible:!1},(function(){setTimeout((function(){n.setState(Object(r.a)({},n.initAddModal()))}),1e3)}))},n.miniPopOk=function(){var e=n.state.needApprove;n.setState({miniPopVisible:!1},Object(c.a)(l.a.mark((function t(){var a,o,r,s,c,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.hideAddModal(),!e){t.next=12;break}return a=n.props.pool.tokenInfo,o=n.props.network.defaultAccount,t.next=6,Object(T.m)(o,a.tokenAddress);case 6:r=t.sent,s=r.exchangeAddr,c=r.allowance,i=!0,s&&(i=!1),n.setState({needCreate:i,approvedAmount:c.div(new N.a(10).pow(a.tokenDecimal))});case 12:case"end":return t.stop()}}),t)}))))},n.miniPopCancel=function(){n.setState({miniPopVisible:!1})},n.gotoPool=function(){n.props.pool.setData({actionLiqV2:0})},n.onRetryAction=function(){var e=n.state.needCreate,t=n.state.needApprove,a=n.state.actionRetry;switch(!a&&e&&(a="createPair"),!a&&t&&(a="setApprove"),a){case"createPair":n.setState({createActionState:"start",actionInfo:b.a.get("action.startBtn"),actionDisabled:!0},(function(){n.createPair()}));break;case"setApprove":n.setState({approveActionState:"start",actionInfo:b.a.get("action.startBtn"),actionDisabled:!0},(function(){n.setApprove()}));break;case"supplyLiquidity":n.setState({swapActionState:"start",actionInfo:b.a.get("action.startBtn"),actionDisabled:!1},(function(){n.supplyLiquidity()}))}},n.useSafeMax=function(){var e=n.props.pool.tokenInfo,t=n.state,a=t.poolIsExist,o=t.fromBalanceStr,r=t.noPoolBalance,s=(1===a||1===r)&&""!==e.tokenAddress?S.a.createFeeAmount:S.a.addFeeAmount,l=Object(N.c)(Object(N.L)(o).minus(s));n.judgeIssues(l,1)},n.toTokenRef=k.a.createRef(),n.state={fromToken:{tokenSymbol:"TRX",tokenAddress:S.a.trxFakeAddress,tokenDecimal:S.a.trxDecimal,trxBalance:new N.a(0),tokenBalance:new N.a(0)},calcStatus:!1,insufficientBalance:"",fromBalance:new N.a(-1),fromBalanceStr:"--",toBalance:new N.a(-1),toBalanceStr:"--",poolIsExist:-1,noPoolBalance:-1,shareOfPool:new N.a(0),approvedAmount:new N.a(0),tokenOneValueStr:"",tokenTwoValueStr:"",tokenOneValue:new N.a(0),tokenTwoValue:new N.a(0),tokenMap:Object(o.a)({},S.a.trxFakeAddress,{tokenAddress:S.a.trxFakeAddress,address:"",tokenSymbol:"TRX",tokenLogoUrl:S.a.trxLogoUrl,tokenName:"TRX",tokenDecimal:S.a.trxDecimal}),addVisible:!1,createTxt:b.a.get("pool.create_pair_btn"),createState:"",approveTxt:b.a.get("pool.add_approve_btn"),approveState:"",supplyTxt:b.a.get("pool.add_supply_btn"),supplyState:"",createAddr:"",fromOrTo:0,appleDevice:!1,needCreate:!0,needApprove:!0,supplyPopBtn:"",supplyPopBtnDisabled:!1,supplyErrorInfo:"",createActionTitle:"",createActionError:"",createActionFailed:"",createActionState:"",approveActionTitle:"",approveActionError:"",approveActionState:"",supplyActionTitle:"",supplyActionError:"",supplyActionState:"",actionInfo:"",actionDisabled:!1,actionRetry:"",actionState:"",actionStarted:!1,successOneValueStr:"",successTwoValueStr:"",miniPopVisible:!1,versionChanged:!1,status:!1},n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e){e.pool.actionLiqV2!=this.props.pool.actionLiqV2&&1===Number(this.props.pool.actionLiqV2)&&this.props.pool.setData({addRef:this.toTokenRef})}},{key:"render",value:function(){var e=this,t=this.state,a=t.calcStatus,n=t.insufficientBalance,o=t.shareOfPool,r=t.poolIsExist,s=t.fromBalanceStr,l=t.toBalanceStr,c=t.tokenOneValue,i=t.tokenTwoValue,d=t.addVisible,p=t.noPoolBalance,u=t.tokenOneValueStr,m=t.tokenTwoValueStr,f=t.successOneValueStr,g=t.successTwoValueStr,A=t.status,T=t.networkError,_=this.props.pool,C=_.tokenTwoFixed,L=_.tokenInfo,D=_.selectTokenOne,B=_.tokenDetail,M=this.props.network.settingSlippage,R=c._toFixed(4,1),P=i.div(c),U=c.div(i);B.exTrx.gt(0)&&(R=c.times(B.totalSupply).div(B.exTrx)._toFixed(S.a.trxDecimal,1),P=B.price2,U=B.price1);var q=o._toFixed(2,1);isNaN(q)?q="--":o.gt(0)&&o.lt(.01)&&(q="<0.01");var H="";n&&(H=b.a.get("pool.add_insufficient_btn",{value:n}));var W=(1===r||1===p)&&""!==L.tokenAddress,X=W?S.a.createFeeAmount:S.a.addFeeAmount;W?c.lt(S.a.createFeeAmount)&&(H=b.a.get("pool.less_than_btn",{value:S.a.createFeeAmount})):c.lt(S.a.firstTRXLimit)&&0!==p&&(H=b.a.get("pool.less_than_btn",{value:S.a.firstTRXLimit}));var z="";H&&(z=H),a||(z=b.a.get("pool.add_enter_btn"));var J=null;return J=setTimeout((function(){e.setState({status:!0}),clearTimeout(J)}),3e3),k.a.createElement("section",{className:"action-content"},k.a.createElement("header",{className:"flex"},k.a.createElement("span",{className:"return ib",onClick:function(t){return e.setLiq(0)}},k.a.createElement("img",{src:j.a,alt:"back"})),k.a.createElement(E.a,{titleClass:"add-title",children:b.a.get("pool.add_addLiq_title"),tip:b.a.get("pool.add_addLiq_title_tip"),toolClass:"pool-add-tool",tail:!0,placement:v.a?"left":"bottom"})),T&&k.a.createElement("p",{className:"fz14 red mb20"},b.a.get("pool.network_error")),W&&k.a.createElement("div",{className:"first-pool-copy"},k.a.createElement("div",{className:"bold fz14 black first-pool-title"},b.a.get("pool.create_firstProv_bold")),c.lt(S.a.createFeeAmount)&&k.a.createElement("p",{className:"fz14 first-pool-tip red"},b.a.get("pool.less_than",{value:S.a.createFeeAmount})),k.a.createElement("p",{className:"fz14 first-pool-tip"},b.a.get("pool.create_first_tip1"))),k.a.createElement("div",{className:"flex token-sec"},k.a.createElement("div",{className:"input"},k.a.createElement("p",null,b.a.get("pool.add_input_text")),k.a.createElement("input",{type:"type",className:"token-sec-input token-sec-input-1",placeholder:b.a.get("pool.add_placeholder_text"),onChange:function(t){return e.judgeIssues(t.target.value,1)},value:u})),k.a.createElement("div",{className:"select"},k.a.createElement("p",null,k.a.createElement("span",{className:"tag"},b.a.get("pool.add_balance_text"),": "),k.a.createElement("span",{className:"balance"},Object(N.a)(s).gte(0)?Object(N.o)(s,{dp:6,cutZero:!0}):"--")),k.a.createElement("div",{className:"input-max"},this.props.network.isConnected?k.a.createElement("span",{className:"link",onClick:function(t){return e.setMaxFrom("TRX",{firstAdd:!0})}},b.a.get("swap.input_from_max")):null,k.a.createElement(x.a,{disabled:!0,value:D.tokenAddress,tokenInfo:D,fromPool:!0})))),A&&"TRX"===D.tokenSymbol&&u?Object(N.L)(s).lt(X)?k.a.createElement("div",{className:"safe-amount-tip"},b.a.getHTML("list.trx_tip_3",{value:X})):Object(N.L)(s).minus(X).lt(Object(N.L)(u))?k.a.createElement("div",{className:"safe-amount-tip"},b.a.getHTML("list.trx_tip_1",{value:X})," ",k.a.createElement("em",{onClick:this.useSafeMax},b.a.get("list.trx_tip_2"))):null:null,k.a.createElement("div",{className:"plusBtn flex between"},k.a.createElement("img",{src:V.a,alt:"plus"}),k.a.createElement("span",{className:"link",onClick:this.showSettingModal},b.a.get("pool.add_set_link"))),k.a.createElement("div",{className:"flex token-sec"},k.a.createElement("div",{className:"input"},k.a.createElement("p",null,b.a.get("pool.add_input_text")),k.a.createElement("input",{type:"type",className:"token-sec-input token-sec-input-2",placeholder:b.a.get("pool.add_placeholder_text"),onChange:function(t){return e.judgeIssues(t.target.value,2)},value:m})),k.a.createElement("div",{className:"select"},k.a.createElement("p",null,k.a.createElement("span",{className:"tag"},b.a.get("pool.add_balance_text"),": "),k.a.createElement("span",{className:"balance"},Object(N.a)(l).gte(0)?Object(N.o)(l,{dp:6,cutZero:!0}):"--")),k.a.createElement("div",{className:"input-max"},this.props.network.isConnected?k.a.createElement("span",{className:"link",onClick:function(t){return e.setMaxFrom("token")}},b.a.get("swap.input_from_max")):null,k.a.createElement(x.a,{onChange:this.selectedToken,fromPool:!0,appleDevice:this.state.appleDevice,disabled:C,address:this.props.network.defaultAccount,value:L.tokenAddress,tokenInfo:L,ref:this.toTokenRef})))),""!==L.tokenAddress&&L.tokenAddress.length>0?this.exchangeInfo():null,k.a.createElement("div",{className:"action-btns"},this.props.network.isConnected?z?k.a.createElement(w.a,{type:"single",disabled:!0,info:z}):k.a.createElement(w.a,{type:"single",info:b.a.get("pool.add_supply_btn"),onClick:this.showAddModal}):k.a.createElement(w.a,{type:"single",info:b.a.get("pool.add_connect_btn"),onClick:function(t){e.props.network.connectWallet()}})),k.a.createElement(h.a,{title:null,closable:"success"!==this.state.actionState,visible:d,onCancel:this.beforeHideAddModal,className:"pool-modal add-gai",footer:null,style:{marginLeft:Object(N.t)()},width:630,centered:!0},"line"===this.state.actionState&&k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"title normal"},b.a.get("swap.action_supply")),k.a.createElement("div",{className:"ib-parent center"},k.a.createElement("div",null,k.a.createElement("span",{className:"add-value"},u),k.a.createElement("span",{className:"add-token"},D.tokenSymbol)),k.a.createElement("span",{className:"plus"},"+"),k.a.createElement("div",null,k.a.createElement("span",{className:"add-value"},m),k.a.createElement("span",{className:"add-token"},L.tokenSymbol))),k.a.createElement("div",{className:"supplyLineTitle"},b.a.get("action.supplyLineTitle")),this.state.needCreate?k.a.createElement(y.a,null,k.a.createElement("span",{status:this.state.createActionState,err:this.state.createActionError,failed:this.state.createActionFailed},this.state.createActionTitle),k.a.createElement("span",{status:this.state.approveActionState,err:this.state.approveActionError},this.state.approveActionTitle),k.a.createElement("span",{status:this.state.supplyActionState,err:this.state.supplyActionError},this.state.supplyActionTitle)):k.a.createElement(y.a,null,k.a.createElement("span",{status:this.state.approveActionState,err:this.state.approveActionError},this.state.approveActionTitle),k.a.createElement("span",{status:this.state.supplyActionState,err:this.state.supplyActionError},this.state.supplyActionTitle)),k.a.createElement(w.a,{type:"single",disabled:this.state.actionDisabled,info:this.state.actionInfo,onClick:this.onRetryAction})),"info"===this.state.actionState&&k.a.createElement(k.a.Fragment,null,k.a.createElement("div",null,b.a.get("pool.popup_receive_title")),k.a.createElement("div",{className:"amount"},k.a.createElement("div",{className:"center"},k.a.createElement("p",{className:"amount-num"},Object(N.o)(R,{dp:S.a.trxDecimal,cutZero:!0})),k.a.createElement("p",{className:"amount-name"},k.a.createElement("span",null,D.tokenSymbol+"/"+L.tokenSymbol+" "+b.a.get("pool.popup_tokens_text")))),k.a.createElement("p",{className:"amount-tip left"},b.a.get("pool.popup_receive_tip",{value:M}))),k.a.createElement("div",{className:"price"},k.a.createElement("p",{className:"flex param"},k.a.createElement("span",{className:"price-key"},D.tokenSymbol+" "+b.a.get("pool.popup_deposited_text")),k.a.createElement("span",{className:"price-value"},k.a.createElement("img",{src:D.tokenLogoUrl,alt:""}),k.a.createElement("span",null,c.toString()))),k.a.createElement("p",{className:"flex param"},k.a.createElement("span",{className:"price-key"},L.tokenSymbol+" "+b.a.get("pool.popup_deposited_text")),k.a.createElement("span",{className:"price-value"},k.a.createElement("img",{src:L.tokenLogoUrl||I.a,alt:"",onError:function(e){e.target.onerror=null,e.target.src=I.a}}),k.a.createElement("span",null,i.toString()))),k.a.createElement("div",{className:"flex param"},k.a.createElement("span",{className:"price-key"},b.a.get("pool.popup_rates_text")),k.a.createElement("div",{className:"price-value ib"},k.a.createElement("p",null,"1 ",D.tokenSymbol," ="," ",Object(N.a)(1).div(Object(N.a)(10).pow(Number(L.tokenDecimal))).gt(P)?"< "+Object(N.a)(1).div(Object(N.a)(10).pow(Number(L.tokenDecimal))).toString():P._toFixed(Number(L.tokenDecimal))," ",L.tokenSymbol),k.a.createElement("p",null,"1 ",L.tokenSymbol," ="," ",Object(N.a)(1).div(Object(N.a)(10).pow(Number(S.a.trxDecimal))).gt(U)?"< "+Object(N.a)(1).div(Object(N.a)(10).pow(Number(S.a.trxDecimal))).toString():U._toFixed(Number(S.a.trxDecimal))," ",D.tokenSymbol))),k.a.createElement("div",{className:"flex between mb30"},k.a.createElement("div",{className:"share-title"},b.a.get("pool.popup_share_text")),k.a.createElement("div",{className:"v-right"},q,"%"))),this.state.supplyErrorInfo&&k.a.createElement("div",{className:"errorMsg"},this.state.supplyErrorInfo),k.a.createElement(w.a,{type:"single",disabled:this.state.supplyPopBtnDisabled,info:this.state.supplyPopBtn,onClick:this.beforeSupplyLiquidity})),"success"===this.state.actionState&&k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"modal-success"},k.a.createElement("img",{src:F.a,alt:""}),k.a.createElement("div",{className:"title green"},b.a.get("action.supplySuccessTitle")),k.a.createElement("div",{className:"ib-parent center mb40"},k.a.createElement("div",null,k.a.createElement("span",{className:"add-value"},f),k.a.createElement("span",{className:"add-token"},D.tokenSymbol)),k.a.createElement("span",{className:"plus"},"+"),k.a.createElement("div",null,k.a.createElement("span",{className:"add-value"},g),k.a.createElement("span",{className:"add-token"},L.tokenSymbol))),k.a.createElement(w.a,{type:"single",info:b.a.get("action.closeBtn"),onClick:this.gotoPool}),k.a.createElement("div",{className:"supplyDescTitle"},b.a.get("action.supplyDescTitle"))))),k.a.createElement(O.a,{visible:this.state.miniPopVisible,confirm:this.miniPopOk,cancel:this.miniPopCancel}))}}]),a}(k.a.Component))||n)||n)||n;t.a=R},1482:function(e,t,a){"use strict";a.r(t);var n,o=a(6),r=a(7),s=a(11),l=a(12),c=a(1),i=a.n(c),d=a(202),p=a(1450),u=Object(d.b)("network")(n=Object(d.c)(n=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(p.a,null))}}]),a}(i.a.Component))||n)||n;t.default=u},908:function(e,t,a){"use strict";var n=a(6),o=a(7),r=a(11),s=a(12),l=a(1),c=a.n(l),i=(a(29),a(159),a(1083),function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).onClick=function(){o.props.disabled||o.props.state||o.props.onClick&&o.props.onClick()},o.onLeftClick=function(){o.props.lDisabled||o.props.lState||o.props.onLeftClick&&o.props.onLeftClick()},o.onMiddleClick=function(){o.props.mDisabled||o.props.mState||o.props.onMiddleClick&&o.props.onMiddleClick()},o.onRightClick=function(){o.props.rDisabled||o.props.rState||o.props.onRightClick&&o.props.onRightClick()},o.state={},o}return Object(o.a)(a,[{key:"render",value:function(){var e=null;switch(this.props.type){case"trisection":e=c.a.createElement("div",null,c.a.createElement("button",{className:"trisection "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick},this.props.lInfo),c.a.createElement("button",{className:"trisection "+(this.props.mDisabled?"gray":this.props.mState?this.props.mState:"blue"),onClick:this.onMiddleClick},this.props.mInfo),c.a.createElement("button",{className:"trisection "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick},this.props.rInfo));break;case"half":e=c.a.createElement("div",null,c.a.createElement("button",{className:"half "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick},this.props.lInfo),c.a.createElement("button",{className:"half "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick},this.props.rInfo));break;case"single":default:e=c.a.createElement("button",{className:"single "+(this.props.disabled?"gray":this.props.state?this.props.state:this.props.btnColor?this.props.btnColor:"blue"),onClick:this.onClick},this.props.info)}return c.a.createElement(c.a.Fragment,null,e)}}]),a}(c.a.Component));t.a=i},976:function(e,t,a){},980:function(e,t,a){"use strict";var n=a(6),o=a(7),r=a(11),s=a(12),l=a(1),c=a.n(l),i=a(159),d=a(29),p=a.n(d),u=a(800),m=a(8),k=(a(1084),function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).confirm=function(){o.props.confirm&&o.props.confirm()},o.cancel=function(){o.props.cancel&&o.props.cancel()},o.state={},o}return Object(o.a)(a,[{key:"render",value:function(){var e=Object(i.a)(window.navigator).any?0:64;return c.a.createElement(u.a,{footer:null,title:null,closable:!0,maskClosable:!1,visible:this.props.visible,className:"unfinished-pop",onCancel:this.cancel,style:{marginLeft:Object(m.t)()+e},width:430,centered:!0},c.a.createElement("div",{className:"title"},p.a.get("action.popTitle"),c.a.createElement("p",null,p.a.get("action.popDesc"))),c.a.createElement("div",{className:"btns"},c.a.createElement("button",{onClick:this.confirm},p.a.get("action.popQuitBtn")),c.a.createElement("button",{onClick:this.cancel},p.a.get("action.popCancelBtn"))))}}]),a}(c.a.Component));t.a=k},981:function(e,t,a){e.exports=a.p+"static/media/TransactionSuccess.294bae05.svg"}}]);