(this["webpackJsonpswap-front"]=this["webpackJsonpswap-front"]||[]).push([[19],{1039:function(e,t,s){"use strict";var a=s(0),o=s.n(a),n=s(39),i=s.n(n),c=s(1426),l=s(169),r=(s(1418),s(16));const d=Object(r.jsx)(l.a,{style:{fontSize:24},spin:!0});class p extends o.a.Component{constructor(e){super(e),this.state={}}render(){const{children:e}=this.props,t=o.a.Children.toArray(e).map(((e,t)=>{const{children:s,status:a,err:o,failed:n}=e.props;let l=s;return"error"===a&&(l=o||s),"pending"===a&&(l=i.a.get("action.doingAct")),"failed"===a&&(l=n||s),Object(r.jsxs)("div",{className:"al_item ".concat(a?"".concat(a):""),children:[Object(r.jsxs)("div",{className:"flex",children:[Object(r.jsx)("span",{className:"al_number",children:t+1}),Object(r.jsx)("span",{className:"al_title".concat(a?" ".concat(a):""),children:l})]}),"pending"===a&&Object(r.jsx)(c.a,{indicator:d,className:"spiny"})]},e.key)}));return Object(r.jsx)("div",{className:"action-line",children:t})}}t.a=p},1109:function(e,t,s){},1416:function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var a=s(0),o=s(1107),n=s.n(o),i=s(39),c=s.n(i),l=s(1493),r=s(90),d=s.n(r),p=(s(11),s(1439)),h=s(109),b=s(196),j=s(297),u=s.p+"static/media/kline.e1278ad6.svg",k=s(16);class m extends a.Component{constructor(e){super(e),this.getChartOptions=()=>{let{xAxisData:e=[],seriesData:t=[],ymin:s,d_max:a,d_min:o}=this.state;c.a.get("swap.chart_price_title",{d_max:a,d_min:o,ymin:s});let{type:n="line"}=this.props;return{toolbox:{feature:{saveAsImage:{}},show:!1},color:["rgba(69,77,226,0.20)"],grid:{left:"0",top:"8%",right:"10%",bottom:"2%",containLabel:!0,show:!1},xAxis:[{type:"category",boundaryGap:["20%","20%"],data:e,show:!0,axisLine:{lineStyle:{color:"#F3F3F3"}},axisLabel:{showMaxLabel:!0,fontSize:10,color:"#999"}}],yAxis:[{type:"value",axisTick:{},splitLine:{show:!1},axisLine:{lineStyle:{color:"#F3F3F3"}},axisLabel:{showMaxLabel:!1,showMinLabel:!1,fontSize:10,color:"#999",formatter:function(e){return e<100?e.toPrecision(3):Number(e.toPrecision(3))}},min:function(e){return Number((.98*e.min).toPrecision(3))},max:function(e){return Number((1.02*e.max).toPrecision(3))}}],series:[{type:n,smooth:!0,barCategoryGap:"0",itemStyle:{normal:{lineStyle:{color:"#5915E1"}}},emphasis:{itemStyle:{borderColor:"#5915E1",borderWidth:2}},symbol:"none",markPoint:{data:[{coord:[e.length-1,t[t.length-1]],value:t[t.length-1],itemStyle:{color:"transparent"},label:{fontSize:10,backgroundColor:"#FF8E18",padding:[4,5],color:"#ffffff",borderRadius:5}}],symbol:"roundRect",symbolOffset:[0,"-100%"],symbolSize:[50,20]},markLine:{label:{show:!1},data:[{0:{lineStyle:{type:"dashed",color:"rgba(72,80,229,.5)",width:1},coord:[e.length-1,Number((.98*o).toPrecision(3))],value:Number((.98*o).toPrecision(3)),symbol:"none"},1:{symbol:"path://M1552,577C1552,574.7900390625,1553.7900390625,573,1556,573C1558.2099609375,573,1560,574.7900390625,1560,577C1560,579.2099609375,1558.2099609375,581,1556,581C1553.7900390625,581,1552,579.2099609375,1552,577Z",symbolSize:8,symbolKeepAspect:!1,coord:[e.length-1,t[t.length-1]],value:t[t.length-1]}}]},data:t}]}},this.conversionData=async e=>{const t=await h.a.getKlineData({token_address:e,granularity:"5min",time_start:parseInt((new Date).getTime()/1e3)-9e4,time_end:parseInt((new Date).getTime()/1e3),type:1}).catch((e=>console.log(e))),s=[],a=[];t&&t.data&&t.data.map(((e,o)=>{o%3===(t.data.length-1)%3&&(s.push(d()(1e3*e.t).format("HH:mm")),a.push(e.c))}));const o=Math.max.apply(null,a),n=Math.min.apply(null,a);this.setState({d_max:o,d_min:n}),this.setState({xAxisData:s,seriesData:a})},this.setChart=()=>{const{d_max:e,d_min:t}=this.state,{token_adddress:s}=this.props,a=this.getChartOptions(),o=Object(b.a)(window.navigator).any?"80vw":"430px",{token:i}=this.props;return Object(k.jsx)("div",{className:"chart-content",children:Object(k.jsxs)(j.b,{to:{pathname:"scan/detail/".concat(s),search:"".concat(Object(b.a)(window.navigator).any?"?to=kline":"")},target:"".concat(Object(b.a)(window.navigator).any?"":"_blank"),children:[Object(k.jsxs)("div",{className:"chart-title",children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("h4",{children:c.a.get("swap.chart_title",{token:i})}),Object(k.jsx)("p",{dangerouslySetInnerHTML:{__html:c.a.get("swap.chart_price_title",{d_max:e,d_min:t})}})]}),Object(k.jsx)("img",{src:u})]}),Object(k.jsx)(n.a,{option:a,style:{height:"254px",width:o},lazyUpdate:!0,notMerge:!0})]})})},this.setLineChart=e=>{const t=Object(b.a)(window.navigator).any?"150px":"194px",s=Object(b.a)(window.navigator).any?"40px":"44px";return Object(k.jsx)(p.Sparklines,{data:e,style:{width:t,height:s},children:Object(k.jsx)(p.SparklinesCurve,{style:{strokeWidth:1,stroke:"#5915E1",fill:"#A3A6DF",fillOpacity:"0.05"}})})},this.state={xAxisData:[],seriesData:[],token_adddress:"",d_max:0,d_min:0,ymin:0}}async componentDidMount(){const{token_adddress:e}=this.props;await this.conversionData(e)}async shouldComponentUpdate(e,t){return this.props.token_adddress!==e.token_adddress&&(this.setState({seriesData:[]}),e.token_adddress&&await this.conversionData(e.token_adddress),!0)}render(){const{seriesData:e}=this.state,{token_adddress:t}=this.props,s=this.setChart();return Object(k.jsx)("div",{className:"sparkline-content align-items-center",children:e.length>0&&Object(k.jsx)(a.Fragment,{children:Object(k.jsx)(l.a,{content:s,trigger:"".concat(Object(b.a)(window.navigator).any?"click":"hover"),overlayClassName:"price-chart-popover",children:Object(k.jsx)("div",{className:"sparkline-wrap",children:Object(b.a)(window.navigator).any?this.setLineChart(e):Object(k.jsx)(j.b,{to:{pathname:"scan/detail/".concat(t)},target:"_blank",children:this.setLineChart(e)})})})})})}}},1418:function(e,t,s){},1424:function(e,t,s){"use strict";var a,o=s(0),n=s.n(o),i=s(253),c=s(39),l=s.n(c),r=s(775),d=s(1038),p=s(4),h=s(11),b=s(16);let j=Object(i.b)("network")(a=Object(i.c)(a=class extends n.a.Component{constructor(e){super(e),this.changeCheckStatus=e=>{this.setState({checkStatus:e})},this.comfirmContinue=()=>{const{checkStatus:e}=this.state;e&&this.props.cb()},this.componentDidMount=()=>{},this.state={checkStatus:!1}}render(){const{visible:e,dealWarningSymbol:t}=this.props,{checkStatus:s}=this.state;let{symbol:a,slippage:o}=t?h.a.deflationToken[t]:{symbol:"",slippage:""};return Object(b.jsx)(r.a,{title:l.a.getHTML("list.deal_warning_title",{value:a}),closable:!1,visible:e,footer:null,style:{marginLeft:Object(p.D)(500)},width:525,className:"list-addtoken-modal deal-warning-modal",centered:!0,children:Object(b.jsxs)("div",{className:"solor-modal-body",children:[Object(b.jsxs)("div",{className:"tips",children:[Object(b.jsx)("div",{className:"tips1",children:l.a.getHTML("list.deal_warning_content_1",{value:a})}),Object(b.jsx)("div",{className:"tips1 yellow",children:l.a.getHTML("list.deal_warning_content_2",{value:o})}),Object(b.jsx)("div",{className:"tips1",children:l.a.getHTML("list.deal_warning_content_3",{value:a})})]}),Object(b.jsx)("div",{className:"check-box"+(s?" checked":""),children:Object(b.jsx)(d.a,{onChange:e=>this.changeCheckStatus(e.target.checked),children:l.a.get("list.i_understand")})}),Object(b.jsx)("div",{className:"btns",children:Object(b.jsx)("button",{onClick:this.comfirmContinue,className:s?"button-active":"",children:l.a.get("list.continue")})})]})})}})||a)||a;t.a=j},1431:function(e,t,s){},1444:function(e,t,s){"use strict";t.a=s.p+"static/media/Add.17fec9f1.svg"},1456:function(e,t,s){"use strict";var a=s(5),o=s(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},i=s(59),c=function(e,t){return o.createElement(i.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:n}))},l=o.forwardRef(c);t.a=l},1460:function(e,t,s){"use strict";var a,o=s(0),n=s.n(o),i=s(148),c=s.n(i),l=s(39),r=s.n(l),d=s(196),p=s(253),h=s(1428),b=s(1037),j=s(1437),u=s(775),k=s(1038),m=s(11),g=s(70),x=s(1456),O=s(4),S=(s(1431),s(300)),f=s(296),v=s(301),y=s(426),w=s(109),A=s(1424),N=s(16);const T="REMOVE";let _=Object(p.b)("pool")(a=class extends n.a.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=()=>{const e=window.localStorage.getItem("solor");if(e){let t=JSON.parse(e);window.localStorage.setItem("solor",JSON.stringify(t)),this.props.pool.setData({solor:t})}},this.setTokenList=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const{byUrl:s={},selectedListUrl:a="",solor:o=[]}=t.props.pool,n=window.localStorage.getItem("swapVersion");let i=s[a].tokens||[];c.a.uniqBy(i,"address").length!=i.length&&(i=[]);let l=s[a].isToken;void 0===l&&(l=await w.a.isToken(i.map((e=>e.address))),s[a].isToken=Number(l),await t.props.pool.updateByUrl(s[a])),2===Number(l)&&(i=[]);const r={tokenAddress:m.a.trxFakeAddress,address:"",addressV1:"",addressV2:"",tokenSymbol:"TRX",tokenLogoUrl:v.a,tokenName:"TRX",tokenDecimal:m.a.trxDecimal,balance:"-"},{exchanges:d={},allExchanges:p={}}=t.props.pool;let h=[];t.props.swap?i.map((e=>{e.address&&d[e.address]&&d[e.address].e&&h.push({tokenAddress:e.address,address:d[e.address]?d[e.address].e:null,addressV1:p&&p[0]&&p[0][e.address]?p[0][e.address].e:null,addressV2:p&&p[1]&&p[1][e.address]?p[1][e.address].e:null,tokenSymbol:e.symbol||"",tokenLogoUrl:e.logoURI||f.a,tokenName:e.name||"",tokenDecimal:Number(d[e.address].d),balance:"-"})})):i.map((e=>{e.address&&h.push({tokenAddress:e.address,address:"",addressV1:"",addressV2:"",tokenSymbol:e.symbol||"",tokenLogoUrl:e.logoURI||f.a,tokenName:e.name||"",tokenDecimal:d[e.address]&&d[e.address].d?Number(d[e.address].d):e.decimals,balance:"-"})})),o.map((e=>{e.addressV1=p&&p[0]&&p[0][e.tokenAddress]?p[0][e.tokenAddress].e:null,e.addressV2=p&&p[1]&&p[1][e.tokenAddress]?p[1][e.tokenAddress].e:null,e.address="v1.0"===n?p&&p[0]&&p[0][e.tokenAddress]?p[0][e.tokenAddress].e:null:p&&p[1]&&p[1][e.tokenAddress]?p[1][e.tokenAddress].e:null}));const b=o.slice();o.map((e=>{c.a.findIndex(h,(t=>t.tokenAddress===e.tokenAddress))>=0&&c.a.remove(b,(t=>t.tokenAddress===e.tokenAddress))})),h=[r].concat(b,h);const j=[],u=[],k={};h.map((e=>{j.push(e),u.push(e),k[e.tokenAddress]=e})),t.state.tokenMap=k,t.setState({allTokenList:j,tokenList:u},(()=>{t.getTokenBalance(),e&&e()}))}catch(s){console.log(s)}},this.getTokenBalance=async()=>{const e=window.defaultAccount,{tokenList:t,tokenMap:s}=this.state,a=[];t.map((e=>{a.push(e.tokenAddress)})),e&&(await Object(g.l)(e,a,s),this.setState({}))},this.showModal=async()=>{if(!this.props.disabled)try{this.props.pool.getTokensDataFromLocal(),await this.setTokenList((()=>{const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}},(()=>{this.setState({modalVisible:!0,defaultStatus:1})}))}))}catch(e){console.log("tokenModal err",e),this.setState({modalVisible:!0}),this.getTokenBalance()}},this.calcItem=async e=>{const t=window.localStorage.getItem("swapVersion"),{allExchanges:s={}}=this.props.pool,a=m.a.contract.factory,o=m.a.sunContract.factory,n=s[0][e.tokenAddress]&&s[0][e.tokenAddress].e||null,i=s[1][e.tokenAddress]&&s[1][e.tokenAddress].e||null;if(!n){const s=await Object(g.m)(e.tokenAddress,a);s?(e.addressV1=s,e.notCreatedV1=!1,"v1.0"===t&&(e.address=s,await this.removeSolor(e),await this.addSolor(e))):e.tokenAddress!==m.a.trxFakeAddress&&(e.notCreatedV1=!0)}if(e.addressV1&&2===e.cst){(await Object(g.w)(e.addressV1)).gt(0)||e.tokenAddress===m.a.trxFakeAddress?e.notCreatedV1=!1:e.notCreatedV1=!0}if(!i){const s=await Object(g.m)(e.tokenAddress,o);s?(e.addressV2=s,e.notCreatedV2=!1,"v1.5"===t&&(e.address=s,await this.removeSolor(e),await this.addSolor(e))):e.tokenAddress!==m.a.trxFakeAddress&&(e.notCreatedV2=!0)}if(e.addressV2&&2===e.cst){(await Object(g.w)(e.addressV2)).gt(0)||e.tokenAddress===m.a.trxFakeAddress?e.notCreatedV2=!1:e.notCreatedV2=!0}return e},this.setTokenAddressCallback=()=>{const{selectSearchItem:e}=this.state;this.setState({dealWarningVisible:!1}),this.props.onChange&&this.props.onChange(this.state.tokenMap[e.tokenAddress])},this.setTokenAddress=async(e,t,s)=>{const{exchanges:a={},allExchanges:o={}}=this.props.pool;if(e&&this.state.tokenMap[e]){if("swap"===s&&Object.keys(m.a.deflationToken).includes(e))return void this.setState({dealWarningVisible:!0,callbacks:this.setTokenAddressCallback,selectSearchItem:{tokenAddress:e}});this.props.onChange&&this.props.onChange(this.state.tokenMap[e])}else if(Object(O.B)(e)&&t){const t=await w.a.tokenBrief(e);if(t.success){const s=t.data;if(s.tokenAddr){const t={tokenAddress:e,address:a[s.tokenAddr]&&a[s.tokenAddr].e||null,addressV1:o[0][s.tokenAddr]&&o[0][s.tokenAddr].e||null,addressV2:o[1][s.tokenAddr]&&o[1][s.tokenAddr].e||null,tokenSymbol:s.tokenSymbol,tokenLogoUrl:s.tokenLogo,tokenName:s.tokenName,tokenDecimal:s.tokenDecimal,cst:1,balance:"-"},n=await this.calcItem(t);this.setState({tokenBrief:n,solorModalVisible:!0})}}}else if(Object(O.B)(e)){const t=await w.a.tokenBrief(e);if(t.success){const s=t.data;if(s.tokenAddr){const t=window.localStorage.getItem("swapVersion"),a={tokenAddress:e,address:s.exchangeAddr,addressV1:"v1.0"===t?s.exchangeAddr:null,addressV2:"v1.5"===t?s.exchangeAddr:null,tokenSymbol:s.tokenSymbol,tokenLogoUrl:s.tokenLogo,tokenName:s.tokenName,tokenDecimal:s.tokenDecimal,cst:1,balance:"-"},o=await this.calcItem(a);this.setState({tokenBrief:o,solorModalVisible:!0})}}}},this.onChange=async(e,t)=>{if(t.stopPropagation(),e.tokenAddress===this.props.value)return;if(this.props.fromPool&&e.tokenAddress===m.a.trxFakeAddress)return;const s=this.props.type;if((1===s||2===s)&&Object.keys(m.a.deflationToken).includes(e.tokenAddress))return void this.setState({modalVisible:!1,dealWarningVisible:!0,callbacks:this.selectSearchCallback,selectSearchItem:e});const a=await this.calcItem(e);this.setState({modalVisible:!1}),this.props.onChange&&this.props.onChange(a)},this.selectSearchCallback=async()=>{const{selectSearchItem:e}=this.state,t=await this.calcItem(e);this.setState({dealWarningVisible:!1}),this.props.onChange&&this.props.onChange(t)},this.hideModal=()=>{const{defaultStatus:e}=this.state;1===e?this.setState({modalVisible:!1,customTokenUriLeg:!0}):this.hideListModal()},this.onTokenStrChange=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{exchanges:a={},allExchanges:o={}}=t.props.pool;try{const n=e.target.value,i=t.state.allTokenList;let c=[];const{tokenSort:l}=t.state;if(n.length>1)if(Object(O.B)(n)){if(c=i.filter((e=>e.tokenAddress===n.trim())),0===c.length){const e=await w.a.tokenBrief(n);if(e.success){const s=window.defaultAccount,l=e.data;let r="-";s&&(r=await Object(g.B)(s,[n],t.state.tokenMap));const d={tokenAddress:n,address:a[l.tokenAddr]&&a[l.tokenAddr].e||null,addressV1:o[0][l.tokenAddr]&&o[0][l.tokenAddr].e||null,addressV2:o[1][l.tokenAddr]&&o[1][l.tokenAddr].e||null,tokenSymbol:l.tokenSymbol,tokenLogoUrl:l.tokenLogo,tokenName:l.tokenName,tokenDecimal:l.tokenDecimal,cst:1,balance:"-"==r?"-":Object(O.n)(r,2)};c.push(d),i.push(d)}}}else c=i.filter((e=>e.tokenSymbol.toLowerCase().indexOf(n.toLowerCase())>-1&&1!==Number(e.cst))),l&&(c=c.sort(((e,t)=>{const s=e.tokenSymbol.toLowerCase(),a=t.tokenSymbol.toLowerCase();return s<a?-1:s>a?1:0})));else c=i.slice().filter((e=>1!==Number(e.cst))),l&&(c=c.sort(((e,t)=>{const s=e.tokenSymbol.toLowerCase(),a=t.tokenSymbol.toLowerCase();return s<a?-1:s>a?1:0})));t.setState({tokenStr:n,tokenList:c},(()=>{s&&s(),t.getTokenBalance()}))}catch(n){console.log("onTokenStrChange: ",n)}},this.clearStorage=()=>{const{localStorage:e}=m.a;for(const t in e)window.localStorage.removeItem(e[t]);window.location.reload()},this.showListModal=()=>{this.setState({defaultStatus:2})},this.hideListModal=()=>{this.setState({defaultStatus:1})},this.selectTokenList=async e=>{try{const{selectedListUrl:t}=this.props.pool;this.props.pool.setData({selectedListUrl:e}),this.props.pool.setTokensDataIntoLocal(),await this.setTokenList((()=>{this.setState({defaultStatus:1});const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}})})),this.props.pool.handleNotifiction(),this.props.pool.setTokensDataIntoLocal()}catch(t){console.log(t)}},this.backTokensCategory=()=>{this.setState({changeStatus:1})},this.onTokenUriChange=e=>{try{const t=e.target.value;this.setState({customTokenUri:t.trim(),errInfo:""})}catch(t){console.log(t)}},this.checkUrl=e=>{const t="";return e||(t=r.a.get("list.err1")),t},this.isListsOver=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>=m.a.maxLists},this.addCustomTokens=async()=>{try{const{customTokenUri:e}=this.state;let t="";if(!Object(O.C)(e))return t=r.a.get("list.add_failed_tip"),void this.setState({errInfo:t});const{byUrl:s={}}=this.props.pool;if(s[e]&&!s[e].rs)return t=r.a.get("list.exists"),void this.setState({errInfo:t});if(this.isListsOver(s))return t=r.a.getHTML("list.lists_over",{value:m.a.maxLists}),void this.setState({errInfo:t});const a=await w.a.getTokenListJson(e),{tokens:o=[]}=a;if(o.length>m.a.maxTokens)return t=r.a.getHTML("list.tokens_over",{value:m.a.maxTokens}),void this.setState({errInfo:t});const{key:n="",valid:i=!1}=Object(O.R)(a);if(!i)return t=r.a.get("list.add_err_tip",{value:n}),void this.setState({errInfo:t});this.props.pool.updateTokensData(e,{...a,uri:e,rs:0}),await this.setTokenList((()=>{this.setState({defaultStatus:1,customTokenUri:""});const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}})}))}catch(e){const t=r.a.get("list.add_failed_retry");this.setState({errInfo:t}),console.log(e)}},this.updateList=async e=>{const{uri:t}=e,{byUrlNew:s={}}=this.props.pool,a=s[t];Object(O.i)(a,(async()=>{await this.props.pool.updateByUrl(a),this.setState({})}))},this.hideRemoveModal=()=>{this.setState({removeId:"",removeModalVisible:!1,removeText:""})},this.showRemoveModal=e=>{try{this.setState({removeId:e.uri,removeModalVisible:!0})}catch(t){console.log(t)}},this.removeTokens=()=>{try{const{removeId:e,removeText:t}=this.state;if(!e)return;if(t.trim()!=T)return;const{byUrl:s={}}=this.props.pool,a=s[e],{cst:o=!1,uri:n=""}=a;o?this.props.pool.deleteByUrlById(n):(a.rs=1,this.props.pool.updateByUrl(a)),this.hideRemoveModal()}catch(e){console.log(e)}},this.inputRemoveText=e=>{const t=e.target.value;this.setState({removeText:t})},this.addSolor=async e=>{try{const{solor:t=[]}=this.props.pool;if(c.a.findIndex(t,(t=>t.tokenAddress===e.tokenAddress))>=0)return;t.unshift({...e,cst:2}),this.props.pool.setData({solor:t}),await this.setTokenList((()=>{const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}},(()=>{this.getTokenBalance()}))})),window.localStorage.setItem("solor",JSON.stringify(t))}catch(t){console.log(t)}},this.removeSolor=async e=>{try{if(e.tokenAddress===this.props.value||e.tokenAddress===this.props.switchValue)return;const{solor:t=[]}=this.props.pool,{tokenAddress:s}=e;c.a.remove(t,(e=>e.tokenAddress===s)),this.props.pool.setData({solor:t}),await this.setTokenList((()=>{const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}},(()=>{this.getTokenBalance()}))})),window.localStorage.setItem("solor",JSON.stringify(t))}catch(t){console.log(t)}},this.getKeys=e=>{try{const t=Object.keys(e);return t.sort(((t,s)=>e[t].name>e[s].name?1:-1))}catch(t){return[]}},this.tokenSortByAsCII=e=>{try{let{tokenList:t}=this.state;if(e=!e){let e=t.sort(((e,t)=>{const s=e.tokenSymbol.toLowerCase(),a=t.tokenSymbol.toLowerCase();return s<a?-1:s>a?1:0}));const s=c.a.findIndex(e,(e=>e.tokenAddress===m.a.trxFakeAddress));if(s>=0){const t=e.splice(s,1);e.unshift(t[0])}this.setState({tokenList:e})}else this.setTokenList((()=>{const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}},(()=>{this.getTokenBalance()}))}));this.setState({tokenSort:e})}catch(t){console.log(t)}},this.comfirmContinue=async()=>{try{const{tokenBrief:e,checkStatus:t}=this.state;if(!t)return;if(Object.keys(m.a.deflationToken).includes(e.tokenAddress))return void this.setState({solorModalVisible:!1,dealWarningVisible:!0,callbacks:this.dealWarningCallback});await this.addSolor(e),this.setState({solorModalVisible:!1}),this.props.onChange&&this.props.onChange(e)}catch(e){console.log(e),this.setState({dealWarningVisible:!1,solorModalVisible:!1})}},this.dealWarningCallback=async()=>{try{this.setState({dealWarningVisible:!1});const{tokenBrief:e}=this.state;await this.addSolor(e),this.setState({solorModalVisible:!1}),this.props.onChange&&this.props.onChange(e)}catch(e){console.log(e),this.setState({dealWarningVisible:!1,solorModalVisible:!1})}},this.changeCheckStatus=e=>{this.setState({checkStatus:e.target.checked})},this.renderSelectedList=(e,t,s,a,o)=>{let{tokenSort:n,tokenMap:i}=this.state;return e&&t&&e[t]?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("input",{className:"select-search",type:"text",placeholder:r.a.get("tokens.select_placeholder_text"),value:s,onChange:this.onTokenStrChange}),Object(N.jsxs)("div",{className:"title flexB",children:[Object(N.jsx)("span",{className:"text",children:r.a.get("tokens.select_tokenName_title")}),Object(N.jsx)("span",{className:"sort "+(n?"active":""),onClick:()=>this.tokenSortByAsCII(n)})]}),Object(N.jsx)("div",{className:"itemList",children:0===o.length?Object(N.jsx)("div",{className:"no-token-fund",children:r.a.get("tokens.loading_tokens")}):a.length?a.map(((e,t)=>Object(N.jsxs)("div",{className:"flex item "+(e.tokenAddress===this.props.value||e.tokenAddress===this.props.switchValue?"opac":""),onClick:t=>this.onChange(e,t),children:[Object(N.jsxs)("div",{className:"a-center",children:[Object(N.jsx)("img",{src:e.tokenLogoUrl,alt:"",onError:e=>{e.target.onerror=null,e.target.src=f.a}}),Object(N.jsxs)("div",{className:"searchRes left",children:[Object(N.jsxs)("span",{className:"item-content",children:[Object(O.p)(e.tokenSymbol,e.tokenAddress),this.props.fromPool?"":this.props.asInput?e.tokenAddress===this.props.value&&" (".concat(r.a.get("tokens.selected_as_input"),")")||e.tokenAddress===this.props.switchValue&&" (".concat(r.a.get("tokens.selected_as_output"),")"):e.tokenAddress===this.props.value&&" (".concat(r.a.get("tokens.selected_as_output"),")")||e.tokenAddress===this.props.switchValue&&" (".concat(r.a.get("tokens.selected_as_input"),")")]}),1===e.cst&&Object(N.jsxs)("div",{className:"item-content solor-detail",children:[Object(N.jsx)("span",{children:r.a.get("list.search_by_addr")}),Object(N.jsxs)("span",{className:"ib",onClick:t=>{t.stopPropagation(),this.addSolor(e)},children:["(",r.a.get("list.add"),")"]})]}),2===e.cst&&Object(N.jsxs)("div",{className:"item-content solor-detail",children:[Object(N.jsx)("span",{children:r.a.get("list.add_by_user")}),Object(N.jsxs)("span",{className:"solor-remove ib",onClick:t=>{t.stopPropagation(),this.removeSolor(e)},children:["(",r.a.get("list.remove_token"),")"]})]})]})]}),e.tokenAddress===m.a.trxFakeAddress?Object(N.jsx)("div",{children:Object(N.jsx)("p",{children:Object(O.o)(i[e.tokenAddress]?i[e.tokenAddress].balance:e.balance)})}):Object(N.jsxs)("div",{className:"inline-flex balanceAndAddr",children:[Object(N.jsx)("p",{children:i[e.tokenAddress]&&!isNaN(i[e.tokenAddress].balance)?Object(O.o)(i[e.tokenAddress].balance):"--"}),Object(N.jsx)("p",{children:Object(d.a)(window.navigator).any?Object(O.l)(e.tokenAddress,4,4):Object(O.l)(e.tokenAddress,8,10)})]})]},e.tokenAddress+t))):Object(N.jsx)("div",{className:"no-token-fund",children:r.a.getHTML("list.no_token_found")})}),Object(N.jsxs)("div",{className:"list-switch flexB",children:[Object(N.jsxs)("div",{className:"list-switch-name",children:[Object(N.jsx)("img",{src:e[t].logoURI,alt:""}),Object(N.jsx)("span",{children:e[t].name||""})]}),Object(N.jsx)("button",{className:"list-switch-btn",onClick:()=>this.showListModal(),children:r.a.get("list.switch")})]})]}):Object(N.jsx)(N.Fragment,{})},this.renderUpdateListItem=e=>{const{byUrlNew:t={}}=this.props.pool,{version:s={},uri:a}=e,o=t[a]||{},n=o.version||{},i=Object(O.h)(s,n),{success:l=!1}=Object(O.g)(e,o);return!c.a.isEqual(o,{})&&i&&l&&Object(N.jsx)(h.a.Item,{onClick:()=>{this.updateList(e)},children:r.a.get("list.update")})},this.adjustAndroid=e=>{let t=Object(O.e)(e);this.setState({adjust:t})},this.renderTokensCategory=()=>{const{customTokenUri:e,lang:t,errInfo:s}=this.state,{byUrl:a,selectedListUrl:o}=this.props.pool,n=this.getKeys(a);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("ul",{className:"list-list",children:[a&&n.length&&n.map((e=>{const s=a[e];return!s.rs&&Object(N.jsxs)("li",{className:"flex",children:[Object(N.jsxs)("div",{className:"drop-parent flexB w-80",children:[Object(N.jsxs)("div",{className:"left flex",children:[Object(N.jsx)("img",{src:s.logoURI,alt:"",className:"logo"}),Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"name",children:s.name}),Object(N.jsx)("div",{className:"source",children:Object(O.s)(s.uri)})]})]}),Object(N.jsx)(b.a,{trigger:"click",placement:"bottomRight",overlay:Object(N.jsx)(h.a,{children:Object(N.jsxs)(h.a.ItemGroup,{title:Object(N.jsxs)("div",{children:[Object(N.jsx)("span",{className:"key",children:r.a.get("list.version")}),Object(N.jsx)("span",{className:"value",children:Object(O.A)(s.version)})]}),children:[Object(N.jsxs)(h.a.Item,{children:[" ",Object(N.jsx)("a",{href:"".concat(m.a.justList,"?lang=").concat(t,"#/detail?uri=").concat(s.uri),target:s.uri||"_blank",children:r.a.get("list.view")})]}),this.renderUpdateListItem(s),s.uri!==o&&Object(N.jsx)(h.a.Item,{onClick:()=>{this.showRemoveModal(s)},children:r.a.get("list.remove")})]})}),children:Object(N.jsx)("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()})})]}),Object(N.jsx)("div",{className:"right",children:Object(N.jsx)("button",{className:String(o)===String(s.uri)?"selected":"",onClick:()=>this.selectTokenList(e),children:String(o)===String(s.uri)?r.a.get("list.selected"):r.a.get("list.select")})})]},s.name+"_"+e)})),Object(N.jsx)("div",{className:"list-more",children:Object(N.jsx)("a",{href:"en-US"===t?m.a.moreList.en:m.a.moreList.zh,target:"_blank",children:r.a.get("more.more")})})]}),Object(N.jsx)("div",{className:"list-add",children:Object(N.jsxs)("div",{className:"list-input-line flex",children:[Object(N.jsx)(j.a,{type:"text",className:"list-input w-80",placeholder:"https://",value:e,onChange:this.onTokenUriChange,onFocus:()=>this.adjustAndroid(!0),onBlur:()=>this.adjustAndroid(!1)}),Object(N.jsx)("div",{className:"right",children:Object(N.jsx)("button",{onClick:this.addCustomTokens,disabled:!e.trim(),children:r.a.get("list.add_list")})})]})}),!!s&&Object(N.jsxs)("div",{className:"list-add-errTip",children:[Object(N.jsx)("span",{className:"icon",children:"!"}),Object(N.jsx)("span",{className:"text",children:s})]}),Object(N.jsx)("div",{className:"list-footer",children:Object(N.jsx)("a",{href:"".concat(m.a.justList,"?lang=").concat(t,"#/home"),className:"link",target:"justList",children:r.a.get("list.view_list_home")})})]})},this.hideSolorModal=()=>{this.setState({solorModalVisible:!1})},this.state={lang:window.localStorage.getItem("lang")||r.a.options.currentLocale,modalVisible:!1,tokenStr:"",allTokenList:[],tokenList:[],tokenMap:{[m.a.trxFakeAddress]:{tokenAddress:m.a.trxFakeAddress,address:"",addressV1:"",addressV2:"",tokenSymbol:"TRX",tokenLogoUrl:v.a,tokenName:"TRX",tokenDecimal:m.a.trxDecimal,removeText:""}},defaultStatus:1,removeModalVisible:!1,removeText:"",removeId:"",solor:JSON.parse(window.localStorage.getItem("solor")||"[]"),customTokenUri:"",customTokenUriLeg:!0,errInfo:"",tokenSort:!1,solorModalVisible:!1,tokenBrief:{},checkStatus:!1,dealWarningVisible:!1,selectSearchItem:""}}render(){const{tokenList:e,tokenMap:t,tokenStr:s,allTokenList:a,defaultStatus:o,removeText:i,removeModalVisible:c,adjust:l,solorModalVisible:d,tokenBrief:p,checkStatus:h,dealWarningVisible:b,callbacks:j,selectSearchItem:m}=this.state,{value:g,tokenInfo:v}=this.props,{byUrl:w,selectedListUrl:_}=this.props.pool;return Object(N.jsxs)(n.a.Fragment,{children:[Object(N.jsx)("p",{className:"dragDown "+(this.props.disabled?"no-bg":""),onClick:this.showModal,children:g&&v?Object(N.jsxs)(n.a.Fragment,{children:[Object(N.jsx)("img",{src:v.tokenLogoUrl||f.a,alt:"",onError:e=>{e.target.onerror=null,e.target.src=f.a}}),Object(N.jsx)("span",{children:Object(O.p)(v.tokenSymbol,v.tokenAddress)})]}):r.a.get("tokens.add_choose_select")}),this.props.disabled?null:Object(N.jsx)(u.a,{title:1===o?Object(N.jsx)(S.a,{tip:r.a.get("tokens.add_choose_select_tip"),toolClass:"select-ib left",children:Object(N.jsx)("span",{className:"add-title",children:r.a.get("tokens.add_choose_select")})}):Object(N.jsxs)("div",{className:"list-modal-header",children:[Object(N.jsx)("img",{src:y.a,alt:"",onClick:()=>this.hideListModal()}),Object(N.jsx)("span",{className:"add-title",children:r.a.get("list.select_list")})]}),closable:!0,visible:this.state.modalVisible,onCancel:this.hideModal,className:"select-modal "+(1===o?"":"list-modal "+(l?"adjust":"")),footer:null,style:{marginLeft:Object(O.u)()},width:630,centered:!0,children:1===o?this.renderSelectedList(w,_,s,e,a):this.renderTokensCategory()}),Object(N.jsxs)(u.a,{title:"",closable:!1,visible:c,footer:null,style:{marginLeft:Object(O.D)()},width:420,className:"list-remove-modal",children:[Object(N.jsx)("div",{className:"title",children:r.a.get("list.remove_confirm")}),Object(N.jsx)("div",{className:"tips",children:r.a.get("list.remove_confirm_tip")}),Object(N.jsx)("input",{type:"text",className:"list-input w-80",value:i,onChange:this.inputRemoveText}),Object(N.jsxs)("div",{className:"btns",children:[Object(N.jsx)("button",{onClick:this.removeTokens,disabled:i.trim()!==T,children:r.a.get("list.confirm")}),Object(N.jsx)("button",{onClick:this.hideRemoveModal,children:r.a.get("list.cancel")})]})]}),Object(N.jsx)(u.a,{title:r.a.get("list.add_token"),closable:!1,visible:d,footer:null,style:{marginLeft:Object(O.D)(500)},width:525,className:"list-addtoken-modal",centered:!0,children:Object(N.jsxs)("div",{className:"solor-modal-body",children:[Object(N.jsxs)("div",{className:"tips",children:[Object(N.jsx)("div",{className:"tips1",children:r.a.get("list.add_token_tip1")}),Object(N.jsx)("div",{className:"tips1",children:r.a.get("list.add_token_tip2")}),Object(N.jsx)("div",{className:"tips1",children:r.a.get("list.add_token_tip3")})]}),Object(N.jsxs)("div",{className:"token-info flex",children:[Object(N.jsx)("div",{className:"logo",children:Object(N.jsx)("img",{src:p.tokenLogoUrl?p.tokenLogoUrl:f.a})}),Object(N.jsxs)("div",{className:"info",children:[Object(N.jsxs)("div",{className:"symbol",children:[p.tokenName,"(",Object(O.p)(p.tokenSymbol,p.tokenAddress),")"]}),Object(N.jsxs)("div",{className:"addr",children:[Object(N.jsx)("span",{children:p.tokenAddress}),Object(N.jsx)("span",{className:"pointer",title:p.tokenAddress,id:"copySpan",onClick:e=>{Object(O.k)(e,"5px","copySpan")},children:Object(N.jsx)(x.a,{})})]})]})]}),Object(N.jsx)("div",{className:"check-box"+(h?" checked":""),children:Object(N.jsx)(k.a,{onChange:this.changeCheckStatus,children:r.a.get("list.add_token_tip4")})}),Object(N.jsx)("div",{className:"btns",children:Object(N.jsx)("button",{onClick:this.comfirmContinue,className:h?"button-active":"",children:r.a.get("list.continue")})})]})}),b&&Object(N.jsx)(A.a,{visible:b,cb:j,dealWarningSymbol:p.tokenAddress||m.tokenAddress})]})}})||a;t.a=_},1475:function(e,t,s){"use strict";var a,o=s(0),n=s.n(o),i=s(39),c=s.n(i),l=s(196),r=s(253),d=s(775),p=s(11),h=s(1460),b=s(300),j=s(830),u=s(1039),k=s(944),m=s(1416),g=(s(109),s(4)),x=s(70),O=(s(940),s(426)),S=s(1444),f=s(296),v=s(301),y=s(945),w=s(891),A=s(16);let N=Object(r.b)("network")(a=Object(r.b)("pool")(a=Object(r.c)(a=class extends n.a.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=async()=>{try{this.props.pool.setData({addRef:this.toTokenRef});const e=setInterval((()=>{this.props.network.isConnected&&(this.timer=setInterval((()=>{this.selectedToken(this.props.pool.tokenInfo,!0)}),6e3),this.selectedToken(this.props.pool.tokenInfo,!1),clearInterval(e))}),1e3);this.getTokenBalance();const t=Object(l.a)(window.navigator).apple.device;this.setState({appleDevice:t}),await this.toTokenRef.current.setTokenList(),this.toTokenRef.current.setTokenAddress(this.props.pool.tokenInfo.tokenAddress)}catch(e){}},this.componentWillUnmount=()=>{clearInterval(this.timer)},this.initInputData=()=>{this.setState({tokenOneValueStr:"",tokenTwoValueStr:"",tokenOneValue:new g.a(0),tokenTwoValue:new g.a(0),versionChanged:!0},(()=>{this.selectedToken(this.props.pool.tokenInfo)}))},this.getTokenBalance=async()=>{if(this.props.network.isConnected){const{tokenInfo:e}=this.props.pool,t=this.props.network.defaultAccount,{fromToken:s}=this.state,a=(await Object(x.j)(t,[s.tokenAddress]))[0].div(new g.a(10).pow(s.tokenDecimal));if(a.eq(this.state.fromBalance)||this.setState({fromBalance:a,fromBalanceStr:a._toFixed(6,1)},(()=>{this.calcEh()})),e.tokenAddress){const s=(await Object(x.j)(t,[e.tokenAddress]))[0].div(new g.a(10).pow(e.tokenDecimal));isNaN(s.toNumber())||s.eq(this.state.toBalance)||this.setState({toBalance:s,toBalanceStr:s._toFixed(6,1)},(()=>{this.calcEh()}))}}},this.setInsufficient=(e,t,s)=>{e<=t?this.setState({insufficientBalance:""}):this.setState({insufficientBalance:s})},this.calcEh=()=>{const{tokenInfo:e,tokenDetail:t,selectTokenOne:s,tokenTwoFixed:a}=this.props.pool,{fromBalance:o,toBalance:n,noPoolBalance:i}=this.state;let c=Object(g.M)(document.querySelector(".token-sec-input-1").value),l=Object(g.M)(document.querySelector(".token-sec-input-2").value);if(c.gt(o)||c.lt(p.a.firstTRXLimit)&&0!==i&&!a?this.setState({insufficientBalance:s.tokenSymbol}):l.gt(n)||isNaN(n.toNumber())?this.setState({insufficientBalance:e.tokenSymbol}):this.setState({insufficientBalance:""}),c.gt(0)&&t.exTrx.gt(0)){let e=t.exTrx;this.setState({calcStatus:!0,shareOfPool:c.div(c.plus(e)).times(100)},(()=>{}))}else"--"===t.price1&&c.toNumber()>0&&l.toNumber()>0?this.setState({calcStatus:!0,shareOfPool:new g.a(100)}):this.setState({calcStatus:!1,shareOfPool:new g.a(0)})},this.setInputValue=(e,t,s)=>{let a;a=t?{num:new g.a(t.num),str:t.str,baseTwo:!1}:{num:new g.a(-1),str:"",baseTwo:!0};const{tokenInfo:o,tokenDetail:n}=this.props.pool,{tokenTwoValue:i,tokenOneValue:c,needCreate:l}=this.state;if(o.tokenAddress&&""!==o.tokenAddress&&"--"!==n.price1){if(2===e){let e=i;a.num.eq(-1)||(e=a.num);let t=e.times(n.price1)._toFixed(p.a.trxDecimal,1);const{fromBalance:o}=this.state;Object(g.M)(t).gt(o)&&s?this.setMaxFrom("TRX"):this.setState({tokenTwoValue:e,tokenTwoValueStr:Object(g.c)(a.str||i.toString()),tokenOneValue:Object(g.M)(t),tokenOneValueStr:Object(g.c)(t)},(()=>{this.calcEh()}))}else if(1===e){let e=c;a.num.eq(-1)||(e=a.num);let t=e.div(n.price1),i="";t.gt(0)&&(i=t._toFixed(Number(o.tokenDecimal),1));let l=a.str||c.toString();const{toBalance:r}=this.state;Object(g.M)(i).gt(r)&&s?this.setMaxFrom("token"):this.setState({tokenOneValue:e,tokenOneValueStr:Object(g.c)(l),tokenTwoValue:Object(g.M)(i),tokenTwoValueStr:Object(g.c)(i)},(()=>{this.calcEh()}))}}else 1===e&&this.setState({tokenOneValue:a.num,tokenOneValueStr:Object(g.c)(a.str)},(()=>{this.calcEh()})),2===e&&this.setState({tokenTwoValue:a.num,tokenTwoValueStr:Object(g.c)(a.str)},(()=>{this.calcEh()}))},this.initTokenDetail=e=>{this.props.pool.setData({tokenDetail:{trx:new g.a(0),value:new g.a(0),tokens:new g.a(0),price1:"--",price2:"--",exTrx:new g.a(0),totalSupply:new g.a(0)}}),"createdNoBalance"!==e&&this.setState({createTxt:c.a.get("pool.create_pair_btn"),createState:"",approveTxt:c.a.get("pool.add_approve_btn"),approveState:"",supplyTxt:c.a.get("pool.add_supply_btn"),supplyState:""})},this.selectedToken=async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.tokenAddress)return;const a={...e};let{fromOrTo:o,tokenOneValue:n,tokenOneValueStr:i,tokenTwoValue:c,tokenTwoValueStr:l}=t.state;if(s||(o=0,n=new g.a(0),c=new g.a(0),i="",l="",t.setState({tokenOneValueStr:i,tokenTwoValueStr:l,tokenOneValue:n,tokenTwoValue:c,fromOrTo:0,calcStatus:!1}),t.props.pool.setData({tokenInfo:{...a,address:""}})),1!==o||t.state.versionChanged){if(2===o&&!t.state.versionChanged&&!c.gt(0))return}else if(!n.gt(0))return;if(!t.props.network.isConnected)return;const r=t.props.network.defaultAccount,{exchangeAddr:d,allowance:h,exTokenBalance:b,exTrxBalance:j,totalLiquidity:u,userLiquidity:k,userTrxBalance:m,userTokenBalance:O,success:S}=await Object(x.n)(r,a.tokenAddress);if(s||t.props.pool.setData({tokenInfo:{...a,address:d}}),S)if(d){if(t.setState({networkError:!1}),s){let e=!0;t.state.approvedAmount.gte(t.state.tokenTwoValue)&&(e=!1),t.setState({poolIsExist:0,needApprove:e})}else t.setState({poolIsExist:0,noPoolBalance:0,needCreate:!1}),t.setState({poolIsExist:0,approvedAmount:h.div(new g.a(10).pow(a.tokenDecimal))});let e="--",o="--";if(u.gt(0)){const n=j.div(new g.a(10).pow(p.a.trxDecimal)),i=b.div(new g.a(10).pow(a.tokenDecimal));e=n.div(i),o=i.div(n),s&&t.setInputValue(t.state.fromOrTo);let{tokenInfo:c}=t.props.pool;(c.address===d||t.state.versionChanged)&&(t.setState({noPoolBalance:0}),t.props.pool.setData({tokenDetail:{trx:new g.a(m).div(new g.a(10).pow(p.a.trxDecimal)),value:new g.a(O).div(new g.a(10).pow(a.tokenDecimal)),tokens:new g.a(k).div(new g.a(10).pow(p.a.trxDecimal)),totalSupply:new g.a(u).div(new g.a(10).pow(p.a.trxDecimal)),price1:e,price2:o,exTrx:n,exToken:i}}))}else t.setState({noPoolBalance:1}),s||t.initTokenDetail("createdNoBalance")}else t.setState({networkError:!1}),t.setState({poolIsExist:1,noPoolBalance:-1,needCreate:!0}),s||t.initTokenDetail();else t.setState({networkError:!0});t.getTokenBalance()},this.judgeIssues=async(e,t,s)=>{this.state.fromOrTo=t;const{fromBalanceStr:a}=this.state;let{selectTokenOne:o,tokenInfo:n}=this.props.pool,i={};if(e){let s=6;s=1===t?6:n.tokenDecimal;const{valid:a,str:o}=Object(g.E)((""+e).replace(/,/g,""),s);if(!a)return;e=o,i.num=o,i.str=e}let c=a;""!==e?""===n.tokenSymbol?(1===t&&(this.setState({tokenTwoValue:new g.a(0),tokenOneValue:new g.a(i.num),tokenOneValueStr:Object(g.c)(e),tokenTwoValueStr:""}),this.setInsufficient(i.num,c,o.tokenSymbol)),2===t&&this.setState({tokenOneValue:new g.a(0),tokenTwoValue:new g.a(i.num),tokenTwoValueStr:Object(g.c)(e),tokenOneValueStr:""})):(1===t&&this.setState({tokenOneValue:new g.a(i.num),tokenOneValueStr:Object(g.c)(e)}),2===t&&this.setState({tokenTwoValue:new g.a(i.num),tokenTwoValueStr:Object(g.c)(e)}),this.setInputValue(t,i,s)):(this.setState({calcStatus:!1,shareOfPool:new g.a(0)}),this.setState({tokenTwoValue:new g.a(0),tokenOneValue:new g.a(0),tokenOneValueStr:"",tokenTwoValueStr:""}))},this.setMaxFrom=e=>{let{fromBalance:t,toBalance:s,poolIsExist:a,noPoolBalance:o,needCreate:n}=this.state;const{tokenInfo:i}=this.props.pool;let c=t;c.gt(0)&&s.gt(0)||(c=Object(g.a)(0),s=Object(g.a)(0)),"TRX"===e?((1!==a&&1!==o||""===i.tokenAddress)&&this.setState({tokenTwoValue:s,tokenTwoValueStr:Object(g.c)(s.toString())}),this.setState({tokenOneValue:c,tokenOneValueStr:Object(g.c)(c.toString())},(()=>{this.calcEh()})),s.gt(0)&&this.judgeIssues(c,1,!0)):"token"===e&&((1!==a&&1!==o||""===i.tokenAddress)&&this.setState({tokenOneValue:c,tokenOneValueStr:Object(g.c)(c.toString())}),this.setState({tokenTwoValue:s,tokenTwoValueStr:Object(g.c)(s.toString())},(()=>{this.calcEh()})),s.gt(0)&&this.judgeIssues(s,2,!0))},this.exchangeInfo=()=>{const{poolIsExist:e,shareOfPool:t,noPoolBalance:s,tokenOneValue:a,tokenTwoValue:o}=this.state,{tokenInfo:i,tokenDetail:l}=this.props.pool;let r="--",d="--";"--"!==l.price1&&(r=l.price1._toFixed(4,1)),"--"!==l.price2&&(d=l.price2._toFixed(4,1)),o.gt(0)&&a.gt(0)&&(1===e||1===s)&&(r=a.div(o),d=o.div(a));let p="--",h="--";p="--"===r?r:Object(g.a)(r).lt(1e-4)?"< 0.0001":Object(g.a)(r)._toFixed(4,1),"--"===d||(h=Object(g.a)(d).lt(1e-4)?"< 0.0001":Object(g.a)(d)._toFixed(4,1));let b=t._toFixed(2,1);return isNaN(b)?b="--":t.gt(0)&&t.lt(.01)&&(b="<0.01"),Object(A.jsxs)(n.a.Fragment,{children:[Object(A.jsxs)("div",{className:"flex justify-content price-chart-wrap align-items-center",style:{paddingBottom:0,paddingTop:"20px"},children:[Object(A.jsxs)("div",{className:"token-pairs",children:[Object(A.jsxs)("div",{children:[c.a.get("swap.detail_token_info")," "]}),Object(A.jsx)("div",{children:Object(A.jsx)(n.a.Fragment,{children:Object(g.P)(Object(A.jsxs)(n.a.Fragment,{children:[Object(A.jsx)("img",{src:i.tokenLogoUrl?i.tokenLogoUrl:f.a,alt:"logo",onError:e=>{e.target.onerror=null,e.target.src=f.a}}),Object(A.jsx)("span",{children:Object(g.p)(i.tokenSymbol,i.tokenAddress)})]}),i.tokenAddress)})})]}),Object(A.jsx)(m.a,{token:Object(g.p)(i.tokenSymbol,i.tokenAddress),token_adddress:i.tokenAddress})]}),Object(A.jsxs)("div",{children:[Object(A.jsxs)("div",{className:"action-info",children:[Object(A.jsx)("div",{className:"info-title",children:1===e||1===s?c.a.get("pool.create_initial_title"):c.a.get("pool.add_price_title")}),Object(A.jsxs)("div",{className:"info-detail flex",children:[Object(A.jsxs)("div",{className:"left",children:[Object(A.jsx)("p",{children:c.a.get("pool.add_unit_text",{toToken:i.tokenSymbol?Object(g.p)(i.tokenSymbol,i.tokenAddress):"--",fromToken:"TRX"})}),Object(A.jsx)("p",{children:p})]}),Object(A.jsxs)("div",{className:"left",children:[Object(A.jsx)("p",{children:c.a.get("pool.add_unit_text",{toToken:"TRX",fromToken:i.tokenSymbol?Object(g.p)(i.tokenSymbol,i.tokenAddress):"--"})}),Object(A.jsx)("p",{children:h})]}),Object(A.jsxs)("div",{className:"right",children:[Object(A.jsx)("p",{children:c.a.get("pool.add_share_text")}),Object(A.jsxs)("p",{children:[b,"%"]})]})]})]}),1===e||1===s?null:Object(A.jsxs)("div",{className:"action-info",children:[Object(A.jsxs)("div",{className:"info-title flex between",children:[Object(A.jsx)("span",{children:c.a.get("pool.base_posi_title")}),Object(A.jsxs)("p",{className:"yourPosi",children:[Object(A.jsx)("img",{src:v.a,alt:""}),Object(A.jsx)("img",{src:i.tokenLogoUrl||f.a,onError:e=>{e.target.onerror=null,e.target.src=f.a},alt:""}),Object(A.jsx)("span",{children:"TRX"}),Object(A.jsx)("span",{className:"symbol",children:"/"}),Object(A.jsx)("span",{children:i.tokenSymbol?Object(g.p)(i.tokenSymbol,i.tokenAddress):"--"})]})]}),Object(A.jsxs)("div",{className:"info-detail flex",children:[Object(A.jsxs)("div",{className:"left",children:[Object(A.jsx)("p",{children:"TRX"}),Object(A.jsx)("p",{children:l.trx.lt(1e-4)&&l.trx.gt(0)?"<0.0001":l.trx._toFixed(4,1)})]}),Object(A.jsxs)("div",{className:"left",children:[Object(A.jsx)("p",{children:i.tokenSymbol?Object(g.p)(i.tokenSymbol,i.tokenAddress):"--"}),Object(A.jsx)("p",{children:l.value.lt(1e-4)&&l.value.gt(0)?"<0.0001":l.value._toFixed(4,1)})]}),Object(A.jsxs)("div",{className:"right",children:[Object(A.jsx)("p",{children:c.a.get("pool.add_tokens_text")}),Object(A.jsx)("p",{children:l.tokens.lt(1e-4)&&l.tokens.gt(0)?"<0.0001":l.tokens._toFixed(4,1)})]})]})]})]})]})},this.showSettingModal=()=>{this.props.network.setData({settingVisible:!0})},this.setLiq=e=>{this.props.pool.setData({actionLiqV2:e})},this.retryGetExchange=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(s>10)return"";const a=await Object(x.m)(e);return a||(await new Promise((e=>{setTimeout((()=>{e()}),1e3)})),t.retryGetExchange(e,s+1))},this.createPair=async()=>{const{tokenInfo:e}=this.props.pool,t={title:"pair_actions.create",obj:{trx:"TRX",tokenSymbol:Object(g.p)(e.tokenSymbol,e.tokenAddress)}};await Object(x.i)(e.tokenAddress,t)?this.setState({createActionState:"pending",actionInfo:c.a.get("action.doingBtn"),actionDisabled:!0,actionStarted:!0},(()=>{setTimeout((async()=>{const t=await this.retryGetExchange(e.tokenAddress);t?(this.props.pool.setData({tokenInfo:{...e,address:t}}),this.setState({createActionState:"success",approveActionState:"start"},(()=>{this.setApprove()}))):this.setState({createActionState:"failed",actionRetry:"createPair",actionInfo:c.a.get("action.retryBtn"),actionDisabled:!1})}),5e3)})):this.setState({createActionState:"error",actionRetry:"createPair",actionInfo:c.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0})},this.setApprove=async()=>{const{tokenInfo:e}=this.props.pool,t={title:"pool.add_approve_token",obj:{token:Object(g.p)(e.tokenSymbol,e.tokenAddress)}};await Object(x.e)(e.tokenAddress,e.address,t)?this.setState({approveActionState:"pending",actionInfo:c.a.get("action.doingBtn"),actionDisabled:!0,actionStarted:!0},(()=>{setTimeout((()=>{this.setState({approveActionState:"success",actionState:"info"})}),5e3)})):this.setState({approveActionState:"error",actionRetry:"setApprove",actionInfo:c.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0})},this.beforeSupplyLiquidity=async()=>{this.setState({actionStarted:!0,supplyPopBtn:c.a.get("action.startBtn"),supplyPopBtnDisabled:!0},(()=>{this.supplyLiquidity()}))},this.supplyLiquidity=async()=>{const{tokenOneValue:e,tokenTwoValue:t,needApprove:s}=this.state,{tokenInfo:a,tokenDetail:o}=this.props.pool;let n,i,{settingSlippage:l}=this.props.network;l=Number(l);let r=e.times(1e6),d=t.times(new g.a(10).pow(a.tokenDecimal));o.exTrx.eq(0)?(n=r,i=d):(n="0x".concat(e.times(o.totalSupply).div(o.exTrx).times(1-l/100).times(new g.a(10).pow(p.a.trxDecimal)).integerValue(g.a.ROUND_DOWN).toString(16)),i="0x".concat(e.times(o.exToken).div(o.exTrx).times(1+l/100).times(new g.a(10).pow(a.tokenDecimal)).integerValue(g.a.ROUND_DOWN).toString(16)));const h={title:"pair_actions.add",obj:{trxAmount:Object(g.n)(e.toString(),6),trx:"TRX",tokenAmount:Object(g.n)(t.toString(),o.tokenDecimal),tokenSymbol:Object(g.p)(a.tokenSymbol,a.tokenAddress)}},b=this.state.tokenOneValueStr,j=this.state.tokenTwoValueStr;if(await Object(x.b)(a.address,n.toString(),i.toString(),await Object(x.g)(this.props.network.settingDeadline),r.toString(),h)){let e={supplyErrorInfo:"",supplyPopBtn:c.a.get("action.doingBtn"),supplyPopBtnDisabled:!0,actionStarted:!0};s&&(e={actionInfo:c.a.get("action.doingBtn"),actionDisabled:!0,supplyActionState:"pending",actionState:"line",actionStarted:!0}),this.setState(e,(()=>{setTimeout((async()=>{this.setState({tokenOneValue:new g.a(0),tokenOneValueStr:"",tokenTwoValue:new g.a(0),tokenTwoValueStr:"",successOneValueStr:b,successTwoValueStr:j,actionRetry:"",actionState:"success",actionStarted:!1})}),5e3)}))}else{let e={supplyErrorInfo:c.a.get("action.supplyActErr"),supplyPopBtn:c.a.get("action.retryBtn"),supplyPopBtnDisabled:!1,actionStarted:!0};s&&(e={actionState:"line",supplyActionState:"error",actionRetry:"supplyLiquidity",actionInfo:c.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0}),this.setState(e)}},this.initAddModal=()=>{const{tokenInfo:e}=this.props.pool;let t=!0;return this.state.approvedAmount.gte(this.state.tokenTwoValue)&&(t=!1),{needApprove:t,supplyPopBtn:c.a.get("pool.popup_supply_btn"),supplyPopBtnDisabled:!1,supplyErrorInfo:"",createActionTitle:c.a.get("action.createAct",{token:Object(g.p)(e.tokenSymbol,e.tokenAddress)}),createActionError:c.a.get("action.createActErr"),createActionFailed:c.a.get("action.createActFailed"),createActionState:"",approveActionTitle:c.a.get("action.approveAct",{token:Object(g.p)(e.tokenSymbol,e.tokenAddress)}),approveActionError:c.a.get("action.approveActErr"),approveActionState:"",supplyActionTitle:c.a.get("action.supplyAct"),supplyActionError:c.a.get("action.supplyActErr"),supplyActionState:"",actionInfo:c.a.get("action.startBtn"),actionDisabled:!0,actionRetry:"",actionState:t?"line":"info",actionStarted:!1,successOneValueStr:"",successTwoValueStr:"",miniPopVisible:!1}},this.showAddModal=()=>{this.setState({...this.initAddModal(),addVisible:!0},(()=>{this.onRetryAction()}))},this.beforeHideAddModal=()=>{this.state.actionStarted?this.setState({miniPopVisible:!0}):this.hideAddModal()},this.hideAddModal=()=>{this.setState({addVisible:!1},(()=>{setTimeout((()=>{this.setState({...this.initAddModal()})}),1e3)}))},this.miniPopOk=()=>{const e=this.state.needApprove;this.setState({miniPopVisible:!1},(async()=>{if(this.hideAddModal(),e){const e=this.props.pool.tokenInfo,t=this.props.network.defaultAccount,{exchangeAddr:s,allowance:a}=await Object(x.n)(t,e.tokenAddress);let o=!0;s&&(o=!1),this.setState({needCreate:o,approvedAmount:a.div(new g.a(10).pow(e.tokenDecimal))})}}))},this.miniPopCancel=()=>{this.setState({miniPopVisible:!1})},this.gotoPool=()=>{this.props.pool.setData({actionLiqV2:0})},this.onRetryAction=()=>{const e=this.state.needCreate,t=this.state.needApprove;let s=this.state.actionRetry;switch(!s&&e&&(s="createPair"),!s&&t&&(s="setApprove"),s){case"createPair":this.setState({createActionState:"start",actionInfo:c.a.get("action.startBtn"),actionDisabled:!0},(()=>{this.createPair()}));break;case"setApprove":this.setState({approveActionState:"start",actionInfo:c.a.get("action.startBtn"),actionDisabled:!0},(()=>{this.setApprove()}));break;case"supplyLiquidity":this.setState({swapActionState:"start",actionInfo:c.a.get("action.startBtn"),actionDisabled:!1},(()=>{this.supplyLiquidity()}))}},this.useSafeMax=()=>{const{tokenInfo:e}=this.props.pool,{poolIsExist:t,fromBalanceStr:s,noPoolBalance:a}=this.state,o=(1===t||1===a)&&""!==e.tokenAddress?p.a.createFeeAmount:p.a.addFeeAmount,n=Object(g.c)(Object(g.M)(s).minus(o));this.judgeIssues(n,1)},this.addLiquidityDisableChange=e=>{this.setState({disableAdd:e})},this.toTokenRef=n.a.createRef(),this.state={fromToken:{tokenSymbol:"TRX",tokenAddress:p.a.trxFakeAddress,tokenDecimal:p.a.trxDecimal,trxBalance:new g.a(0),tokenBalance:new g.a(0)},calcStatus:!1,insufficientBalance:"",fromBalance:new g.a(-1),fromBalanceStr:"--",toBalance:new g.a(-1),toBalanceStr:"--",poolIsExist:-1,noPoolBalance:-1,shareOfPool:new g.a(0),approvedAmount:new g.a(0),tokenOneValueStr:"",tokenTwoValueStr:"",tokenOneValue:new g.a(0),tokenTwoValue:new g.a(0),tokenMap:{[p.a.trxFakeAddress]:{tokenAddress:p.a.trxFakeAddress,address:"",tokenSymbol:"TRX",tokenLogoUrl:p.a.trxLogoUrl,tokenName:"TRX",tokenDecimal:p.a.trxDecimal}},addVisible:!1,createTxt:c.a.get("pool.create_pair_btn"),createState:"",approveTxt:c.a.get("pool.add_approve_btn"),approveState:"",supplyTxt:c.a.get("pool.add_supply_btn"),supplyState:"",createAddr:"",fromOrTo:0,appleDevice:!1,needCreate:!0,needApprove:!0,supplyPopBtn:"",supplyPopBtnDisabled:!1,supplyErrorInfo:"",createActionTitle:"",createActionError:"",createActionFailed:"",createActionState:"",approveActionTitle:"",approveActionError:"",approveActionState:"",supplyActionTitle:"",supplyActionError:"",supplyActionState:"",actionInfo:"",actionDisabled:!1,actionRetry:"",actionState:"",actionStarted:!1,successOneValueStr:"",successTwoValueStr:"",miniPopVisible:!1,versionChanged:!1,status:!1,disableAdd:!1}}componentDidUpdate(e){e.pool.actionLiqV2!=this.props.pool.actionLiqV2&&1===Number(this.props.pool.actionLiqV2)&&this.props.pool.setData({addRef:this.toTokenRef})}render(){const{calcStatus:e,insufficientBalance:t,shareOfPool:s,poolIsExist:a,fromBalanceStr:o,toBalanceStr:n,tokenOneValue:i,tokenTwoValue:r,addVisible:m,noPoolBalance:x,tokenOneValueStr:v,tokenTwoValueStr:N,successOneValueStr:T,successTwoValueStr:_,status:C,networkError:V}=this.state,{tokenTwoFixed:L,tokenInfo:D,selectTokenOne:I,tokenDetail:B}=this.props.pool;let{settingSlippage:M}=this.props.network,F=i._toFixed(4,1),E=r.div(i),P=i.div(r);B.exTrx.gt(0)&&(F=i.times(B.totalSupply).div(B.exTrx)._toFixed(p.a.trxDecimal,1),E=B.price2,P=B.price1);let R=s._toFixed(2,1);isNaN(R)?R="--":s.gt(0)&&s.lt(.01)&&(R="<0.01");let U="";t&&(U=c.a.get("pool.add_insufficient_btn",{value:t}));const q=(1===a||1===x)&&""!==D.tokenAddress,W=q?p.a.createFeeAmount:p.a.addFeeAmount;q?i.lt(p.a.createFeeAmount)&&(U=c.a.get("pool.less_than_btn",{value:p.a.createFeeAmount})):i.lt(p.a.firstTRXLimit)&&0!==x&&(U=c.a.get("pool.less_than_btn",{value:p.a.firstTRXLimit}));let H="";U&&(H=U),e||(H=c.a.get("pool.add_enter_btn"));let X=null;return X=setTimeout((()=>{this.setState({status:!0}),clearTimeout(X)}),3e3),Object(A.jsxs)("section",{className:"action-content",children:[Object(A.jsx)(w.a,{callback:this.addLiquidityDisableChange}),Object(A.jsxs)("header",{className:"flex",children:[Object(A.jsx)("span",{className:"return ib",onClick:e=>this.setLiq(0),children:Object(A.jsx)("img",{src:O.a,alt:"back"})}),Object(A.jsx)(b.a,{titleClass:"add-title",children:c.a.get("pool.add_addLiq_title"),tip:c.a.get("pool.add_addLiq_title_tip"),toolClass:"pool-add-tool",tail:!0,placement:l.a?"left":"bottom"})]}),V&&Object(A.jsx)("p",{className:"fz14 red mb20",children:c.a.get("pool.network_error")}),q&&Object(A.jsxs)("div",{className:"first-pool-copy",children:[Object(A.jsx)("div",{className:"bold fz14 black first-pool-title",children:c.a.get("pool.create_firstProv_bold")}),i.lt(p.a.createFeeAmount)&&Object(A.jsx)("p",{className:"fz14 first-pool-tip red",children:c.a.get("pool.less_than",{value:p.a.createFeeAmount})}),Object(A.jsx)("p",{className:"fz14 first-pool-tip",children:c.a.get("pool.create_first_tip1")})]}),Object(A.jsxs)("div",{className:"flex token-sec",children:[Object(A.jsxs)("div",{className:"input",children:[Object(A.jsx)("p",{children:c.a.get("pool.add_input_text")}),Object(A.jsx)("input",{type:"type",className:"token-sec-input token-sec-input-1",placeholder:c.a.get("pool.add_placeholder_text"),onChange:e=>this.judgeIssues(e.target.value,1),value:v})]}),Object(A.jsxs)("div",{className:"select",children:[Object(A.jsxs)("p",{children:[Object(A.jsxs)("span",{className:"tag",children:[c.a.get("pool.add_balance_text"),": "]}),Object(A.jsx)("span",{className:"balance",children:Object(g.a)(o).gte(0)?Object(g.o)(o,{dp:6,cutZero:!0}):"--"})]}),Object(A.jsxs)("div",{className:"input-max",children:[this.props.network.isConnected?Object(A.jsx)("span",{className:"link",onClick:e=>this.setMaxFrom("TRX",{firstAdd:!0}),children:c.a.get("swap.input_from_max")}):null,Object(A.jsx)(h.a,{disabled:!0,value:I.tokenAddress,tokenInfo:I,fromPool:!0})]})]})]}),C&&"TRX"===I.tokenSymbol&&v?Object(g.M)(o).lt(W)?Object(A.jsx)("div",{className:"safe-amount-tip",children:c.a.getHTML("list.trx_tip_3",{value:W})}):Object(g.M)(o).minus(W).lt(Object(g.M)(v))?Object(A.jsxs)("div",{className:"safe-amount-tip",children:[c.a.getHTML("list.trx_tip_1",{value:W})," ",Object(A.jsx)("em",{onClick:this.useSafeMax,children:c.a.get("list.trx_tip_2")})]}):null:null,Object(A.jsxs)("div",{className:"plusBtn flex between",children:[Object(A.jsx)("img",{src:S.a,alt:"plus"}),Object(A.jsx)("span",{className:"link",onClick:this.showSettingModal,children:c.a.get("pool.add_set_link")})]}),Object(A.jsxs)("div",{className:"flex token-sec",children:[Object(A.jsxs)("div",{className:"input",children:[Object(A.jsx)("p",{children:c.a.get("pool.add_input_text")}),Object(A.jsx)("input",{type:"type",className:"token-sec-input token-sec-input-2",placeholder:c.a.get("pool.add_placeholder_text"),onChange:e=>this.judgeIssues(e.target.value,2),value:N})]}),Object(A.jsxs)("div",{className:"select",children:[Object(A.jsxs)("p",{children:[Object(A.jsxs)("span",{className:"tag",children:[c.a.get("pool.add_balance_text"),": "]}),Object(A.jsx)("span",{className:"balance",children:Object(g.a)(n).gte(0)?Object(g.o)(n,{dp:6,cutZero:!0}):"--"})]}),Object(A.jsxs)("div",{className:"input-max",children:[this.props.network.isConnected?Object(A.jsx)("span",{className:"link",onClick:e=>this.setMaxFrom("token"),children:c.a.get("swap.input_from_max")}):null,Object(A.jsx)(h.a,{onChange:this.selectedToken,fromPool:!0,appleDevice:this.state.appleDevice,disabled:L,address:this.props.network.defaultAccount,value:D.tokenAddress,tokenInfo:D,ref:this.toTokenRef})]})]})]}),""!==D.tokenAddress&&D.tokenAddress.length>0?this.exchangeInfo():null,Object(A.jsx)("div",{className:"action-btns",children:this.props.network.isConnected?H?Object(A.jsx)(j.a,{type:"single",disabled:!0,info:H}):Object(A.jsx)(j.a,{type:"single",disabled:this.state.disableAdd,info:this.state.disableAdd?c.a.get("not_available"):c.a.get("pool.add_supply_btn"),onClick:this.showAddModal}):Object(A.jsx)(j.a,{type:"single",info:c.a.get("pool.add_connect_btn"),onClick:e=>{this.props.network.connectWallet()}})}),Object(A.jsxs)(d.a,{title:null,closable:"success"!==this.state.actionState,visible:m,onCancel:this.beforeHideAddModal,className:"pool-modal add-gai",footer:null,style:{marginLeft:Object(g.u)()},width:630,centered:!0,children:["line"===this.state.actionState&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:"title normal",children:c.a.get("swap.action_supply")}),Object(A.jsxs)("div",{className:"ib-parent center",children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{className:"add-value",children:v}),Object(A.jsx)("span",{className:"add-token",children:Object(g.p)(I.tokenSymbol,I.tokenAddress)})]}),Object(A.jsx)("span",{className:"plus",children:"+"}),Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{className:"add-value",children:N}),Object(A.jsx)("span",{className:"add-token",children:Object(g.p)(D.tokenSymbol,D.tokenAddress)})]})]}),Object(A.jsx)("div",{className:"supplyLineTitle",children:c.a.get("action.supplyLineTitle")}),this.state.needCreate?Object(A.jsxs)(u.a,{children:[Object(A.jsx)("span",{status:this.state.createActionState,err:this.state.createActionError,failed:this.state.createActionFailed,children:this.state.createActionTitle}),Object(A.jsx)("span",{status:this.state.approveActionState,err:this.state.approveActionError,children:this.state.approveActionTitle}),Object(A.jsx)("span",{status:this.state.supplyActionState,err:this.state.supplyActionError,children:this.state.supplyActionTitle})]}):Object(A.jsxs)(u.a,{children:[Object(A.jsx)("span",{status:this.state.approveActionState,err:this.state.approveActionError,children:this.state.approveActionTitle}),Object(A.jsx)("span",{status:this.state.supplyActionState,err:this.state.supplyActionError,children:this.state.supplyActionTitle})]}),Object(A.jsx)(j.a,{type:"single",disabled:this.state.actionDisabled,info:this.state.actionInfo,onClick:this.onRetryAction})]}),"info"===this.state.actionState&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{children:c.a.get("pool.popup_receive_title")}),Object(A.jsxs)("div",{className:"amount",children:[Object(A.jsxs)("div",{className:"center",children:[Object(A.jsx)("p",{className:"amount-num",children:Object(g.o)(F,{dp:p.a.trxDecimal,cutZero:!0})}),Object(A.jsx)("p",{className:"amount-name",children:Object(A.jsx)("span",{children:Object(g.p)(I.tokenSymbol,I.tokenAddress)+"/"+Object(g.p)(D.tokenSymbol,D.tokenAddress)+" "+c.a.get("pool.popup_tokens_text")})})]}),Object(A.jsx)("p",{className:"amount-tip left",children:c.a.get("pool.popup_receive_tip",{value:M})})]}),Object(A.jsxs)("div",{className:"price",children:[Object(A.jsxs)("p",{className:"flex param",children:[Object(A.jsx)("span",{className:"price-key",children:Object(g.p)(I.tokenSymbol,I.tokenAddress)+" "+c.a.get("pool.popup_deposited_text")}),Object(A.jsxs)("span",{className:"price-value",children:[Object(A.jsx)("img",{src:I.tokenLogoUrl,alt:""}),Object(A.jsx)("span",{children:i.toString()})]})]}),Object(A.jsxs)("p",{className:"flex param",children:[Object(A.jsx)("span",{className:"price-key",children:Object(g.p)(D.tokenSymbol,D.tokenAddress)+" "+c.a.get("pool.popup_deposited_text")}),Object(A.jsxs)("span",{className:"price-value",children:[Object(A.jsx)("img",{src:D.tokenLogoUrl||f.a,alt:"",onError:e=>{e.target.onerror=null,e.target.src=f.a}}),Object(A.jsx)("span",{children:r.toString()})]})]}),Object(A.jsxs)("div",{className:"flex param",children:[Object(A.jsx)("span",{className:"price-key",children:c.a.get("pool.popup_rates_text")}),Object(A.jsxs)("div",{className:"price-value ib",children:[Object(A.jsxs)("p",{children:["1 ",Object(g.p)(I.tokenSymbol,I.tokenAddress)," ="," ",Object(g.a)(1).div(Object(g.a)(10).pow(Number(D.tokenDecimal))).gt(E)?"< "+Object(g.a)(1).div(Object(g.a)(10).pow(Number(D.tokenDecimal))).toString():E._toFixed(Number(D.tokenDecimal))," ",Object(g.p)(D.tokenSymbol,D.tokenAddress)]}),Object(A.jsxs)("p",{children:["1 ",Object(g.p)(D.tokenSymbol,D.tokenAddress)," ="," ",Object(g.a)(1).div(Object(g.a)(10).pow(Number(p.a.trxDecimal))).gt(P)?"< "+Object(g.a)(1).div(Object(g.a)(10).pow(Number(p.a.trxDecimal))).toString():P._toFixed(Number(p.a.trxDecimal))," ",Object(g.p)(I.tokenSymbol,I.tokenAddress)]})]})]}),Object(A.jsxs)("div",{className:"flex between mb30",children:[Object(A.jsx)("div",{className:"share-title",children:c.a.get("pool.popup_share_text")}),Object(A.jsxs)("div",{className:"v-right",children:[R,"%"]})]})]}),this.state.supplyErrorInfo&&Object(A.jsx)("div",{className:"errorMsg",children:this.state.supplyErrorInfo}),Object(A.jsx)(j.a,{type:"single",disabled:this.state.supplyPopBtnDisabled,info:this.state.supplyPopBtn,onClick:this.beforeSupplyLiquidity})]}),"success"===this.state.actionState&&Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("div",{className:"modal-success",children:[Object(A.jsx)("img",{src:y.a,alt:""}),Object(A.jsx)("div",{className:"title green",children:c.a.get("action.supplySuccessTitle")}),Object(A.jsxs)("div",{className:"ib-parent center mb40",children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{className:"add-value",children:T}),Object(A.jsx)("span",{className:"add-token",children:Object(g.p)(I.tokenSymbol,I.tokenAddress)})]}),Object(A.jsx)("span",{className:"plus",children:"+"}),Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{className:"add-value",children:_}),Object(A.jsx)("span",{className:"add-token",children:Object(g.p)(D.tokenSymbol,D.tokenAddress)})]})]}),Object(A.jsx)(j.a,{type:"single",info:c.a.get("action.closeBtn"),onClick:this.gotoPool}),Object(A.jsx)("div",{className:"supplyDescTitle",children:c.a.get("action.supplyDescTitle")})]})})]}),Object(A.jsx)(k.a,{visible:this.state.miniPopVisible,confirm:this.miniPopOk,cancel:this.miniPopCancel})]})}})||a)||a)||a;t.a=N},1532:function(e,t,s){"use strict";s.r(t);var a,o=s(0),n=s.n(o),i=s(253),c=s(1475),l=s(16);let r=Object(i.b)("network")(a=Object(i.c)(a=class extends n.a.Component{render(){return Object(l.jsx)("div",{children:Object(l.jsx)(c.a,{})})}})||a)||a;t.default=r},830:function(e,t,s){"use strict";var a=s(0),o=s.n(a),n=(s(39),s(196),s(885),s(16));class i extends o.a.Component{constructor(e){super(e),this.onClick=()=>{this.props.disabled||this.props.state||this.props.onClick&&this.props.onClick()},this.onLeftClick=()=>{this.props.lDisabled||this.props.lState||this.props.onLeftClick&&this.props.onLeftClick()},this.onMiddleClick=()=>{this.props.mDisabled||this.props.mState||this.props.onMiddleClick&&this.props.onMiddleClick()},this.onRightClick=()=>{this.props.rDisabled||this.props.rState||this.props.onRightClick&&this.props.onRightClick()},this.state={}}render(){let e=null;switch(this.props.type){case"trisection":e=Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"trisection "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick,children:this.props.lInfo}),Object(n.jsx)("button",{className:"trisection "+(this.props.mDisabled?"gray":this.props.mState?this.props.mState:"blue"),onClick:this.onMiddleClick,children:this.props.mInfo}),Object(n.jsx)("button",{className:"trisection "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick,children:this.props.rInfo})]});break;case"half":e=Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"half "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick,children:this.props.lInfo}),Object(n.jsx)("button",{className:"half "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick,children:this.props.rInfo})]});break;default:e=Object(n.jsx)("button",{className:"single "+(this.props.disabled?"gray":this.props.state?this.props.state:this.props.btnColor?this.props.btnColor:"blue"),onClick:this.onClick,...this.props,children:this.props.info})}return Object(n.jsx)(o.a.Fragment,{children:e})}}t.a=i},831:function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return p})),s.d(t,"c",(function(){return h}));var a=s(41),o=s.n(a),n=s(11);const{accessService:i,checkWalletServices:c}=n.a,{host:l,checkUrl:r}=i,d=async()=>o.a.get("".concat(l).concat(r)).then((e=>e.data)),p=e=>o.a.get("".concat(l,"/user/positionList"),{params:e}).then((e=>e.data)),h=async e=>o.a.get("".concat(c.host).concat(c.checkAddrPath),{params:e})},885:function(e,t,s){},891:function(e,t,s){"use strict";s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return p}));var a=s(0),o=s(253),n=s(299),i=s(831);function c(){const[e,t]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{Object(i.a)().then((e=>{const s=e&&e.country&&"CN"===e.country;t(s)})).catch((e=>{}))})),e}const l=Object(a.memo)((e=>{const{callback:t}=e,s=c();return Object(a.useEffect)((()=>{t&&t(s)}),[s,t]),null})),r=()=>n.a.network.defaultAccount;Object(o.c)(r);function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=r(),[s,o]=Object(a.useState)(null);return Object(a.useEffect)((()=>{t&&Object(i.b)({...e,userAddress:t}).then((e=>{let{data:t}=e;o(t)})).catch((e=>{}))}),[t]),s}const p=Object(a.memo)((e=>{const{params:t,callback:s}=e,o=c(),n=d(t);return Object(a.useEffect)((()=>{s&&s(!(null!==n&&void 0!==n&&n.userPositionList.length)&&o)}),[o,n,s]),null}))},940:function(e,t,s){},944:function(e,t,s){"use strict";var a=s(0),o=s.n(a),n=s(196),i=s(39),c=s.n(i),l=s(775),r=s(4),d=(s(1109),s(16));class p extends o.a.Component{constructor(e){super(e),this.confirm=()=>{this.props.confirm&&this.props.confirm()},this.cancel=()=>{this.props.cancel&&this.props.cancel()},this.state={}}render(){const e=Object(n.a)(window.navigator).any?0:64;return Object(d.jsxs)(l.a,{footer:null,title:null,closable:!0,maskClosable:!1,visible:this.props.visible,className:"unfinished-pop",onCancel:this.cancel,style:{marginLeft:Object(r.u)()+e},width:430,centered:!0,children:[Object(d.jsxs)("div",{className:"title",children:[c.a.get("action.popTitle"),Object(d.jsx)("p",{children:c.a.get("action.popDesc")})]}),Object(d.jsxs)("div",{className:"btns",children:[Object(d.jsx)("button",{onClick:this.confirm,children:c.a.get("action.popQuitBtn")}),Object(d.jsx)("button",{onClick:this.cancel,children:c.a.get("action.popCancelBtn")})]})]})}}t.a=p},945:function(e,t,s){"use strict";t.a=s.p+"static/media/TransactionSuccess.9be097c2.svg"}}]);