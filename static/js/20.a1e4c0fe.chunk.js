(this["webpackJsonpswap-front"]=this["webpackJsonpswap-front"]||[]).push([[20],{1059:function(e,t,a){},1063:function(e,t,a){"use strict";var n=a(5),o=a(6),r=a(10),s=a(11),c=a(1),l=a.n(c),i=a(173),d=a(31),u=a.n(d),p=a(863),m=a(8),k=(a(1166),function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).confirm=function(){o.props.confirm&&o.props.confirm()},o.cancel=function(){o.props.cancel&&o.props.cancel()},o.state={},o}return Object(o.a)(a,[{key:"render",value:function(){var e=Object(i.a)(window.navigator).any?0:64;return l.a.createElement(p.a,{footer:null,title:null,closable:!0,maskClosable:!1,visible:this.props.visible,className:"unfinished-pop",onCancel:this.cancel,style:{marginLeft:Object(m.u)()+e},width:430,centered:!0},l.a.createElement("div",{className:"title"},u.a.get("action.popTitle"),l.a.createElement("p",null,u.a.get("action.popDesc"))),l.a.createElement("div",{className:"btns"},l.a.createElement("button",{onClick:this.confirm},u.a.get("action.popQuitBtn")),l.a.createElement("button",{onClick:this.cancel},u.a.get("action.popCancelBtn"))))}}]),a}(l.a.Component));t.a=k},1064:function(e,t,a){e.exports=a.p+"static/media/TransactionSuccess.294bae05.svg"},1161:function(e,t,a){"use strict";var n=a(5),o=a(6),r=a(10),s=a(11),c=a(1),l=a.n(c),i=a(31),d=a.n(i),u=a(1485),p=a(133),m=(a(1475),l.a.createElement(p.a,{style:{fontSize:24},spin:!0})),k=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={},o}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.children,t=l.a.Children.toArray(e).map((function(e,t){var a=e.props,n=a.children,o=a.status,r=a.err,s=a.failed,c=n;return"error"===o&&(c=r||n),"pending"===o&&(c=d.a.get("action.doingAct")),"failed"===o&&(c=s||n),l.a.createElement("div",{className:"al_item ".concat(o?"".concat(o):""),key:e.key},l.a.createElement("div",{className:"flex"},l.a.createElement("span",{className:"al_number"},t+1),l.a.createElement("span",{className:"al_title".concat(o?" ".concat(o):"")},c)),"pending"===o&&l.a.createElement(u.a,{indicator:m,className:"spiny"}))}));return l.a.createElement("div",{className:"action-line"},t)}}]),a}(l.a.Component);t.a=k},1166:function(e,t,a){},1474:function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));var n=a(0),o=a.n(n),r=a(2),s=a(5),c=a(6),l=a(16),i=a(10),d=a(11),u=a(1),p=a.n(u),m=a(1164),k=a.n(m),f=a(31),b=a.n(f),v=a(1552),g=a(83),h=a.n(g),S=(a(13),a(1497)),x=a(100),E=a(173),w=a(270),y=a(1489),O=a.n(y),A=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getChartOptions=function(){Object(l.a)(n);var e=n.state,t=e.xAxisData,a=void 0===t?[]:t,o=e.seriesData,r=void 0===o?[]:o,s=e.ymin,c=e.d_max,i=e.d_min,d=(b.a.get("swap.chart_price_title",{d_max:c,d_min:i,ymin:s}),n.props.type);return{toolbox:{feature:{saveAsImage:{}},show:!1},color:["rgba(69,77,226,0.20)"],grid:{left:"0",top:"8%",right:"10%",bottom:"2%",containLabel:!0,show:!1},xAxis:[{type:"category",boundaryGap:["20%","20%"],data:a,show:!0,axisLine:{lineStyle:{color:"#F3F3F3"}},axisLabel:{showMaxLabel:!0,fontSize:10,color:"#999"}}],yAxis:[{type:"value",axisTick:{},splitLine:{show:!1},axisLine:{lineStyle:{color:"#F3F3F3"}},axisLabel:{showMaxLabel:!1,showMinLabel:!1,fontSize:10,color:"#999",formatter:function(e){return e<100?e.toPrecision(3):Number(e.toPrecision(3))}},min:function(e){return Number((.98*e.min).toPrecision(3))},max:function(e){return Number((1.02*e.max).toPrecision(3))}}],series:[{type:void 0===d?"line":d,smooth:!0,barCategoryGap:"0",itemStyle:{normal:{lineStyle:{color:"#5915E1"}}},emphasis:{itemStyle:{borderColor:"#5915E1",borderWidth:2}},symbol:"none",markPoint:{data:[{coord:[a.length-1,r[r.length-1]],value:r[r.length-1],itemStyle:{color:"transparent"},label:{fontSize:10,backgroundColor:"#FF8E18",padding:[4,5],color:"#ffffff",borderRadius:5}}],symbol:"roundRect",symbolOffset:[0,"-100%"],symbolSize:[50,20]},markLine:{label:{show:!1},data:[{0:{lineStyle:{type:"dashed",color:"rgba(72,80,229,.5)",width:1},coord:[a.length-1,Number((.98*i).toPrecision(3))],value:Number((.98*i).toPrecision(3)),symbol:"none"},1:{symbol:"path://M1552,577C1552,574.7900390625,1553.7900390625,573,1556,573C1558.2099609375,573,1560,574.7900390625,1560,577C1560,579.2099609375,1558.2099609375,581,1556,581C1553.7900390625,581,1552,579.2099609375,1552,577Z",symbolSize:8,symbolKeepAspect:!1,coord:[a.length-1,r[r.length-1]],value:r[r.length-1]}}]},data:r}]}},n.conversionData=function(){var e=Object(r.a)(o.a.mark((function e(t){var a,r,s,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.getKlineData({token_address:t,granularity:"5min",time_start:parseInt((new Date).getTime()/1e3)-9e4,time_end:parseInt((new Date).getTime()/1e3),type:1}).catch((function(e){return console.log(e)}));case 2:a=e.sent,r=[],s=[],a&&a.data&&a.data.map((function(e,t){t%3===(a.data.length-1)%3&&(r.push(h()(1e3*e.t).format("HH:mm")),s.push(e.c))})),c=Math.max.apply(null,s),l=Math.min.apply(null,s),n.setState({d_max:c,d_min:l}),n.setState({xAxisData:r,seriesData:s});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setChart=function(){var e=n.state,t=e.d_max,a=e.d_min,o=n.props.token_adddress,r=n.getChartOptions(),s=Object(E.a)(window.navigator).any?"80vw":"430px",c=n.props.token;return p.a.createElement("div",{className:"chart-content"},p.a.createElement(w.b,{to:{pathname:"scan/detail/".concat(o),search:"".concat(Object(E.a)(window.navigator).any?"?to=kline":"")},target:"".concat(Object(E.a)(window.navigator).any?"":"_blank")},p.a.createElement("div",{className:"chart-title"},p.a.createElement("div",null,p.a.createElement("h4",null,b.a.get("swap.chart_title",{token:c})),p.a.createElement("p",{dangerouslySetInnerHTML:{__html:b.a.get("swap.chart_price_title",{d_max:t,d_min:a})}})),p.a.createElement("img",{src:O.a})),p.a.createElement(k.a,{option:r,style:{height:"254px",width:s},lazyUpdate:!0,notMerge:!0})))},n.setLineChart=function(e){var t=Object(E.a)(window.navigator).any?"150px":"194px",a=Object(E.a)(window.navigator).any?"40px":"44px";return p.a.createElement(S.Sparklines,{data:e,style:{width:t,height:a}},p.a.createElement(S.SparklinesCurve,{style:{strokeWidth:1,stroke:"#5915E1",fill:"#A3A6DF",fillOpacity:"0.05"}}))},n.state={xAxisData:[],seriesData:[],token_adddress:"",d_max:0,d_min:0,ymin:0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.token_adddress,e.next=3,this.conversionData(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(){var e=Object(r.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.token_adddress===t.token_adddress){e.next=7;break}if(this.setState({seriesData:[]}),e.t0=t.token_adddress,!e.t0){e.next=6;break}return e.next=6,this.conversionData(t.token_adddress);case 6:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.seriesData,t=this.props.token_adddress,a=this.setChart();return p.a.createElement("div",{className:"sparkline-content align-items-center"},e.length>0&&p.a.createElement(u.Fragment,null,p.a.createElement(v.a,{content:a,trigger:"".concat(Object(E.a)(window.navigator).any?"click":"hover"),overlayClassName:"price-chart-popover"},p.a.createElement("div",{className:"sparkline-wrap"},Object(E.a)(window.navigator).any?this.setLineChart(e):p.a.createElement(w.b,{to:{pathname:"scan/detail/".concat(t)},target:"_blank"},this.setLineChart(e))))))}}]),a}(u.Component)},1475:function(e,t,a){},1483:function(e,t,a){"use strict";var n,o=a(5),r=a(6),s=a(10),c=a(11),l=a(1),i=a.n(l),d=a(224),u=a(31),p=a.n(u),m=a(863),k=a(1158),f=a(8),b=a(13),v=Object(d.b)("network")(n=Object(d.c)(n=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).changeCheckStatus=function(e){n.setState({checkStatus:e})},n.comfirmContinue=function(){n.state.checkStatus&&n.props.cb()},n.componentDidMount=function(){},n.state={checkStatus:!1},n}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.dealWarningSymbol,o=this.state.checkStatus,r=n?b.a.deflationToken[n]:{symbol:"",slippage:""},s=r.symbol,c=r.slippage;return i.a.createElement(m.a,{title:p.a.getHTML("list.deal_warning_title",{value:s}),closable:!1,visible:a,footer:null,style:{marginLeft:Object(f.D)(500)},width:525,className:"list-addtoken-modal deal-warning-modal",centered:!0},i.a.createElement("div",{className:"solor-modal-body"},i.a.createElement("div",{className:"tips"},i.a.createElement("div",{className:"tips1"},p.a.getHTML("list.deal_warning_content_1",{value:s})),i.a.createElement("div",{className:"tips1 yellow"},p.a.getHTML("list.deal_warning_content_2",{value:c})),i.a.createElement("div",{className:"tips1"},p.a.getHTML("list.deal_warning_content_3",{value:s}))),i.a.createElement("div",{className:"check-box"+(o?" checked":"")},i.a.createElement(k.a,{onChange:function(t){return e.changeCheckStatus(t.target.checked)}},p.a.get("list.i_understand"))),i.a.createElement("div",{className:"btns"},i.a.createElement("button",{onClick:this.comfirmContinue,className:o?"button-active":""},p.a.get("list.continue")))))}}]),a}(i.a.Component))||n)||n;t.a=v},1488:function(e,t,a){},1489:function(e,t,a){e.exports=a.p+"static/media/kline.6788783b.svg"},1502:function(e,t,a){e.exports=a.p+"static/media/Add.bfa88258.svg"},1514:function(e,t,a){"use strict";var n=a(9),o=a(1),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},s=a(46),c=function(e,t){return o.createElement(s.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:r}))};c.displayName="CopyOutlined";t.a=o.forwardRef(c)},1518:function(e,t,a){"use strict";var n,o=a(67),r=a(18),s=a(227),c=a(0),l=a.n(c),i=a(2),d=a(5),u=a(6),p=a(10),m=a(11),k=a(1),f=a.n(k),b=a(132),v=a.n(b),g=a(31),h=a.n(g),S=a(173),x=a(224),E=a(1157),w=a(1159),y=a(1495),O=a(863),A=a(1158),j=a(13),N=a(66),T=a(1514),_=a(8),C=(a(1488),a(274)),V=a(268),L=a.n(V),D=a(275),I=a.n(D),B=a(419),M=a.n(B),F=a(100),P=a(1483),R=Object(x.b)("pool")(n=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=window.localStorage.getItem("solor");if(e){var t=JSON.parse(e);window.localStorage.setItem("solor",JSON.stringify(t)),n.props.pool.setData({solor:t})}},n.setTokenList=Object(i.a)(l.a.mark((function e(){var t,a,o,r,s,c,i,d,u,p,m,k,f,b,g,h,S,x,E,w,y,O,A=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=A.length>0&&void 0!==A[0]?A[0]:null,e.prev=1,a=n.props.pool,o=a.byUrl,r=void 0===o?{}:o,s=a.selectedListUrl,c=void 0===s?"":s,i=a.solor,d=void 0===i?[]:i,u=window.localStorage.getItem("swapVersion"),p=r[c].tokens||[],v.a.uniqBy(p,"address").length!=p.length&&(p=[]),void 0!==(m=r[c].isToken)){e.next=15;break}return e.next=11,F.a.isToken(p.map((function(e){return e.address})));case 11:return m=e.sent,r[c].isToken=Number(m),e.next=15,n.props.pool.updateByUrl(r[c]);case 15:2===Number(m)&&(p=[]),k={tokenAddress:j.a.trxFakeAddress,address:"",addressV1:"",addressV2:"",tokenSymbol:"TRX",tokenLogoUrl:I.a,tokenName:"TRX",tokenDecimal:j.a.trxDecimal,balance:"-"},f=n.props.pool,b=f.exchanges,g=void 0===b?{}:b,h=f.allExchanges,S=void 0===h?{}:h,x=[],n.props.swap?p.map((function(e){e.address&&g[e.address]&&g[e.address].e&&x.push({tokenAddress:e.address,address:g[e.address]?g[e.address].e:null,addressV1:S&&S[0]&&S[0][e.address]?S[0][e.address].e:null,addressV2:S&&S[1]&&S[1][e.address]?S[1][e.address].e:null,tokenSymbol:e.symbol||"",tokenLogoUrl:e.logoURI||L.a,tokenName:e.name||"",tokenDecimal:Number(g[e.address].d),balance:"-"})})):p.map((function(e){e.address&&x.push({tokenAddress:e.address,address:"",addressV1:"",addressV2:"",tokenSymbol:e.symbol||"",tokenLogoUrl:e.logoURI||L.a,tokenName:e.name||"",tokenDecimal:g[e.address]&&g[e.address].d?Number(g[e.address].d):e.decimals,balance:"-"})})),d.map((function(e){e.addressV1=S&&S[0]&&S[0][e.tokenAddress]?S[0][e.tokenAddress].e:null,e.addressV2=S&&S[1]&&S[1][e.tokenAddress]?S[1][e.tokenAddress].e:null,e.address="v1.0"===u?S&&S[0]&&S[0][e.tokenAddress]?S[0][e.tokenAddress].e:null:S&&S[1]&&S[1][e.tokenAddress]?S[1][e.tokenAddress].e:null})),E=d.slice(),d.map((function(e){v.a.findIndex(x,(function(t){return t.tokenAddress===e.tokenAddress}))>=0&&v.a.remove(E,(function(t){return t.tokenAddress===e.tokenAddress}))})),x=[k].concat(E,x),w=[],y=[],O={},x.map((function(e){w.push(e),y.push(e),O[e.tokenAddress]=e})),n.state.tokenMap=O,n.setState({allTokenList:w,tokenList:y},(function(){n.getTokenBalance(),t&&t()})),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(1),console.log(e.t0);case 35:case"end":return e.stop()}}),e,null,[[1,32]])}))),n.getTokenBalance=Object(i.a)(l.a.mark((function e(){var t,a,o,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.defaultAccount,a=n.state,o=a.tokenList,r=a.tokenMap,s=[],o.map((function(e){s.push(e.tokenAddress)})),!t){e.next=8;break}return e.next=7,Object(N.k)(t,s,r);case 7:n.setState({});case 8:case"end":return e.stop()}}),e)}))),n.showModal=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.disabled){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n.props.pool.getTokensDataFromLocal(),e.next=6,n.setTokenList((function(){var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}},(function(){n.setState({modalVisible:!0,defaultStatus:1})}))}));case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("tokenModal err",e.t0),n.setState({modalVisible:!0}),n.getTokenBalance();case 13:case"end":return e.stop()}}),e,null,[[2,8]])}))),n.calcItem=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,o,r,s,c,i,d,u,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.localStorage.getItem("swapVersion"),o=n.props.pool.allExchanges,r=void 0===o?{}:o,s=j.a.contract.factory,c=j.a.sunContract.factory,i=r[0][t.tokenAddress]&&r[0][t.tokenAddress].e||null,d=r[1][t.tokenAddress]&&r[1][t.tokenAddress].e||null,i){e.next=22;break}return e.next=9,Object(N.l)(t.tokenAddress,s);case 9:if(!(u=e.sent)){e.next=21;break}if(t.addressV1=u,t.notCreatedV1=!1,"v1.0"!==a){e.next=19;break}return t.address=u,e.next=17,n.removeSolor(t);case 17:return e.next=19,n.addSolor(t);case 19:e.next=22;break;case 21:t.tokenAddress!==j.a.trxFakeAddress&&(t.notCreatedV1=!0);case 22:if(!t.addressV1||2!==t.cst){e.next=27;break}return e.next=25,Object(N.v)(t.addressV1);case 25:e.sent.gt(0)||t.tokenAddress===j.a.trxFakeAddress?t.notCreatedV1=!1:t.notCreatedV1=!0;case 27:if(d){e.next=43;break}return e.next=30,Object(N.l)(t.tokenAddress,c);case 30:if(!(p=e.sent)){e.next=42;break}if(t.addressV2=p,t.notCreatedV2=!1,"v1.5"!==a){e.next=40;break}return t.address=p,e.next=38,n.removeSolor(t);case 38:return e.next=40,n.addSolor(t);case 40:e.next=43;break;case 42:t.tokenAddress!==j.a.trxFakeAddress&&(t.notCreatedV2=!0);case 43:if(!t.addressV2||2!==t.cst){e.next=48;break}return e.next=46,Object(N.v)(t.addressV2);case 46:e.sent.gt(0)||t.tokenAddress===j.a.trxFakeAddress?t.notCreatedV2=!1:t.notCreatedV2=!0;case 48:return e.abrupt("return",t);case 49:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setTokenAddressCallback=function(){var e=n.state.selectSearchItem;n.setState({dealWarningVisible:!1}),n.props.onChange&&n.props.onChange(n.state.tokenMap[e.tokenAddress])},n.setTokenAddress=function(){var e=Object(i.a)(l.a.mark((function e(t,a,o){var r,s,c,i,d,u,p,m,k,f,b,v,g,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props.pool,s=r.exchanges,c=void 0===s?{}:s,i=r.allExchanges,d=void 0===i?{}:i,!t||!n.state.tokenMap[t]){e.next=8;break}if("swap"!==o||!Object.keys(j.a.deflationToken).includes(t)){e.next=5;break}return n.setState({dealWarningVisible:!0,callbacks:n.setTokenAddressCallback,selectSearchItem:{tokenAddress:t}}),e.abrupt("return");case 5:n.props.onChange&&n.props.onChange(n.state.tokenMap[t]),e.next=35;break;case 8:if(!Object(_.B)(t)||!a){e.next=22;break}return e.next=11,F.a.tokenBrief(t);case 11:if(!(u=e.sent).success){e.next=20;break}if(!(p=u.data).tokenAddr){e.next=20;break}return m={tokenAddress:t,address:c[p.tokenAddr]&&c[p.tokenAddr].e||null,addressV1:d[0][p.tokenAddr]&&d[0][p.tokenAddr].e||null,addressV2:d[1][p.tokenAddr]&&d[1][p.tokenAddr].e||null,tokenSymbol:p.tokenSymbol,tokenLogoUrl:p.tokenLogo,tokenName:p.tokenName,tokenDecimal:p.tokenDecimal,cst:1,balance:"-"},e.next=18,n.calcItem(m);case 18:k=e.sent,n.setState({tokenBrief:k,solorModalVisible:!0});case 20:e.next=35;break;case 22:if(!Object(_.B)(t)){e.next=35;break}return e.next=25,F.a.tokenBrief(t);case 25:if(!(f=e.sent).success){e.next=35;break}if(!(b=f.data).tokenAddr){e.next=35;break}return v=window.localStorage.getItem("swapVersion"),g={tokenAddress:t,address:b.exchangeAddr,addressV1:"v1.0"===v?b.exchangeAddr:null,addressV2:"v1.5"===v?b.exchangeAddr:null,tokenSymbol:b.tokenSymbol,tokenLogoUrl:b.tokenLogo,tokenName:b.tokenName,tokenDecimal:b.tokenDecimal,cst:1,balance:"-"},e.next=33,n.calcItem(g);case 33:h=e.sent,n.setState({tokenBrief:h,solorModalVisible:!0});case 35:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.onChange=function(){var e=Object(i.a)(l.a.mark((function e(t,a){var o,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.stopPropagation(),t.tokenAddress!==n.props.value){e.next=3;break}return e.abrupt("return");case 3:if(!n.props.fromPool||t.tokenAddress!==j.a.trxFakeAddress){e.next=5;break}return e.abrupt("return");case 5:if(1!==(o=n.props.type)&&2!==o||!Object.keys(j.a.deflationToken).includes(t.tokenAddress)){e.next=9;break}return n.setState({modalVisible:!1,dealWarningVisible:!0,callbacks:n.selectSearchCallback,selectSearchItem:t}),e.abrupt("return");case 9:return e.next=11,n.calcItem(t);case 11:r=e.sent,n.setState({modalVisible:!1}),n.props.onChange&&n.props.onChange(r);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.selectSearchCallback=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.selectSearchItem,e.next=3,n.calcItem(t);case 3:a=e.sent,n.setState({dealWarningVisible:!1}),n.props.onChange&&n.props.onChange(a);case 6:case"end":return e.stop()}}),e)}))),n.hideModal=function(){1===n.state.defaultStatus?n.setState({modalVisible:!1,customTokenUriLeg:!0}):n.hideListModal()},n.onTokenStrChange=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,o,r,s,c,i,d,u,p,m,k,f,b,v,g,h=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=h.length>1&&void 0!==h[1]?h[1]:null,o=n.props.pool,r=o.exchanges,s=void 0===r?{}:r,c=o.allExchanges,i=void 0===c?{}:c,e.prev=2,d=t.target.value,u=n.state.allTokenList,p=[],m=n.state.tokenSort,!(d.length>1)){e.next=31;break}if(!Object(_.B)(d)){e.next=27;break}if(0!==(p=u.filter((function(e){return e.tokenAddress===d.trim()}))).length){e.next=25;break}return e.next=13,F.a.tokenBrief(d);case 13:if(!(k=e.sent).success){e.next=25;break}if(f=window.defaultAccount,b=k.data,v="-",!f){e.next=22;break}return e.next=21,Object(N.A)(f,[d],n.state.tokenMap);case 21:v=e.sent;case 22:g={tokenAddress:d,address:s[b.tokenAddr]&&s[b.tokenAddr].e||null,addressV1:i[0][b.tokenAddr]&&i[0][b.tokenAddr].e||null,addressV2:i[1][b.tokenAddr]&&i[1][b.tokenAddr].e||null,tokenSymbol:b.tokenSymbol,tokenLogoUrl:b.tokenLogo,tokenName:b.tokenName,tokenDecimal:b.tokenDecimal,cst:1,balance:"-"==v?"-":Object(_.n)(v,2)},p.push(g),u.push(g);case 25:e.next=29;break;case 27:p=u.filter((function(e){return e.tokenSymbol.toLowerCase().indexOf(d.toLowerCase())>-1&&1!==Number(e.cst)})),m&&(p=p.sort((function(e,t){var a=e.tokenSymbol.toLowerCase(),n=t.tokenSymbol.toLowerCase();return a<n?-1:a>n?1:0})));case 29:e.next=33;break;case 31:p=u.slice().filter((function(e){return 1!==Number(e.cst)})),m&&(p=p.sort((function(e,t){var a=e.tokenSymbol.toLowerCase(),n=t.tokenSymbol.toLowerCase();return a<n?-1:a>n?1:0})));case 33:n.setState({tokenStr:d,tokenList:p},(function(){a&&a(),n.getTokenBalance()})),e.next=39;break;case 36:e.prev=36,e.t0=e.catch(2),console.log("onTokenStrChange: ",e.t0);case 39:case"end":return e.stop()}}),e,null,[[2,36]])})));return function(t){return e.apply(this,arguments)}}(),n.clearStorage=function(){var e=j.a.localStorage;for(var t in e)window.localStorage.removeItem(e[t]);window.location.reload()},n.showListModal=function(){n.setState({defaultStatus:2})},n.hideListModal=function(){n.setState({defaultStatus:1})},n.selectTokenList=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.props.pool.selectedListUrl,n.props.pool.setData({selectedListUrl:t}),n.props.pool.setTokensDataIntoLocal(),e.next=6,n.setTokenList((function(){n.setState({defaultStatus:1});var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}})}));case 6:n.props.pool.handleNotifiction(),n.props.pool.setTokensDataIntoLocal(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),n.backTokensCategory=function(){n.setState({changeStatus:1})},n.onTokenUriChange=function(e){try{var t=e.target.value;n.setState({customTokenUri:t.trim(),errInfo:""})}catch(a){console.log(a)}},n.checkUrl=function(e){return e||(h.a.get("list.err1"),Object(s.a)("errInfo")),""},n.isListsOver=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>=j.a.maxLists},n.addCustomTokens=Object(i.a)(l.a.mark((function e(){var t,a,o,s,c,i,d,u,p,m,k;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=n.state.customTokenUri,a="",Object(_.C)(t)){e.next=7;break}return a=h.a.get("list.add_failed_tip"),n.setState({errInfo:a}),e.abrupt("return");case 7:if(o=n.props.pool.byUrl,!(s=void 0===o?{}:o)[t]||s[t].rs){e.next=12;break}return a=h.a.get("list.exists"),n.setState({errInfo:a}),e.abrupt("return");case 12:if(!n.isListsOver(s)){e.next=16;break}return a=h.a.getHTML("list.lists_over",{value:j.a.maxLists}),n.setState({errInfo:a}),e.abrupt("return");case 16:return e.next=18,F.a.getTokenListJson(t);case 18:if(c=e.sent,i=c.tokens,!((void 0===i?[]:i).length>j.a.maxTokens)){e.next=24;break}return a=h.a.getHTML("list.tokens_over",{value:j.a.maxTokens}),n.setState({errInfo:a}),e.abrupt("return");case 24:if(d=Object(_.R)(c),u=d.key,p=void 0===u?"":u,m=d.valid,void 0!==m&&m){e.next=29;break}return a=h.a.get("list.add_err_tip",{value:p}),n.setState({errInfo:a}),e.abrupt("return");case 29:return n.props.pool.updateTokensData(t,Object(r.a)(Object(r.a)({},c),{},{uri:t,rs:0})),e.next=32,n.setTokenList((function(){n.setState({defaultStatus:1,customTokenUri:""});var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}})}));case 32:e.next=39;break;case 34:e.prev=34,e.t0=e.catch(0),k=h.a.get("list.add_failed_retry"),n.setState({errInfo:k}),console.log(e.t0);case 39:case"end":return e.stop()}}),e,null,[[0,34]])}))),n.updateList=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,o,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.uri,o=n.props.pool.byUrlNew,r=(void 0===o?{}:o)[a],Object(_.i)(r,Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.pool.updateByUrl(r);case 2:n.setState({});case 3:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.hideRemoveModal=function(){n.setState({removeId:"",removeModalVisible:!1,removeText:""})},n.showRemoveModal=function(e){try{n.setState({removeId:e.uri,removeModalVisible:!0})}catch(t){console.log(t)}},n.removeTokens=function(){try{var e=n.state,t=e.removeId,a=e.removeText;if(!t)return;if("REMOVE"!=a.trim())return;var o=n.props.pool.byUrl,r=(void 0===o?{}:o)[t],s=r.cst,c=void 0!==s&&s,l=r.uri,i=void 0===l?"":l;c?n.props.pool.deleteByUrlById(i):(r.rs=1,n.props.pool.updateByUrl(r)),n.hideRemoveModal()}catch(d){console.log(d)}},n.inputRemoveText=function(e){var t=e.target.value;n.setState({removeText:t})},n.addSolor=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n.props.pool.solor,o=void 0===a?[]:a,!(v.a.findIndex(o,(function(e){return e.tokenAddress===t.tokenAddress}))>=0)){e.next=5;break}return e.abrupt("return");case 5:return o.unshift(Object(r.a)(Object(r.a)({},t),{},{cst:2})),n.props.pool.setData({solor:o}),e.next=9,n.setTokenList((function(){var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}},(function(){n.getTokenBalance()}))}));case 9:window.localStorage.setItem("solor",JSON.stringify(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),n.removeSolor=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,o,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.tokenAddress!==n.props.value&&t.tokenAddress!==n.props.switchValue){e.next=3;break}return e.abrupt("return");case 3:return a=n.props.pool.solor,o=void 0===a?[]:a,r=t.tokenAddress,v.a.remove(o,(function(e){return e.tokenAddress===r})),n.props.pool.setData({solor:o}),e.next=9,n.setTokenList((function(){var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}},(function(){n.getTokenBalance()}))}));case 9:window.localStorage.setItem("solor",JSON.stringify(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),n.getKeys=function(e){try{return Object.keys(e).sort((function(t,a){return e[t].name>e[a].name?1:-1}))}catch(t){return[]}},n.tokenSortByAsCII=function(e){try{var t=n.state.tokenList;if(e=!e){var a=t.sort((function(e,t){var a=e.tokenSymbol.toLowerCase(),n=t.tokenSymbol.toLowerCase();return a<n?-1:a>n?1:0})),o=v.a.findIndex(a,(function(e){return e.tokenAddress===j.a.trxFakeAddress}));if(o>=0){var r=a.splice(o,1);a.unshift(r[0])}n.setState({tokenList:a})}else n.setTokenList((function(){var e=n.state.tokenStr;n.onTokenStrChange({target:{value:e}},(function(){n.getTokenBalance()}))}));n.setState({tokenSort:e})}catch(s){console.log(s)}},n.comfirmContinue=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=n.state,a=t.tokenBrief,t.checkStatus){e.next=4;break}return e.abrupt("return");case 4:if(!Object.keys(j.a.deflationToken).includes(a.tokenAddress)){e.next=7;break}return n.setState({solorModalVisible:!1,dealWarningVisible:!0,callbacks:n.dealWarningCallback}),e.abrupt("return");case 7:return e.next=9,n.addSolor(a);case 9:n.setState({solorModalVisible:!1}),n.props.onChange&&n.props.onChange(a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),n.setState({dealWarningVisible:!1,solorModalVisible:!1});case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),n.dealWarningCallback=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({dealWarningVisible:!1}),t=n.state.tokenBrief,e.next=5,n.addSolor(t);case 5:n.setState({solorModalVisible:!1}),n.props.onChange&&n.props.onChange(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),n.setState({dealWarningVisible:!1,solorModalVisible:!1});case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),n.changeCheckStatus=function(e){n.setState({checkStatus:e.target.checked})},n.renderSelectedList=function(e,t,a,o,r){var s=n.state,c=s.tokenSort,l=s.tokenMap;return e&&t&&e[t]?f.a.createElement(f.a.Fragment,null,f.a.createElement("input",{className:"select-search",type:"text",placeholder:h.a.get("tokens.select_placeholder_text"),value:a,onChange:n.onTokenStrChange}),f.a.createElement("div",{className:"title flexB"},f.a.createElement("span",{className:"text"},h.a.get("tokens.select_tokenName_title")),f.a.createElement("span",{className:"sort "+(c?"active":""),onClick:function(){return n.tokenSortByAsCII(c)}})),f.a.createElement("div",{className:"itemList"},0===r.length?f.a.createElement("div",{className:"no-token-fund"},h.a.get("tokens.loading_tokens")):o.length?o.map((function(e,t){return f.a.createElement("div",{className:"flex item "+(e.tokenAddress===n.props.value||e.tokenAddress===n.props.switchValue?"opac":""),key:e.tokenAddress+t,onClick:function(t){return n.onChange(e,t)}},f.a.createElement("div",{className:"a-center"},f.a.createElement("img",{src:e.tokenLogoUrl,alt:"",onError:function(e){e.target.onerror=null,e.target.src=L.a}}),f.a.createElement("div",{className:"searchRes left"},f.a.createElement("span",{className:"item-content"},Object(_.p)(e.tokenSymbol,e.tokenAddress),n.props.fromPool?"":n.props.asInput?e.tokenAddress===n.props.value&&" (".concat(h.a.get("tokens.selected_as_input"),")")||e.tokenAddress===n.props.switchValue&&" (".concat(h.a.get("tokens.selected_as_output"),")"):e.tokenAddress===n.props.value&&" (".concat(h.a.get("tokens.selected_as_output"),")")||e.tokenAddress===n.props.switchValue&&" (".concat(h.a.get("tokens.selected_as_input"),")")),1===e.cst&&f.a.createElement("div",{className:"item-content solor-detail"},f.a.createElement("span",null,h.a.get("list.search_by_addr")),f.a.createElement("span",{className:"ib",onClick:function(t){t.stopPropagation(),n.addSolor(e)}},"(",h.a.get("list.add"),")")),2===e.cst&&f.a.createElement("div",{className:"item-content solor-detail"},f.a.createElement("span",null,h.a.get("list.add_by_user")),f.a.createElement("span",{className:"solor-remove ib",onClick:function(t){t.stopPropagation(),n.removeSolor(e)}},"(",h.a.get("list.remove_token"),")")))),e.tokenAddress===j.a.trxFakeAddress?f.a.createElement("div",null,f.a.createElement("p",null,Object(_.o)(l[e.tokenAddress]?l[e.tokenAddress].balance:e.balance))):f.a.createElement("div",{className:"inline-flex balanceAndAddr"},f.a.createElement("p",null,l[e.tokenAddress]&&!isNaN(l[e.tokenAddress].balance)?Object(_.o)(l[e.tokenAddress].balance):"--"),f.a.createElement("p",null,Object(S.a)(window.navigator).any?Object(_.l)(e.tokenAddress,4,4):Object(_.l)(e.tokenAddress,8,10))))})):f.a.createElement("div",{className:"no-token-fund"},h.a.getHTML("list.no_token_found"))),f.a.createElement("div",{className:"list-switch flexB"},f.a.createElement("div",{className:"list-switch-name"},f.a.createElement("img",{src:e[t].logoURI,alt:""}),f.a.createElement("span",null,e[t].name||"")),f.a.createElement("button",{className:"list-switch-btn",onClick:function(){return n.showListModal()}},h.a.get("list.switch")))):f.a.createElement(f.a.Fragment,null)},n.renderUpdateListItem=function(e){var t=n.props.pool.byUrlNew,a=void 0===t?{}:t,o=e.version,r=void 0===o?{}:o,s=a[e.uri]||{},c=s.version||{},l=Object(_.h)(r,c),i=Object(_.g)(e,s).success,d=void 0!==i&&i;return!v.a.isEqual(s,{})&&l&&d&&f.a.createElement(E.a.Item,{onClick:function(){n.updateList(e)}},h.a.get("list.update"))},n.adjustAndroid=function(e){var t=Object(_.e)(e);n.setState({adjust:t})},n.renderTokensCategory=function(){var e=n.state,t=e.customTokenUri,a=e.lang,o=e.errInfo,r=n.props.pool,s=r.byUrl,c=r.selectedListUrl,l=n.getKeys(s);return f.a.createElement(f.a.Fragment,null,f.a.createElement("ul",{className:"list-list"},s&&l.length&&l.map((function(e){var t=s[e];return!t.rs&&f.a.createElement("li",{key:t.name+"_"+e,className:"flex"},f.a.createElement("div",{className:"drop-parent flexB w-80"},f.a.createElement("div",{className:"left flex"},f.a.createElement("img",{src:t.logoURI,alt:"",className:"logo"}),f.a.createElement("div",null,f.a.createElement("div",{className:"name"},t.name),f.a.createElement("div",{className:"source"},Object(_.s)(t.uri)))),f.a.createElement(w.a,{trigger:"click",placement:"bottomRight",overlay:f.a.createElement(E.a,null,f.a.createElement(E.a.ItemGroup,{title:f.a.createElement("div",null,f.a.createElement("span",{className:"key"},h.a.get("list.version")),f.a.createElement("span",{className:"value"},Object(_.A)(t.version)))},f.a.createElement(E.a.Item,null," ",f.a.createElement("a",{href:"".concat(j.a.justList,"?lang=").concat(a,"#/detail?uri=").concat(t.uri),target:t.uri||"_blank"},h.a.get("list.view"))),n.renderUpdateListItem(t),t.uri!==c&&f.a.createElement(E.a.Item,{onClick:function(){n.showRemoveModal(t)}},h.a.get("list.remove"))))},f.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}}))),f.a.createElement("div",{className:"right"},f.a.createElement("button",{className:String(c)===String(t.uri)?"selected":"",onClick:function(){return n.selectTokenList(e)}},String(c)===String(t.uri)?h.a.get("list.selected"):h.a.get("list.select"))))})),f.a.createElement("div",{className:"list-more"},f.a.createElement("a",{href:"en-US"===a?j.a.moreList.en:j.a.moreList.zh,target:"_blank"},h.a.get("more.more")))),f.a.createElement("div",{className:"list-add"},f.a.createElement("div",{className:"list-input-line flex"},f.a.createElement(y.a,{type:"text",className:"list-input w-80",placeholder:"https://",value:t,onChange:n.onTokenUriChange,onFocus:function(){return n.adjustAndroid(!0)},onBlur:function(){return n.adjustAndroid(!1)}}),f.a.createElement("div",{className:"right"},f.a.createElement("button",{onClick:n.addCustomTokens,disabled:!t.trim()},h.a.get("list.add_list"))))),!!o&&f.a.createElement("div",{className:"list-add-errTip"},f.a.createElement("span",{className:"icon"},"!"),f.a.createElement("span",{className:"text"},o)),f.a.createElement("div",{className:"list-footer"},f.a.createElement("a",{href:"".concat(j.a.justList,"?lang=").concat(a,"#/home"),className:"link",target:"justList"},h.a.get("list.view_list_home"))))},n.hideSolorModal=function(){n.setState({solorModalVisible:!1})},n.state={lang:window.localStorage.getItem("lang")||h.a.options.currentLocale,modalVisible:!1,tokenStr:"",allTokenList:[],tokenList:[],tokenMap:Object(o.a)({},j.a.trxFakeAddress,{tokenAddress:j.a.trxFakeAddress,address:"",addressV1:"",addressV2:"",tokenSymbol:"TRX",tokenLogoUrl:I.a,tokenName:"TRX",tokenDecimal:j.a.trxDecimal,removeText:""}),defaultStatus:1,removeModalVisible:!1,removeText:"",removeId:"",solor:JSON.parse(window.localStorage.getItem("solor")||"[]"),customTokenUri:"",customTokenUriLeg:!0,errInfo:"",tokenSort:!1,solorModalVisible:!1,tokenBrief:{},checkStatus:!1,dealWarningVisible:!1,selectSearchItem:""},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.tokenList,n=(t.tokenMap,t.tokenStr),o=t.allTokenList,r=t.defaultStatus,s=t.removeText,c=t.removeModalVisible,l=t.adjust,i=t.solorModalVisible,d=t.tokenBrief,u=t.checkStatus,p=t.dealWarningVisible,m=t.callbacks,k=t.selectSearchItem,b=this.props,v=b.value,g=b.tokenInfo,S=this.props.pool,x=S.byUrl,E=S.selectedListUrl;return f.a.createElement(f.a.Fragment,null,f.a.createElement("p",{className:"dragDown "+(this.props.disabled?"no-bg":""),onClick:this.showModal},v&&g?f.a.createElement(f.a.Fragment,null,f.a.createElement("img",{src:g.tokenLogoUrl||L.a,alt:"",onError:function(e){e.target.onerror=null,e.target.src=L.a}}),f.a.createElement("span",null,Object(_.p)(g.tokenSymbol,g.tokenAddress))):h.a.get("tokens.add_choose_select")),this.props.disabled?null:f.a.createElement(O.a,{title:1===r?f.a.createElement(C.a,{tip:h.a.get("tokens.add_choose_select_tip"),toolClass:"select-ib left"},f.a.createElement("span",{className:"add-title"},h.a.get("tokens.add_choose_select"))):f.a.createElement("div",{className:"list-modal-header"},f.a.createElement("img",{src:M.a,alt:"",onClick:function(){return e.hideListModal()}}),f.a.createElement("span",{className:"add-title"},h.a.get("list.select_list"))),closable:!0,visible:this.state.modalVisible,onCancel:this.hideModal,className:"select-modal "+(1===r?"":"list-modal "+(l?"adjust":"")),footer:null,style:{marginLeft:Object(_.u)()},width:630,centered:!0},1===r?this.renderSelectedList(x,E,n,a,o):this.renderTokensCategory()),f.a.createElement(O.a,{title:"",closable:!1,visible:c,footer:null,style:{marginLeft:Object(_.D)()},width:420,className:"list-remove-modal"},f.a.createElement("div",{className:"title"},h.a.get("list.remove_confirm")),f.a.createElement("div",{className:"tips"},h.a.get("list.remove_confirm_tip")),f.a.createElement("input",{type:"text",className:"list-input w-80",value:s,onChange:this.inputRemoveText}),f.a.createElement("div",{className:"btns"},f.a.createElement("button",{onClick:this.removeTokens,disabled:"REMOVE"!==s.trim()},h.a.get("list.confirm")),f.a.createElement("button",{onClick:this.hideRemoveModal},h.a.get("list.cancel")))),f.a.createElement(O.a,{title:h.a.get("list.add_token"),closable:!1,visible:i,footer:null,style:{marginLeft:Object(_.D)(500)},width:525,className:"list-addtoken-modal",centered:!0},f.a.createElement("div",{className:"solor-modal-body"},f.a.createElement("div",{className:"tips"},f.a.createElement("div",{className:"tips1"},h.a.get("list.add_token_tip1")),f.a.createElement("div",{className:"tips1"},h.a.get("list.add_token_tip2")),f.a.createElement("div",{className:"tips1"},h.a.get("list.add_token_tip3"))),f.a.createElement("div",{className:"token-info flex"},f.a.createElement("div",{className:"logo"},f.a.createElement("img",{src:d.tokenLogoUrl?d.tokenLogoUrl:L.a})),f.a.createElement("div",{className:"info"},f.a.createElement("div",{className:"symbol"},d.tokenName,"(",Object(_.p)(d.tokenSymbol,d.tokenAddress),")"),f.a.createElement("div",{className:"addr"},f.a.createElement("span",null,d.tokenAddress),f.a.createElement("span",{className:"pointer",title:d.tokenAddress,id:"copySpan",onClick:function(e){Object(_.k)(e,"5px","copySpan")}},f.a.createElement(T.a,null))))),f.a.createElement("div",{className:"check-box"+(u?" checked":"")},f.a.createElement(A.a,{onChange:this.changeCheckStatus},h.a.get("list.add_token_tip4"))),f.a.createElement("div",{className:"btns"},f.a.createElement("button",{onClick:this.comfirmContinue,className:u?"button-active":""},h.a.get("list.continue"))))),p&&f.a.createElement(P.a,{visible:p,cb:m,dealWarningSymbol:d.tokenAddress||k.tokenAddress}))}}]),a}(f.a.Component))||n;t.a=R},1535:function(e,t,a){"use strict";var n,o=a(67),r=a(18),s=a(0),c=a.n(s),l=a(2),i=a(5),d=a(6),u=a(10),p=a(11),m=a(1),k=a.n(m),f=a(31),b=a.n(f),v=a(173),g=a(224),h=a(863),S=a(13),x=a(1518),E=a(274),w=a(927),y=a(1161),O=a(1063),A=a(1474),j=(a(100),a(8)),N=a(66),T=(a(1059),a(419)),_=a.n(T),C=a(1502),V=a.n(C),L=a(268),D=a.n(L),I=a(275),B=a.n(I),M=a(1064),F=a.n(M),P=a(983),R=Object(g.b)("network")(n=Object(g.b)("pool")(n=Object(g.c)(n=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(l.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.props.pool.setData({addRef:n.toTokenRef}),t=setInterval((function(){n.props.network.isConnected&&(n.timer=setInterval((function(){n.selectedToken(n.props.pool.tokenInfo,!0)}),6e3),n.selectedToken(n.props.pool.tokenInfo,!1),clearInterval(t))}),1e3),n.getTokenBalance(),a=Object(v.a)(window.navigator).apple.device,n.setState({appleDevice:a}),e.next=8,n.toTokenRef.current.setTokenList();case 8:n.toTokenRef.current.setTokenAddress(n.props.pool.tokenInfo.tokenAddress),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])}))),n.componentWillUnmount=function(){clearInterval(n.timer)},n.initInputData=function(){n.setState({tokenOneValueStr:"",tokenTwoValueStr:"",tokenOneValue:new j.a(0),tokenTwoValue:new j.a(0),versionChanged:!0},(function(){n.selectedToken(n.props.pool.tokenInfo)}))},n.getTokenBalance=Object(l.a)(c.a.mark((function e(){var t,a,o,r,s,l,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.network.isConnected){e.next=15;break}return t=n.props.pool.tokenInfo,a=n.props.network.defaultAccount,o=n.state.fromToken,e.next=6,Object(N.i)(a,[o.tokenAddress]);case 6:if(r=e.sent,(s=r[0].div(new j.a(10).pow(o.tokenDecimal))).eq(n.state.fromBalance)||n.setState({fromBalance:s,fromBalanceStr:s._toFixed(6,1)},(function(){n.calcEh()})),!t.tokenAddress){e.next=15;break}return e.next=12,Object(N.i)(a,[t.tokenAddress]);case 12:l=e.sent,i=l[0].div(new j.a(10).pow(t.tokenDecimal)),isNaN(i.toNumber())||i.eq(n.state.toBalance)||n.setState({toBalance:i,toBalanceStr:i._toFixed(6,1)},(function(){n.calcEh()}));case 15:case"end":return e.stop()}}),e)}))),n.setInsufficient=function(e,t,a){e<=t?n.setState({insufficientBalance:""}):n.setState({insufficientBalance:a})},n.calcEh=function(){var e=n.props.pool,t=e.tokenInfo,a=e.tokenDetail,o=e.selectTokenOne,r=e.tokenTwoFixed,s=n.state,c=s.fromBalance,l=s.toBalance,i=s.noPoolBalance,d=Object(j.M)(document.querySelector(".token-sec-input-1").value),u=Object(j.M)(document.querySelector(".token-sec-input-2").value);if(d.gt(c)||d.lt(S.a.firstTRXLimit)&&0!==i&&!r?n.setState({insufficientBalance:o.tokenSymbol}):u.gt(l)||isNaN(l.toNumber())?n.setState({insufficientBalance:t.tokenSymbol}):n.setState({insufficientBalance:""}),d.gt(0)&&a.exTrx.gt(0)){var p=a.exTrx;n.setState({calcStatus:!0,shareOfPool:d.div(d.plus(p)).times(100)},(function(){}))}else"--"===a.price1&&d.toNumber()>0&&u.toNumber()>0?n.setState({calcStatus:!0,shareOfPool:new j.a(100)}):n.setState({calcStatus:!1,shareOfPool:new j.a(0)})},n.setInputValue=function(e,t,a){var o;o=t?{num:new j.a(t.num),str:t.str,baseTwo:!1}:{num:new j.a(-1),str:"",baseTwo:!0};var r=n.props.pool,s=r.tokenInfo,c=r.tokenDetail,l=n.state,i=l.tokenTwoValue,d=l.tokenOneValue;l.needCreate;if(s.tokenAddress&&""!==s.tokenAddress&&"--"!==c.price1){if(2===e){var u=i;o.num.eq(-1)||(u=o.num);var p=u.times(c.price1)._toFixed(S.a.trxDecimal,1),m=n.state.fromBalance;Object(j.M)(p).gt(m)&&a?n.setMaxFrom("TRX"):n.setState({tokenTwoValue:u,tokenTwoValueStr:Object(j.c)(o.str||i.toString()),tokenOneValue:Object(j.M)(p),tokenOneValueStr:Object(j.c)(p)},(function(){n.calcEh()}))}else if(1===e){var k=d;o.num.eq(-1)||(k=o.num);var f=k.div(c.price1),b="";f.gt(0)&&(b=f._toFixed(Number(s.tokenDecimal),1));var v=o.str||d.toString(),g=n.state.toBalance;Object(j.M)(b).gt(g)&&a?n.setMaxFrom("token"):n.setState({tokenOneValue:k,tokenOneValueStr:Object(j.c)(v),tokenTwoValue:Object(j.M)(b),tokenTwoValueStr:Object(j.c)(b)},(function(){n.calcEh()}))}}else 1===e&&n.setState({tokenOneValue:o.num,tokenOneValueStr:Object(j.c)(o.str)},(function(){n.calcEh()})),2===e&&n.setState({tokenTwoValue:o.num,tokenTwoValueStr:Object(j.c)(o.str)},(function(){n.calcEh()}))},n.initTokenDetail=function(e){n.props.pool.setData({tokenDetail:{trx:new j.a(0),value:new j.a(0),tokens:new j.a(0),price1:"--",price2:"--",exTrx:new j.a(0),totalSupply:new j.a(0)}}),"createdNoBalance"!==e&&n.setState({createTxt:b.a.get("pool.create_pair_btn"),createState:"",approveTxt:b.a.get("pool.add_approve_btn"),approveState:"",supplyTxt:b.a.get("pool.add_supply_btn"),supplyState:""})},n.selectedToken=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,o,s,l,i,d,u,p,m,k,f,b,v,g,h,x,E,w,y,O,A,T,_,C,V=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=V.length>1&&void 0!==V[1]&&V[1],t.tokenAddress){e.next=3;break}return e.abrupt("return");case 3:if(o=Object(r.a)({},t),s=n.state,l=s.fromOrTo,i=s.tokenOneValue,d=s.tokenOneValueStr,u=s.tokenTwoValue,p=s.tokenTwoValueStr,a||(l=0,i=new j.a(0),u=new j.a(0),d="",p="",n.setState({tokenOneValueStr:d,tokenTwoValueStr:p,tokenOneValue:i,tokenTwoValue:u,fromOrTo:0,calcStatus:!1}),n.props.pool.setData({tokenInfo:Object(r.a)(Object(r.a)({},o),{},{address:""})})),1!==l||n.state.versionChanged){e.next=11;break}if(i.gt(0)){e.next=9;break}return e.abrupt("return");case 9:e.next=14;break;case 11:if(2!==l||n.state.versionChanged){e.next=14;break}if(u.gt(0)){e.next=14;break}return e.abrupt("return");case 14:if(n.props.network.isConnected){e.next=16;break}return e.abrupt("return");case 16:return m=n.props.network.defaultAccount,e.next=19,Object(N.m)(m,o.tokenAddress);case 19:k=e.sent,f=k.exchangeAddr,b=k.allowance,v=k.exTokenBalance,g=k.exTrxBalance,h=k.totalLiquidity,x=k.userLiquidity,E=k.userTrxBalance,w=k.userTokenBalance,y=k.success,a||n.props.pool.setData({tokenInfo:Object(r.a)(Object(r.a)({},o),{},{address:f})}),y?f?(n.setState({networkError:!1}),a?(O=!0,n.state.approvedAmount.gte(n.state.tokenTwoValue)&&(O=!1),n.setState({poolIsExist:0,needApprove:O})):(n.setState({poolIsExist:0,noPoolBalance:0,needCreate:!1}),n.setState({poolIsExist:0,approvedAmount:b.div(new j.a(10).pow(o.tokenDecimal))})),A="--",T="--",h.gt(0)?(_=g.div(new j.a(10).pow(S.a.trxDecimal)),C=v.div(new j.a(10).pow(o.tokenDecimal)),A=_.div(C),T=C.div(_),a&&n.setInputValue(n.state.fromOrTo),(n.props.pool.tokenInfo.address===f||n.state.versionChanged)&&(n.setState({noPoolBalance:0}),n.props.pool.setData({tokenDetail:{trx:new j.a(E).div(new j.a(10).pow(S.a.trxDecimal)),value:new j.a(w).div(new j.a(10).pow(o.tokenDecimal)),tokens:new j.a(x).div(new j.a(10).pow(S.a.trxDecimal)),totalSupply:new j.a(h).div(new j.a(10).pow(S.a.trxDecimal)),price1:A,price2:T,exTrx:_,exToken:C}}))):(n.setState({noPoolBalance:1}),a||n.initTokenDetail("createdNoBalance"))):(n.setState({networkError:!1}),n.setState({poolIsExist:1,noPoolBalance:-1,needCreate:!0}),a||n.initTokenDetail()):n.setState({networkError:!0}),n.getTokenBalance();case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.judgeIssues=function(){var e=Object(l.a)(c.a.mark((function e(t,a,o){var r,s,l,i,d,u,p,m,k,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.fromOrTo=a,r=n.state.fromBalanceStr,s=n.props.pool,l=s.selectTokenOne,i=s.tokenInfo,d={},!t){e.next=15;break}if(u=6,u=1===a?6:i.tokenDecimal,p=Object(j.E)((""+t).replace(/,/g,""),u),m=p.valid,k=p.str,!m){e.next=14;break}t=k,d.num=k,d.str=t,e.next=15;break;case 14:return e.abrupt("return");case 15:f=r,""!==t?""===i.tokenSymbol?(1===a&&(n.setState({tokenTwoValue:new j.a(0),tokenOneValue:new j.a(d.num),tokenOneValueStr:Object(j.c)(t),tokenTwoValueStr:""}),n.setInsufficient(d.num,f,l.tokenSymbol)),2===a&&n.setState({tokenOneValue:new j.a(0),tokenTwoValue:new j.a(d.num),tokenTwoValueStr:Object(j.c)(t),tokenOneValueStr:""})):(1===a&&n.setState({tokenOneValue:new j.a(d.num),tokenOneValueStr:Object(j.c)(t)}),2===a&&n.setState({tokenTwoValue:new j.a(d.num),tokenTwoValueStr:Object(j.c)(t)}),n.setInputValue(a,d,o)):(n.setState({calcStatus:!1,shareOfPool:new j.a(0)}),n.setState({tokenTwoValue:new j.a(0),tokenOneValue:new j.a(0),tokenOneValueStr:"",tokenTwoValueStr:""}));case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.setMaxFrom=function(e){var t=n.state,a=t.fromBalance,o=t.toBalance,r=t.poolIsExist,s=t.noPoolBalance,c=(t.needCreate,n.props.pool.tokenInfo),l=a;l.gt(0)&&o.gt(0)||(l=Object(j.a)(0),o=Object(j.a)(0)),"TRX"===e?((1!==r&&1!==s||""===c.tokenAddress)&&n.setState({tokenTwoValue:o,tokenTwoValueStr:Object(j.c)(o.toString())}),n.setState({tokenOneValue:l,tokenOneValueStr:Object(j.c)(l.toString())},(function(){n.calcEh()})),o.gt(0)&&n.judgeIssues(l,1,!0)):"token"===e&&((1!==r&&1!==s||""===c.tokenAddress)&&n.setState({tokenOneValue:l,tokenOneValueStr:Object(j.c)(l.toString())}),n.setState({tokenTwoValue:o,tokenTwoValueStr:Object(j.c)(o.toString())},(function(){n.calcEh()})),o.gt(0)&&n.judgeIssues(o,2,!0))},n.exchangeInfo=function(){var e=n.state,t=e.poolIsExist,a=e.shareOfPool,o=e.noPoolBalance,r=e.tokenOneValue,s=e.tokenTwoValue,c=n.props.pool,l=c.tokenInfo,i=c.tokenDetail,d="--",u="--";"--"!==i.price1&&(d=i.price1._toFixed(4,1)),"--"!==i.price2&&(u=i.price2._toFixed(4,1)),s.gt(0)&&r.gt(0)&&(1===t||1===o)&&(d=r.div(s),u=s.div(r));var p="--",m="--";p="--"===d?d:Object(j.a)(d).lt(1e-4)?"< 0.0001":Object(j.a)(d)._toFixed(4,1),m="--"===u?m:Object(j.a)(u).lt(1e-4)?"< 0.0001":Object(j.a)(u)._toFixed(4,1);var f=a._toFixed(2,1);return isNaN(f)?f="--":a.gt(0)&&a.lt(.01)&&(f="<0.01"),k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"flex justify-content price-chart-wrap align-items-center",style:{paddingBottom:0,paddingTop:"20px"}},k.a.createElement("div",{className:"token-pairs"},k.a.createElement("div",null,b.a.get("swap.detail_token_info")," "),k.a.createElement("div",null,k.a.createElement(k.a.Fragment,null,Object(j.P)(k.a.createElement(k.a.Fragment,null,k.a.createElement("img",{src:l.tokenLogoUrl?l.tokenLogoUrl:D.a,alt:"logo",onError:function(e){e.target.onerror=null,e.target.src=D.a}}),k.a.createElement("span",null,Object(j.p)(l.tokenSymbol,l.tokenAddress))),l.tokenAddress)))),k.a.createElement(A.a,{token:Object(j.p)(l.tokenSymbol,l.tokenAddress),token_adddress:l.tokenAddress})),k.a.createElement("div",null,k.a.createElement("div",{className:"action-info"},k.a.createElement("div",{className:"info-title"},1===t||1===o?b.a.get("pool.create_initial_title"):b.a.get("pool.add_price_title")),k.a.createElement("div",{className:"info-detail flex"},k.a.createElement("div",{className:"left"},k.a.createElement("p",null,b.a.get("pool.add_unit_text",{toToken:l.tokenSymbol?Object(j.p)(l.tokenSymbol,l.tokenAddress):"--",fromToken:"TRX"})),k.a.createElement("p",null,p)),k.a.createElement("div",{className:"left"},k.a.createElement("p",null,b.a.get("pool.add_unit_text",{toToken:"TRX",fromToken:l.tokenSymbol?Object(j.p)(l.tokenSymbol,l.tokenAddress):"--"})),k.a.createElement("p",null,m)),k.a.createElement("div",{className:"right"},k.a.createElement("p",null,b.a.get("pool.add_share_text")),k.a.createElement("p",null,f,"%")))),1===t||1===o?null:k.a.createElement("div",{className:"action-info"},k.a.createElement("div",{className:"info-title flex between"},k.a.createElement("span",null,b.a.get("pool.base_posi_title")),k.a.createElement("p",{className:"yourPosi"},k.a.createElement("img",{src:B.a,alt:""}),k.a.createElement("img",{src:l.tokenLogoUrl||D.a,onError:function(e){e.target.onerror=null,e.target.src=D.a},alt:""}),k.a.createElement("span",null,"TRX"),k.a.createElement("span",{className:"symbol"},"/"),k.a.createElement("span",null,l.tokenSymbol?Object(j.p)(l.tokenSymbol,l.tokenAddress):"--"))),k.a.createElement("div",{className:"info-detail flex"},k.a.createElement("div",{className:"left"},k.a.createElement("p",null,"TRX"),k.a.createElement("p",null,i.trx.lt(1e-4)&&i.trx.gt(0)?"<0.0001":i.trx._toFixed(4,1))),k.a.createElement("div",{className:"left"},k.a.createElement("p",null,l.tokenSymbol?Object(j.p)(l.tokenSymbol,l.tokenAddress):"--"),k.a.createElement("p",null,i.value.lt(1e-4)&&i.value.gt(0)?"<0.0001":i.value._toFixed(4,1))),k.a.createElement("div",{className:"right"},k.a.createElement("p",null,b.a.get("pool.add_tokens_text")),k.a.createElement("p",null,i.tokens.lt(1e-4)&&i.tokens.gt(0)?"<0.0001":i.tokens._toFixed(4,1)))))))},n.showSettingModal=function(){n.props.network.setData({settingVisible:!0})},n.setLiq=function(e){n.props.pool.setData({actionLiqV2:e})},n.retryGetExchange=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,o,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=r.length>1&&void 0!==r[1]?r[1]:0)>10)){e.next=3;break}return e.abrupt("return","");case 3:return e.next=5,Object(N.l)(t);case 5:if(!(o=e.sent)){e.next=10;break}return e.abrupt("return",o);case 10:return e.next=12,new Promise((function(e){setTimeout((function(){e()}),1e3)}));case 12:return e.abrupt("return",n.retryGetExchange(t,a+1));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createPair=Object(l.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.pool.tokenInfo,a={title:"pair_actions.create",obj:{trx:"TRX",tokenSymbol:Object(j.p)(t.tokenSymbol,t.tokenAddress)}},e.next=4,Object(N.h)(t.tokenAddress,a);case 4:e.sent?n.setState({createActionState:"pending",actionInfo:b.a.get("action.doingBtn"),actionDisabled:!0,actionStarted:!0},(function(){setTimeout(Object(l.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.retryGetExchange(t.tokenAddress);case 2:(a=e.sent)?(n.props.pool.setData({tokenInfo:Object(r.a)(Object(r.a)({},t),{},{address:a})}),n.setState({createActionState:"success",approveActionState:"start"},(function(){n.setApprove()}))):n.setState({createActionState:"failed",actionRetry:"createPair",actionInfo:b.a.get("action.retryBtn"),actionDisabled:!1});case 4:case"end":return e.stop()}}),e)}))),5e3)})):n.setState({createActionState:"error",actionRetry:"createPair",actionInfo:b.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0});case 6:case"end":return e.stop()}}),e)}))),n.setApprove=Object(l.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.pool.tokenInfo,a={title:"pool.add_approve_token",obj:{token:Object(j.p)(t.tokenSymbol,t.tokenAddress)}},e.next=4,Object(N.e)(t.tokenAddress,t.address,a);case 4:e.sent?n.setState({approveActionState:"pending",actionInfo:b.a.get("action.doingBtn"),actionDisabled:!0,actionStarted:!0},(function(){setTimeout((function(){n.setState({approveActionState:"success",actionState:"info"})}),5e3)})):n.setState({approveActionState:"error",actionRetry:"setApprove",actionInfo:b.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0});case 6:case"end":return e.stop()}}),e)}))),n.beforeSupplyLiquidity=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({actionStarted:!0,supplyPopBtn:b.a.get("action.startBtn"),supplyPopBtnDisabled:!0},(function(){n.supplyLiquidity()}));case 1:case"end":return e.stop()}}),e)}))),n.supplyLiquidity=Object(l.a)(c.a.mark((function e(){var t,a,o,r,s,i,d,u,p,m,k,f,v,g,h,x,E;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.tokenOneValue,o=t.tokenTwoValue,r=t.needApprove,s=n.props.pool,i=s.tokenInfo,d=s.tokenDetail,u=n.props.network.settingSlippage,u=Number(u),k=a.times(1e6),f=o.times(new j.a(10).pow(i.tokenDecimal)),d.exTrx.eq(0)?(p=k,m=f):(p="0x".concat(a.times(d.totalSupply).div(d.exTrx).times(1-u/100).times(new j.a(10).pow(S.a.trxDecimal)).integerValue(j.a.ROUND_DOWN).toString(16)),m="0x".concat(a.times(d.exToken).div(d.exTrx).times(1+u/100).times(new j.a(10).pow(i.tokenDecimal)).integerValue(j.a.ROUND_DOWN).toString(16))),v={title:"pair_actions.add",obj:{trxAmount:Object(j.n)(a.toString(),6),trx:"TRX",tokenAmount:Object(j.n)(o.toString(),d.tokenDecimal),tokenSymbol:Object(j.p)(i.tokenSymbol,i.tokenAddress)}},g=n.state.tokenOneValueStr,h=n.state.tokenTwoValueStr,e.t0=N.b,e.t1=i.address,e.t2=p.toString(),e.t3=m.toString(),e.next=16,Object(N.g)(n.props.network.settingDeadline);case 16:return e.t4=e.sent,e.t5=k.toString(),e.t6=v,e.next=21,(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5,e.t6);case 21:e.sent?(x={supplyErrorInfo:"",supplyPopBtn:b.a.get("action.doingBtn"),supplyPopBtnDisabled:!0,actionStarted:!0},r&&(x={actionInfo:b.a.get("action.doingBtn"),actionDisabled:!0,supplyActionState:"pending",actionState:"line",actionStarted:!0}),n.setState(x,(function(){setTimeout(Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({tokenOneValue:new j.a(0),tokenOneValueStr:"",tokenTwoValue:new j.a(0),tokenTwoValueStr:"",successOneValueStr:g,successTwoValueStr:h,actionRetry:"",actionState:"success",actionStarted:!1});case 1:case"end":return e.stop()}}),e)}))),5e3)}))):(E={supplyErrorInfo:b.a.get("action.supplyActErr"),supplyPopBtn:b.a.get("action.retryBtn"),supplyPopBtnDisabled:!1,actionStarted:!0},r&&(E={actionState:"line",supplyActionState:"error",actionRetry:"supplyLiquidity",actionInfo:b.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0}),n.setState(E));case 23:case"end":return e.stop()}}),e)}))),n.initAddModal=function(){var e=n.props.pool.tokenInfo,t=!0;return n.state.approvedAmount.gte(n.state.tokenTwoValue)&&(t=!1),{needApprove:t,supplyPopBtn:b.a.get("pool.popup_supply_btn"),supplyPopBtnDisabled:!1,supplyErrorInfo:"",createActionTitle:b.a.get("action.createAct",{token:Object(j.p)(e.tokenSymbol,e.tokenAddress)}),createActionError:b.a.get("action.createActErr"),createActionFailed:b.a.get("action.createActFailed"),createActionState:"",approveActionTitle:b.a.get("action.approveAct",{token:Object(j.p)(e.tokenSymbol,e.tokenAddress)}),approveActionError:b.a.get("action.approveActErr"),approveActionState:"",supplyActionTitle:b.a.get("action.supplyAct"),supplyActionError:b.a.get("action.supplyActErr"),supplyActionState:"",actionInfo:b.a.get("action.startBtn"),actionDisabled:!0,actionRetry:"",actionState:t?"line":"info",actionStarted:!1,successOneValueStr:"",successTwoValueStr:"",miniPopVisible:!1}},n.showAddModal=function(){n.setState(Object(r.a)(Object(r.a)({},n.initAddModal()),{},{addVisible:!0}),(function(){n.onRetryAction()}))},n.beforeHideAddModal=function(){n.state.actionStarted?n.setState({miniPopVisible:!0}):n.hideAddModal()},n.hideAddModal=function(){n.setState({addVisible:!1},(function(){setTimeout((function(){n.setState(Object(r.a)({},n.initAddModal()))}),1e3)}))},n.miniPopOk=function(){var e=n.state.needApprove;n.setState({miniPopVisible:!1},Object(l.a)(c.a.mark((function t(){var a,o,r,s,l,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.hideAddModal(),!e){t.next=12;break}return a=n.props.pool.tokenInfo,o=n.props.network.defaultAccount,t.next=6,Object(N.m)(o,a.tokenAddress);case 6:r=t.sent,s=r.exchangeAddr,l=r.allowance,i=!0,s&&(i=!1),n.setState({needCreate:i,approvedAmount:l.div(new j.a(10).pow(a.tokenDecimal))});case 12:case"end":return t.stop()}}),t)}))))},n.miniPopCancel=function(){n.setState({miniPopVisible:!1})},n.gotoPool=function(){n.props.pool.setData({actionLiqV2:0})},n.onRetryAction=function(){var e=n.state.needCreate,t=n.state.needApprove,a=n.state.actionRetry;switch(!a&&e&&(a="createPair"),!a&&t&&(a="setApprove"),a){case"createPair":n.setState({createActionState:"start",actionInfo:b.a.get("action.startBtn"),actionDisabled:!0},(function(){n.createPair()}));break;case"setApprove":n.setState({approveActionState:"start",actionInfo:b.a.get("action.startBtn"),actionDisabled:!0},(function(){n.setApprove()}));break;case"supplyLiquidity":n.setState({swapActionState:"start",actionInfo:b.a.get("action.startBtn"),actionDisabled:!1},(function(){n.supplyLiquidity()}))}},n.useSafeMax=function(){var e=n.props.pool.tokenInfo,t=n.state,a=t.poolIsExist,o=t.fromBalanceStr,r=t.noPoolBalance,s=(1===a||1===r)&&""!==e.tokenAddress?S.a.createFeeAmount:S.a.addFeeAmount,c=Object(j.c)(Object(j.M)(o).minus(s));n.judgeIssues(c,1)},n.addLiquidityDisableChange=function(e){n.setState({disableAdd:e})},n.toTokenRef=k.a.createRef(),n.state={fromToken:{tokenSymbol:"TRX",tokenAddress:S.a.trxFakeAddress,tokenDecimal:S.a.trxDecimal,trxBalance:new j.a(0),tokenBalance:new j.a(0)},calcStatus:!1,insufficientBalance:"",fromBalance:new j.a(-1),fromBalanceStr:"--",toBalance:new j.a(-1),toBalanceStr:"--",poolIsExist:-1,noPoolBalance:-1,shareOfPool:new j.a(0),approvedAmount:new j.a(0),tokenOneValueStr:"",tokenTwoValueStr:"",tokenOneValue:new j.a(0),tokenTwoValue:new j.a(0),tokenMap:Object(o.a)({},S.a.trxFakeAddress,{tokenAddress:S.a.trxFakeAddress,address:"",tokenSymbol:"TRX",tokenLogoUrl:S.a.trxLogoUrl,tokenName:"TRX",tokenDecimal:S.a.trxDecimal}),addVisible:!1,createTxt:b.a.get("pool.create_pair_btn"),createState:"",approveTxt:b.a.get("pool.add_approve_btn"),approveState:"",supplyTxt:b.a.get("pool.add_supply_btn"),supplyState:"",createAddr:"",fromOrTo:0,appleDevice:!1,needCreate:!0,needApprove:!0,supplyPopBtn:"",supplyPopBtnDisabled:!1,supplyErrorInfo:"",createActionTitle:"",createActionError:"",createActionFailed:"",createActionState:"",approveActionTitle:"",approveActionError:"",approveActionState:"",supplyActionTitle:"",supplyActionError:"",supplyActionState:"",actionInfo:"",actionDisabled:!1,actionRetry:"",actionState:"",actionStarted:!1,successOneValueStr:"",successTwoValueStr:"",miniPopVisible:!1,versionChanged:!1,status:!1,disableAdd:!1},n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e){e.pool.actionLiqV2!=this.props.pool.actionLiqV2&&1===Number(this.props.pool.actionLiqV2)&&this.props.pool.setData({addRef:this.toTokenRef})}},{key:"render",value:function(){var e=this,t=this.state,a=t.calcStatus,n=t.insufficientBalance,o=t.shareOfPool,r=t.poolIsExist,s=t.fromBalanceStr,c=t.toBalanceStr,l=t.tokenOneValue,i=t.tokenTwoValue,d=t.addVisible,u=t.noPoolBalance,p=t.tokenOneValueStr,m=t.tokenTwoValueStr,f=t.successOneValueStr,g=t.successTwoValueStr,A=t.status,N=t.networkError,T=this.props.pool,C=T.tokenTwoFixed,L=T.tokenInfo,I=T.selectTokenOne,B=T.tokenDetail,M=this.props.network.settingSlippage,R=l._toFixed(4,1),U=i.div(l),q=l.div(i);B.exTrx.gt(0)&&(R=l.times(B.totalSupply).div(B.exTrx)._toFixed(S.a.trxDecimal,1),U=B.price2,q=B.price1);var W=o._toFixed(2,1);isNaN(W)?W="--":o.gt(0)&&o.lt(.01)&&(W="<0.01");var H="";n&&(H=b.a.get("pool.add_insufficient_btn",{value:n}));var X=(1===r||1===u)&&""!==L.tokenAddress,z=X?S.a.createFeeAmount:S.a.addFeeAmount;X?l.lt(S.a.createFeeAmount)&&(H=b.a.get("pool.less_than_btn",{value:S.a.createFeeAmount})):l.lt(S.a.firstTRXLimit)&&0!==u&&(H=b.a.get("pool.less_than_btn",{value:S.a.firstTRXLimit}));var J="";H&&(J=H),a||(J=b.a.get("pool.add_enter_btn"));var G=null;return G=setTimeout((function(){e.setState({status:!0}),clearTimeout(G)}),3e3),k.a.createElement("section",{className:"action-content"},k.a.createElement(P.a,{callback:this.addLiquidityDisableChange}),k.a.createElement("header",{className:"flex"},k.a.createElement("span",{className:"return ib",onClick:function(t){return e.setLiq(0)}},k.a.createElement("img",{src:_.a,alt:"back"})),k.a.createElement(E.a,{titleClass:"add-title",children:b.a.get("pool.add_addLiq_title"),tip:b.a.get("pool.add_addLiq_title_tip"),toolClass:"pool-add-tool",tail:!0,placement:v.a?"left":"bottom"})),N&&k.a.createElement("p",{className:"fz14 red mb20"},b.a.get("pool.network_error")),X&&k.a.createElement("div",{className:"first-pool-copy"},k.a.createElement("div",{className:"bold fz14 black first-pool-title"},b.a.get("pool.create_firstProv_bold")),l.lt(S.a.createFeeAmount)&&k.a.createElement("p",{className:"fz14 first-pool-tip red"},b.a.get("pool.less_than",{value:S.a.createFeeAmount})),k.a.createElement("p",{className:"fz14 first-pool-tip"},b.a.get("pool.create_first_tip1"))),k.a.createElement("div",{className:"flex token-sec"},k.a.createElement("div",{className:"input"},k.a.createElement("p",null,b.a.get("pool.add_input_text")),k.a.createElement("input",{type:"type",className:"token-sec-input token-sec-input-1",placeholder:b.a.get("pool.add_placeholder_text"),onChange:function(t){return e.judgeIssues(t.target.value,1)},value:p})),k.a.createElement("div",{className:"select"},k.a.createElement("p",null,k.a.createElement("span",{className:"tag"},b.a.get("pool.add_balance_text"),": "),k.a.createElement("span",{className:"balance"},Object(j.a)(s).gte(0)?Object(j.o)(s,{dp:6,cutZero:!0}):"--")),k.a.createElement("div",{className:"input-max"},this.props.network.isConnected?k.a.createElement("span",{className:"link",onClick:function(t){return e.setMaxFrom("TRX",{firstAdd:!0})}},b.a.get("swap.input_from_max")):null,k.a.createElement(x.a,{disabled:!0,value:I.tokenAddress,tokenInfo:I,fromPool:!0})))),A&&"TRX"===I.tokenSymbol&&p?Object(j.M)(s).lt(z)?k.a.createElement("div",{className:"safe-amount-tip"},b.a.getHTML("list.trx_tip_3",{value:z})):Object(j.M)(s).minus(z).lt(Object(j.M)(p))?k.a.createElement("div",{className:"safe-amount-tip"},b.a.getHTML("list.trx_tip_1",{value:z})," ",k.a.createElement("em",{onClick:this.useSafeMax},b.a.get("list.trx_tip_2"))):null:null,k.a.createElement("div",{className:"plusBtn flex between"},k.a.createElement("img",{src:V.a,alt:"plus"}),k.a.createElement("span",{className:"link",onClick:this.showSettingModal},b.a.get("pool.add_set_link"))),k.a.createElement("div",{className:"flex token-sec"},k.a.createElement("div",{className:"input"},k.a.createElement("p",null,b.a.get("pool.add_input_text")),k.a.createElement("input",{type:"type",className:"token-sec-input token-sec-input-2",placeholder:b.a.get("pool.add_placeholder_text"),onChange:function(t){return e.judgeIssues(t.target.value,2)},value:m})),k.a.createElement("div",{className:"select"},k.a.createElement("p",null,k.a.createElement("span",{className:"tag"},b.a.get("pool.add_balance_text"),": "),k.a.createElement("span",{className:"balance"},Object(j.a)(c).gte(0)?Object(j.o)(c,{dp:6,cutZero:!0}):"--")),k.a.createElement("div",{className:"input-max"},this.props.network.isConnected?k.a.createElement("span",{className:"link",onClick:function(t){return e.setMaxFrom("token")}},b.a.get("swap.input_from_max")):null,k.a.createElement(x.a,{onChange:this.selectedToken,fromPool:!0,appleDevice:this.state.appleDevice,disabled:C,address:this.props.network.defaultAccount,value:L.tokenAddress,tokenInfo:L,ref:this.toTokenRef})))),""!==L.tokenAddress&&L.tokenAddress.length>0?this.exchangeInfo():null,k.a.createElement("div",{className:"action-btns"},this.props.network.isConnected?J?k.a.createElement(w.a,{type:"single",disabled:!0,info:J}):k.a.createElement(w.a,{type:"single",disabled:this.state.disableAdd,info:this.state.disableAdd?b.a.get("not_available"):b.a.get("pool.add_supply_btn"),onClick:this.showAddModal}):k.a.createElement(w.a,{type:"single",info:b.a.get("pool.add_connect_btn"),onClick:function(t){e.props.network.connectWallet()}})),k.a.createElement(h.a,{title:null,closable:"success"!==this.state.actionState,visible:d,onCancel:this.beforeHideAddModal,className:"pool-modal add-gai",footer:null,style:{marginLeft:Object(j.u)()},width:630,centered:!0},"line"===this.state.actionState&&k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"title normal"},b.a.get("swap.action_supply")),k.a.createElement("div",{className:"ib-parent center"},k.a.createElement("div",null,k.a.createElement("span",{className:"add-value"},p),k.a.createElement("span",{className:"add-token"},Object(j.p)(I.tokenSymbol,I.tokenAddress))),k.a.createElement("span",{className:"plus"},"+"),k.a.createElement("div",null,k.a.createElement("span",{className:"add-value"},m),k.a.createElement("span",{className:"add-token"},Object(j.p)(L.tokenSymbol,L.tokenAddress)))),k.a.createElement("div",{className:"supplyLineTitle"},b.a.get("action.supplyLineTitle")),this.state.needCreate?k.a.createElement(y.a,null,k.a.createElement("span",{status:this.state.createActionState,err:this.state.createActionError,failed:this.state.createActionFailed},this.state.createActionTitle),k.a.createElement("span",{status:this.state.approveActionState,err:this.state.approveActionError},this.state.approveActionTitle),k.a.createElement("span",{status:this.state.supplyActionState,err:this.state.supplyActionError},this.state.supplyActionTitle)):k.a.createElement(y.a,null,k.a.createElement("span",{status:this.state.approveActionState,err:this.state.approveActionError},this.state.approveActionTitle),k.a.createElement("span",{status:this.state.supplyActionState,err:this.state.supplyActionError},this.state.supplyActionTitle)),k.a.createElement(w.a,{type:"single",disabled:this.state.actionDisabled,info:this.state.actionInfo,onClick:this.onRetryAction})),"info"===this.state.actionState&&k.a.createElement(k.a.Fragment,null,k.a.createElement("div",null,b.a.get("pool.popup_receive_title")),k.a.createElement("div",{className:"amount"},k.a.createElement("div",{className:"center"},k.a.createElement("p",{className:"amount-num"},Object(j.o)(R,{dp:S.a.trxDecimal,cutZero:!0})),k.a.createElement("p",{className:"amount-name"},k.a.createElement("span",null,Object(j.p)(I.tokenSymbol,I.tokenAddress)+"/"+Object(j.p)(L.tokenSymbol,L.tokenAddress)+" "+b.a.get("pool.popup_tokens_text")))),k.a.createElement("p",{className:"amount-tip left"},b.a.get("pool.popup_receive_tip",{value:M}))),k.a.createElement("div",{className:"price"},k.a.createElement("p",{className:"flex param"},k.a.createElement("span",{className:"price-key"},Object(j.p)(I.tokenSymbol,I.tokenAddress)+" "+b.a.get("pool.popup_deposited_text")),k.a.createElement("span",{className:"price-value"},k.a.createElement("img",{src:I.tokenLogoUrl,alt:""}),k.a.createElement("span",null,l.toString()))),k.a.createElement("p",{className:"flex param"},k.a.createElement("span",{className:"price-key"},Object(j.p)(L.tokenSymbol,L.tokenAddress)+" "+b.a.get("pool.popup_deposited_text")),k.a.createElement("span",{className:"price-value"},k.a.createElement("img",{src:L.tokenLogoUrl||D.a,alt:"",onError:function(e){e.target.onerror=null,e.target.src=D.a}}),k.a.createElement("span",null,i.toString()))),k.a.createElement("div",{className:"flex param"},k.a.createElement("span",{className:"price-key"},b.a.get("pool.popup_rates_text")),k.a.createElement("div",{className:"price-value ib"},k.a.createElement("p",null,"1 ",Object(j.p)(I.tokenSymbol,I.tokenAddress)," ="," ",Object(j.a)(1).div(Object(j.a)(10).pow(Number(L.tokenDecimal))).gt(U)?"< "+Object(j.a)(1).div(Object(j.a)(10).pow(Number(L.tokenDecimal))).toString():U._toFixed(Number(L.tokenDecimal))," ",Object(j.p)(L.tokenSymbol,L.tokenAddress)),k.a.createElement("p",null,"1 ",Object(j.p)(L.tokenSymbol,L.tokenAddress)," ="," ",Object(j.a)(1).div(Object(j.a)(10).pow(Number(S.a.trxDecimal))).gt(q)?"< "+Object(j.a)(1).div(Object(j.a)(10).pow(Number(S.a.trxDecimal))).toString():q._toFixed(Number(S.a.trxDecimal))," ",Object(j.p)(I.tokenSymbol,I.tokenAddress)))),k.a.createElement("div",{className:"flex between mb30"},k.a.createElement("div",{className:"share-title"},b.a.get("pool.popup_share_text")),k.a.createElement("div",{className:"v-right"},W,"%"))),this.state.supplyErrorInfo&&k.a.createElement("div",{className:"errorMsg"},this.state.supplyErrorInfo),k.a.createElement(w.a,{type:"single",disabled:this.state.supplyPopBtnDisabled,info:this.state.supplyPopBtn,onClick:this.beforeSupplyLiquidity})),"success"===this.state.actionState&&k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"modal-success"},k.a.createElement("img",{src:F.a,alt:""}),k.a.createElement("div",{className:"title green"},b.a.get("action.supplySuccessTitle")),k.a.createElement("div",{className:"ib-parent center mb40"},k.a.createElement("div",null,k.a.createElement("span",{className:"add-value"},f),k.a.createElement("span",{className:"add-token"},Object(j.p)(I.tokenSymbol,I.tokenAddress))),k.a.createElement("span",{className:"plus"},"+"),k.a.createElement("div",null,k.a.createElement("span",{className:"add-value"},g),k.a.createElement("span",{className:"add-token"},Object(j.p)(L.tokenSymbol,L.tokenAddress)))),k.a.createElement(w.a,{type:"single",info:b.a.get("action.closeBtn"),onClick:this.gotoPool}),k.a.createElement("div",{className:"supplyDescTitle"},b.a.get("action.supplyDescTitle"))))),k.a.createElement(O.a,{visible:this.state.miniPopVisible,confirm:this.miniPopOk,cancel:this.miniPopCancel}))}}]),a}(k.a.Component))||n)||n)||n;t.a=R},1599:function(e,t,a){"use strict";a.r(t);var n,o=a(5),r=a(6),s=a(10),c=a(11),l=a(1),i=a.n(l),d=a(224),u=a(1535),p=Object(d.b)("network")(n=Object(d.c)(n=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(u.a,null))}}]),a}(i.a.Component))||n)||n;t.default=p},927:function(e,t,a){"use strict";var n=a(5),o=a(6),r=a(10),s=a(11),c=a(1),l=a.n(c),i=(a(31),a(173),a(978),function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).onClick=function(){o.props.disabled||o.props.state||o.props.onClick&&o.props.onClick()},o.onLeftClick=function(){o.props.lDisabled||o.props.lState||o.props.onLeftClick&&o.props.onLeftClick()},o.onMiddleClick=function(){o.props.mDisabled||o.props.mState||o.props.onMiddleClick&&o.props.onMiddleClick()},o.onRightClick=function(){o.props.rDisabled||o.props.rState||o.props.onRightClick&&o.props.onRightClick()},o.state={},o}return Object(o.a)(a,[{key:"render",value:function(){var e=null;switch(this.props.type){case"trisection":e=l.a.createElement("div",null,l.a.createElement("button",{className:"trisection "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick},this.props.lInfo),l.a.createElement("button",{className:"trisection "+(this.props.mDisabled?"gray":this.props.mState?this.props.mState:"blue"),onClick:this.onMiddleClick},this.props.mInfo),l.a.createElement("button",{className:"trisection "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick},this.props.rInfo));break;case"half":e=l.a.createElement("div",null,l.a.createElement("button",{className:"half "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick},this.props.lInfo),l.a.createElement("button",{className:"half "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick},this.props.rInfo));break;case"single":default:e=l.a.createElement("button",Object.assign({className:"single "+(this.props.disabled?"gray":this.props.state?this.props.state:this.props.btnColor?this.props.btnColor:"blue"),onClick:this.onClick},this.props),this.props.info)}return l.a.createElement(l.a.Fragment,null,e)}}]),a}(l.a.Component));t.a=i},928:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return k})),a.d(t,"c",(function(){return f}));var n=a(0),o=a.n(n),r=a(2),s=a(34),c=a.n(s),l=a(13),i=l.a.accessService,d=l.a.checkWalletServices,u=i.host,p=i.checkUrl,m=function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.get("".concat(u).concat(p)).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){return c.a.get("".concat(u,"/user/positionList"),{params:e}).then((function(e){return e.data}))},f=function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.get("".concat(d.host).concat(d.checkAddrPath),{params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},978:function(e,t,a){},983:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return m}));var n=a(18),o=a(27),r=a(1),s=a(224),c=a(273),l=a(928);function i(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){Object(l.a)().then((function(e){var t=e&&e.country&&"CN"===e.country;n(t)})).catch((function(e){}))})),a}var d=Object(r.memo)((function(e){var t=e.callback,a=i();return Object(r.useEffect)((function(){t&&t(a)}),[a,t]),null})),u=function(){return c.a.network.defaultAccount};Object(s.c)(u);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=u(),a=Object(r.useState)(null),s=Object(o.a)(a,2),c=s[0],i=s[1];return Object(r.useEffect)((function(){t&&Object(l.b)(Object(n.a)(Object(n.a)({},e),{},{userAddress:t})).then((function(e){var t=e.data;i(t)})).catch((function(e){}))}),[t]),c}var m=Object(r.memo)((function(e){var t=e.params,a=e.callback,n=i(),o=p(t);return Object(r.useEffect)((function(){a&&a(!(null===o||void 0===o?void 0:o.userPositionList.length)&&n)}),[n,o,a]),null}))}}]);