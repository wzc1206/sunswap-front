(this["webpackJsonpswap-front"]=this["webpackJsonpswap-front"]||[]).push([[18],{1039:function(t,e,s){"use strict";var o=s(0),a=s.n(o),i=s(39),n=s.n(i),r=s(1426),c=s(169),l=(s(1418),s(16));const p=Object(l.jsx)(c.a,{style:{fontSize:24},spin:!0});class d extends a.a.Component{constructor(t){super(t),this.state={}}render(){const{children:t}=this.props,e=a.a.Children.toArray(t).map(((t,e)=>{const{children:s,status:o,err:a,failed:i}=t.props;let c=s;return"error"===o&&(c=a||s),"pending"===o&&(c=n.a.get("action.doingAct")),"failed"===o&&(c=i||s),Object(l.jsxs)("div",{className:"al_item ".concat(o?"".concat(o):""),children:[Object(l.jsxs)("div",{className:"flex",children:[Object(l.jsx)("span",{className:"al_number",children:e+1}),Object(l.jsx)("span",{className:"al_title".concat(o?" ".concat(o):""),children:c})]}),"pending"===o&&Object(l.jsx)(r.a,{indicator:p,className:"spiny"})]},t.key)}));return Object(l.jsx)("div",{className:"action-line",children:e})}}e.a=d},1109:function(t,e,s){},1418:function(t,e,s){},1424:function(t,e,s){"use strict";var o,a=s(0),i=s.n(a),n=s(253),r=s(39),c=s.n(r),l=s(775),p=s(1038),d=s(4),h=s(11),m=s(16);let j=Object(n.b)("network")(o=Object(n.c)(o=class extends i.a.Component{constructor(t){super(t),this.changeCheckStatus=t=>{this.setState({checkStatus:t})},this.comfirmContinue=()=>{const{checkStatus:t}=this.state;t&&this.props.cb()},this.componentDidMount=()=>{},this.state={checkStatus:!1}}render(){const{visible:t,dealWarningSymbol:e}=this.props,{checkStatus:s}=this.state;let{symbol:o,slippage:a}=e?h.a.deflationToken[e]:{symbol:"",slippage:""};return Object(m.jsx)(l.a,{title:c.a.getHTML("list.deal_warning_title",{value:o}),closable:!1,visible:t,footer:null,style:{marginLeft:Object(d.D)(500)},width:525,className:"list-addtoken-modal deal-warning-modal",centered:!0,children:Object(m.jsxs)("div",{className:"solor-modal-body",children:[Object(m.jsxs)("div",{className:"tips",children:[Object(m.jsx)("div",{className:"tips1",children:c.a.getHTML("list.deal_warning_content_1",{value:o})}),Object(m.jsx)("div",{className:"tips1 yellow",children:c.a.getHTML("list.deal_warning_content_2",{value:a})}),Object(m.jsx)("div",{className:"tips1",children:c.a.getHTML("list.deal_warning_content_3",{value:o})})]}),Object(m.jsx)("div",{className:"check-box"+(s?" checked":""),children:Object(m.jsx)(p.a,{onChange:t=>this.changeCheckStatus(t.target.checked),children:c.a.get("list.i_understand")})}),Object(m.jsx)("div",{className:"btns",children:Object(m.jsx)("button",{onClick:this.comfirmContinue,className:s?"button-active":"",children:c.a.get("list.continue")})})]})})}})||o)||o;e.a=j},1431:function(t,e,s){},1445:function(t,e,s){},1446:function(t,e,s){"use strict";e.a=s.p+"static/media/per.e4b1b756.svg"},1447:function(t,e,s){"use strict";e.a=s.p+"static/media/arrDown.9e9904c5.svg"},1448:function(t,e,s){"use strict";s.p},1449:function(t,e,s){"use strict";e.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAANCAMAAAB4p3UoAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEJQTFRFAAAASFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlDTbkywAAABZ0Uk5TAIDuQFf/9AFYP9cvsf78ImriLWQuePVMmBkAAABCSURBVHicY2DADRiZmNFEWFhZMYXYcAmxIwAHKysnAwMXKyrgZuABkrwQABLg40cxSIBVUIhEAWFWVhFU14hyQQQA99wCt/58bxkAAAAASUVORK5CYII="},1458:function(t,e,s){"use strict";var o,a=s(0),i=s.n(a),n=s(148),r=s.n(n),c=s(39),l=s.n(c),p=s(196),d=s(253),h=s(1428),m=s(1037),j=s(1437),u=s(775),b=s(11),k=s(4),g=(s(1431),s(300)),O=s(296),w=s(426),x=s(109),f=s(1424),v=s(16);const A="REMOVE";let T=Object(d.b)("pool")(o=Object(d.c)(o=class extends i.a.Component{constructor(t){var e;super(t),e=this,this.componentDidMount=()=>{const t=window.localStorage.getItem("solor");if(t){let e=JSON.parse(t);window.localStorage.setItem("solor",JSON.stringify(e)),this.props.pool.setData({solor:e})}},this.onTokenStrChange=async function(t){const{exchanges:s={},allExchanges:o={}}=e.props.pool;try{const s=e.props.type,o=t.target.value.trim(),{tokenSort:a}=e.state;e.setState({tokenStr:o}),1===s||2===s?e.props.pool.setData({swapToken:{...e.props.pool.swapToken,["tokenStr".concat(s)]:o,["tokenSort".concat(s)]:a}}):e.props.pool.setData({liqToken:{...e.props.pool.liqToken,["tokenStr".concat(s)]:o,["tokenSort".concat(s)]:a}}),e.props.pool.searchTokenList(s)}catch(a){console.log("onTokenStrChange: ",a)}},this.onChange=async(t,e)=>{e.stopPropagation();const s=this.props.type;if(1===s||2===s){let e=this.props.pool.swapToken;const o=t.tokenAddress,{fromToken:a,toToken:i}=e;if(1===s&&o===a.tokenAddress||2===s&&o===i.tokenAddress)return;if((1===s||2===s)&&Object.keys(b.a.deflationToken).includes(t.tokenAddress))return void this.setState({modalVisible:!1,dealWarningVisible:!0,callbacks:this.selectSearchCallback,selectSearchItem:t})}this.props.onChangeToken(t)},this.selectSearchCallback=()=>{const{selectSearchItem:t}=this.state;this.setState({dealWarningVisible:!1}),this.props.onChangeToken(t)},this.hideModal=()=>{const{defaultStatus:t}=this.state;1===t?this.setState({modalVisible:!1,customTokenUriLeg:!0}):this.hideListModal()},this.clearStorage=()=>{const{localStorage:t}=b.a;for(const e in t)window.localStorage.removeItem(t[e]);window.location.reload()},this.showListModal=()=>{this.setState({defaultStatus:2})},this.hideListModal=()=>{this.setState({defaultStatus:1})},this.selectTokenList=async t=>{try{const{selectedListUrl:e}=this.props.pool;this.props.pool.setData({selectedListUrl:t}),this.props.pool.setTokensDataIntoLocal(),await this.props.pool.setTokenList(this.props.type),this.setState({defaultStatus:1}),this.props.pool.handleNotifiction(),this.props.pool.setTokensDataIntoLocal()}catch(e){console.log(e)}},this.backTokensCategory=()=>{this.setState({changeStatus:1})},this.onTokenUriChange=t=>{try{const e=t.target.value;this.setState({customTokenUri:e.trim(),errInfo:""})}catch(e){console.log(e)}},this.checkUrl=t=>{const e="";return t||(e=l.a.get("list.err1")),e},this.isListsOver=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).length>=b.a.maxLists},this.addCustomTokens=async()=>{try{const{customTokenUri:t}=this.state;let e="";if(!Object(k.C)(t))return e=l.a.get("list.add_failed_tip"),void this.setState({errInfo:e});const{byUrl:s={}}=this.props.pool;if(s[t]&&!s[t].rs)return e=l.a.get("list.exists"),void this.setState({errInfo:e});if(this.isListsOver(s))return e=l.a.getHTML("list.lists_over",{value:b.a.maxLists}),void this.setState({errInfo:e});const o=await x.a.getTokenListJson(t),{tokens:a=[]}=o;if(a.length>b.a.maxTokens)return e=l.a.getHTML("list.tokens_over",{value:b.a.maxTokens}),void this.setState({errInfo:e});const{key:i="",valid:n=!1}=Object(k.R)(o);if(!n)return e=l.a.get("list.add_err_tip",{value:i}),void this.setState({errInfo:e});this.props.pool.updateTokensData(t,{...o,uri:t,rs:0}),await this.props.pool.setTokenList(this.props.type),this.setState({defaultStatus:1})}catch(t){const e=l.a.get("list.add_failed_retry");this.setState({errInfo:e}),console.log(t)}},this.updateList=async t=>{const{uri:e}=t,{byUrlNew:s={}}=this.props.pool,o=s[e];Object(k.i)(o,(async()=>{await this.props.pool.updateByUrl(o),this.setState({})}))},this.hideRemoveModal=()=>{this.setState({removeId:"",removeModalVisible:!1,removeText:""})},this.showRemoveModal=t=>{try{this.setState({removeId:t.uri,removeModalVisible:!0})}catch(e){console.log(e)}},this.removeTokens=()=>{try{const{removeId:t,removeText:e}=this.state;if(!t)return;if(e.trim()!=A)return;const{byUrl:s={}}=this.props.pool,o=s[t],{cst:a=!1,uri:i=""}=o;a?this.props.pool.deleteByUrlById(i):(o.rs=1,this.props.pool.updateByUrl(o)),this.hideRemoveModal()}catch(t){console.log(t)}},this.inputRemoveText=t=>{const e=t.target.value;this.setState({removeText:e})},this.addSolor=async t=>{try{const{solor:e=[]}=this.props.pool;if(r.a.findIndex(e,(e=>e.tokenAddress===t.tokenAddress))>=0)return;e.unshift({...t,cst:2}),this.props.pool.setData({solor:e}),await this.props.pool.setTokenList(this.props.type),window.localStorage.setItem("solor",JSON.stringify(e))}catch(e){console.log(e)}},this.removeSolor=async t=>{try{const{solor:e=[]}=this.props.pool,{tokenAddress:s}=t;r.a.remove(e,(t=>t.tokenAddress===s)),this.props.pool.setData({solor:e}),await this.props.pool.setTokenList(this.props.type),window.localStorage.setItem("solor",JSON.stringify(e))}catch(e){console.log(e)}},this.getKeys=t=>{try{const e=Object.keys(t);return e.sort(((e,s)=>t[e].name>t[s].name?1:-1))}catch(e){return[]}},this.tokenSortByAsCII=t=>{try{let{tokenList:e}=this.state;if(t=!t){let t=e.sort(((t,e)=>{const s=t.tokenSymbol.toLowerCase(),o=e.tokenSymbol.toLowerCase();return s<o?-1:s>o?1:0}));const s=r.a.findIndex(t,(t=>t.tokenAddress===b.a.trxFakeAddress));if(s>=0){const e=t.splice(s,1);t.unshift(e[0])}this.setState({tokenList:t})}else this.props.pool.setTokenList(this.props.type);this.setState({tokenSort:t})}catch(e){console.log(e)}},this.confirmContinue=async()=>{try{const{checkStatus:t}=this.state,{tokenBrief:e,tokenBriefAnother:s}=this.props.pool,o=Object(k.w)("type");if(!t)return;Object.keys(e).length>0&&await this.addSolor(e),Object.keys(s).length>0&&await this.addSolor(s),this.props.pool.setData({solorModalVisible:!1}),Object.keys(e).length>0&&this.props.onChangeToken&&this.props.onChangeToken(e,"swap"===o?1:3),Object.keys(s).length>0&&this.props.onChangeToken&&this.props.onChangeToken(s,"swap"===o?2:4)}catch(t){console.log(t),this.props.pool.setData({solorModalVisible:!1})}},this.changeCheckStatus=t=>{this.setState({checkStatus:t.target.checked})},this.getClassName=(t,e)=>{try{const s=this.props.type;let o={};const a=t.tokenAddress;o=1===s||2===s?this.props.pool.swapToken:this.props.pool.liqToken;const{fromToken:i,toToken:n}=o;if(a===i.tokenAddress||a===n.tokenAddress||e)return"opac"}catch(s){return""}},this.outInputCheck=t=>{try{const e=this.props.type;let s={};const o=t.tokenAddress;s=1===e||2===e?this.props.pool.swapToken:this.props.pool.liqToken;const{fromToken:a,toToken:i}=s;if(o===a.tokenAddress)return" (".concat(l.a.get("tokens.selected_as_input"),")");if(o===i.tokenAddress)return" (".concat(l.a.get("tokens.selected_as_output"),")")}catch(e){return""}},this.renderSelectedList=(t,e)=>{let{tokenSort:s}=this.state;const{swapToken:o,liqToken:a}=this.props.pool,{fromToken:i,toToken:n}=a;let r=[],c=[],d={};const h=this.props.type;let m="";return 1!==h&&2!==h||(r=o.tokenList,c=o.allTokenList,d=o.tokenMap,m=o["tokenStr".concat(h)]),3!==this.props.type&&4!==this.props.type||(r=a.tokenList,c=a.allTokenList,d=a.tokenMap,m=a["tokenStr".concat(h)]),t&&e&&t[e]?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("input",{className:"select-search",type:"text",placeholder:l.a.get("tokens.select_placeholder_text"),value:m,onChange:this.onTokenStrChange}),Object(v.jsxs)("div",{className:"title flexB",children:[Object(v.jsx)("span",{className:"text",children:l.a.get("tokens.select_tokenName_title")}),Object(v.jsx)("span",{className:"sort "+(s?"active":""),onClick:()=>this.tokenSortByAsCII(s)})]}),Object(v.jsx)("div",{className:"itemList",children:0===c.length?Object(v.jsx)("div",{className:"no-token-fund",children:l.a.get("tokens.loading_tokens")}):r.length?r.map(((t,e)=>{const s=d[t],o=t===b.a.wtrxAddress&&(3===this.props.type||4===this.props.type);return s&&!o?Object(v.jsxs)("div",{className:"flex item ".concat(this.getClassName(s)),onClick:t=>this.onChange(s,t),children:[Object(v.jsxs)("div",{className:"a-center",children:[Object(v.jsx)("img",{src:s.tokenLogoUrl,alt:"",onError:t=>{t.target.onerror=null,t.target.src=O.a}}),Object(v.jsxs)("div",{className:"searchRes left",children:[Object(v.jsxs)("span",{className:"item-content",children:[Object(k.p)(s.tokenSymbol,s.tokenAddress),this.outInputCheck(s)]}),1===s.cst&&Object(v.jsxs)("div",{className:"item-content solor-detail",children:[Object(v.jsx)("span",{children:l.a.get("list.search_by_addr")}),Object(v.jsxs)("span",{className:"ib",onClick:t=>{t.stopPropagation(),this.addSolor(s)},children:["(",l.a.get("list.add"),")"]})]}),2===s.cst&&Object(v.jsxs)("div",{className:"item-content solor-detail",children:[Object(v.jsx)("span",{children:l.a.get("list.add_by_user")}),Object(v.jsxs)("span",{className:"solor-remove ib",onClick:t=>{t.stopPropagation(),this.removeSolor(s)},children:["(",l.a.get("list.remove_token"),")"]})]})]})]}),s.tokenAddress===b.a.trxFakeAddress?Object(v.jsx)("div",{children:Object(v.jsx)("p",{children:Object(k.o)(d[s.tokenAddress]?d[s.tokenAddress].balance:s.balance)})}):Object(v.jsxs)("div",{className:"inline-flex balanceAndAddr",children:[Object(v.jsx)("p",{children:d[s.tokenAddress]&&!isNaN(d[s.tokenAddress].balance)?Object(k.o)(d[s.tokenAddress].balance):"--"}),Object(v.jsx)("p",{children:Object(p.a)(window.navigator).any?Object(k.l)(s.tokenAddress,4,4):Object(k.l)(s.tokenAddress,8,10)})]})]},s.tokenAddress+e):Object(v.jsx)(v.Fragment,{})})):Object(v.jsx)("div",{className:"no-token-fund",children:l.a.getHTML("list.no_token_found")})}),Object(v.jsxs)("div",{className:"list-switch flexB",children:[Object(v.jsxs)("div",{className:"list-switch-name",children:[Object(v.jsx)("img",{src:t[e].logoURI,alt:""}),Object(v.jsx)("span",{children:t[e].name||""})]}),Object(v.jsx)("button",{className:"list-switch-btn",onClick:()=>this.showListModal(),children:l.a.get("list.switch")})]})]}):Object(v.jsx)(v.Fragment,{})},this.renderUpdateListItem=t=>{const{byUrlNew:e={}}=this.props.pool,{version:s={},uri:o}=t,a=e[o]||{},i=a.version||{};console.log(s,i);const n=Object(k.h)(s,i),{success:c=!1}=Object(k.g)(t,a);return!r.a.isEqual(a,{})&&n&&c&&Object(v.jsx)(h.a.Item,{onClick:()=>{this.updateList(t)},children:l.a.get("list.update")})},this.adjustAndroid=t=>{let e=Object(k.e)(t);this.setState({adjust:e})},this.renderTokensCategory=()=>{const{customTokenUri:t,lang:e,errInfo:s}=this.state,{byUrl:o,selectedListUrl:a}=this.props.pool,i=this.getKeys(o);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("ul",{className:"list-list",children:[o&&i.length&&i.map((t=>{const s=o[t];return!s.rs&&Object(v.jsxs)("li",{className:"flex",children:[Object(v.jsxs)("div",{className:"drop-parent flexB w-80",children:[Object(v.jsxs)("div",{className:"left flex",children:[Object(v.jsx)("img",{src:s.logoURI,alt:"",className:"logo"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"name",children:s.name}),Object(v.jsx)("div",{className:"source",children:Object(k.s)(s.uri)})]})]}),Object(v.jsx)(m.a,{trigger:"click",placement:"bottomRight",overlay:Object(v.jsx)(h.a,{children:Object(v.jsxs)(h.a.ItemGroup,{title:Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"key",children:l.a.get("list.version")}),Object(v.jsx)("span",{className:"value",children:Object(k.A)(s.version)})]}),children:[Object(v.jsxs)(h.a.Item,{children:[" ",Object(v.jsx)("a",{href:"".concat(b.a.justList,"?lang=").concat(e,"#/detail?uri=").concat(s.uri),target:s.uri||"_blank",children:l.a.get("list.view")})]}),this.renderUpdateListItem(s),s.uri!==a&&Object(v.jsx)(h.a.Item,{onClick:()=>{this.showRemoveModal(s)},children:l.a.get("list.remove")})]})}),children:Object(v.jsx)("a",{className:"ant-dropdown-link",onClick:t=>t.preventDefault()})})]}),Object(v.jsx)("div",{className:"right",children:Object(v.jsx)("button",{className:String(a)===String(s.uri)?"selected":"",onClick:()=>this.selectTokenList(t),children:String(a)===String(s.uri)?l.a.get("list.selected"):l.a.get("list.select")})})]},s.name+"_"+t)})),Object(v.jsx)("div",{className:"list-more",children:Object(v.jsx)("a",{href:"en-US"===e?b.a.moreList.en:b.a.moreList.zh,target:"_blank",children:l.a.get("more.more")})})]}),Object(v.jsx)("div",{className:"list-add",children:Object(v.jsxs)("div",{className:"list-input-line flex",children:[Object(v.jsx)(j.a,{type:"text",className:"list-input w-80",placeholder:"https://",value:t,onChange:this.onTokenUriChange,onFocus:()=>this.adjustAndroid(!0),onBlur:()=>this.adjustAndroid(!1)}),Object(v.jsx)("div",{className:"right",children:Object(v.jsx)("button",{onClick:this.addCustomTokens,disabled:!t.trim(),children:l.a.get("list.add_list")})})]})}),!!s&&Object(v.jsxs)("div",{className:"list-add-errTip",children:[Object(v.jsx)("span",{className:"icon",children:"!"}),Object(v.jsx)("span",{className:"text",children:s})]}),Object(v.jsx)("div",{className:"list-footer",children:Object(v.jsx)("a",{href:"".concat(b.a.justList,"?lang=").concat(e,"#/home"),className:"link",target:"justList",children:l.a.get("list.view_list_home")})})]})},this.hideSolorModal=()=>{this.props.pool.setData({solorModalVisible:!1})},this.state={lang:window.localStorage.getItem("lang")||l.a.options.currentLocale,tokenStr:"",defaultStatus:1,removeModalVisible:!1,removeText:"",removeId:"",solor:JSON.parse(window.localStorage.getItem("solor")||"[]"),customTokenUri:"",customTokenUriLeg:!0,errInfo:"",tokenSort:!1,checkStatus:!1,dealWarningVisible:!1,selectSearchItem:""}}render(){const{defaultStatus:t,removeText:e,removeModalVisible:s,adjust:o,dealWarningVisible:a,callbacks:n,selectSearchItem:r}=this.state,{byUrl:c,selectedListUrl:p}=this.props.pool;return Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsx)(u.a,{title:1===t?Object(v.jsx)(g.a,{tip:l.a.get("tokens.add_choose_select_tip"),toolClass:"select-ib left",children:Object(v.jsx)("span",{className:"add-title",children:l.a.get("tokens.add_choose_select")})}):Object(v.jsxs)("div",{className:"list-modal-header",children:[Object(v.jsx)("img",{src:w.a,alt:"",onClick:()=>this.hideListModal()}),Object(v.jsx)("span",{className:"add-title",children:l.a.get("list.select_list")})]}),closable:!0,visible:this.props.modalVisible,onCancel:this.props.onCancel,className:"select-modal "+(1===t?"":"list-modal "+(o?"adjust":"")),footer:null,style:{marginLeft:Object(k.u)()},width:630,centered:!0,children:Object(v.jsx)(v.Fragment,{children:1===t?this.renderSelectedList(c,p):this.renderTokensCategory()})}),Object(v.jsxs)(u.a,{title:"",closable:!1,visible:s,footer:null,style:{marginLeft:Object(k.D)()},width:420,className:"list-remove-modal",children:[Object(v.jsx)("div",{className:"title",children:l.a.get("list.remove_confirm")}),Object(v.jsx)("div",{className:"tips",children:l.a.get("list.remove_confirm_tip")}),Object(v.jsx)("input",{type:"text",className:"list-input w-80",value:e,onChange:this.inputRemoveText}),Object(v.jsxs)("div",{className:"btns",children:[Object(v.jsx)("button",{onClick:this.removeTokens,disabled:e.trim()!==A,children:l.a.get("list.confirm")}),Object(v.jsx)("button",{onClick:this.hideRemoveModal,children:l.a.get("list.cancel")})]})]}),a&&Object(v.jsx)(f.a,{visible:a,cb:n,dealWarningSymbol:r.tokenAddress})]})}})||o)||o;e.a=T},1459:function(t,e,s){"use strict";var o=s(0),a=s.n(o),i=s(39),n=s.n(i),r=s(4),c=s(296),l=s(16);class p extends a.a.Component{constructor(t){super(t)}render(){const{token:t={}}=this.props;return Object(l.jsx)("p",{className:"dragDown "+(this.props.disabled?"no-bg":""),onClick:()=>this.props.showModal(),children:t.tokenAddress?Object(l.jsxs)(a.a.Fragment,{children:[Object(l.jsx)("img",{src:t.tokenLogoUrl||c.a,alt:"",onError:t=>{t.target.onerror=null,t.target.src=c.a}}),Object(l.jsx)("span",{children:Object(r.p)(t.tokenSymbol,t.tokenAddress)})]}):Object(l.jsxs)(l.Fragment,{children:[n.a.get("tokens.add_choose_select")," "]})})}}e.a=p},1483:function(t,e,s){"use strict";var o=s(0),a=s.n(o),i=s(196),n=s(253),r=s(39),c=s.n(r),l=s(1494),p=s(303),d=s(775),h=s(1459),m=s(300),j=s(1458),u=s(830),b=s(1039),k=s(944),g=s(11),O=s(4),w=s(309),x=s.n(w),f=s(148),v=s.n(f),A=s(70);class T{constructor(t,e,s){x()(t.length>0,"PAIRS"),x()(t[0].t0.tokenAddress===e.tokenAddress||t[0].t1.tokenAddress===e.tokenAddress,"INPUT"),x()("undefined"===typeof s||t[t.length-1].t0.tokenAddress===s.tokenAddress||t[t.length-1].t1.tokenAddress===s.tokenAddress,"OUTPUT");const o=[e];t.map(((t,e)=>{const s=o[e];x()(s.tokenAddress===t.t0.tokenAddress||s===t.t1.tokenAddress,"PATH");const a=s.tokenAddress===t.t0.tokenAddress?t.t1:t.t0;o.push(a)})),this.pairs=t,this.path=o,this.input=e,this.output=s,this.midPrice=this.getMidPrice()}getMidPrice(){const t=[];this.pairs.map((e=>{t.push(S(e))}));return t.reduce(((t,e)=>Object(O.a)(t).times(e.reservePrice)),1)}}const S=t=>({pair:t,reservePrice:Object(O.a)(t.r0).div(t.r1)});var y=s(314);const N=1,C=2,I=Object(O.a)(.005),V=(t,e)=>{const s=t.r0,o=t.r1;if(!Object(O.a)(s).gt(0)||!Object(O.a)(o).gt(0))return{value:Object(O.a)(0)};const a=Object(O.a)(e).times(997),i=a.times(o),n=s.times(1e3).plus(a);return{numerator:i,denominator:n,value:i.div(n)}},F=(t,e)=>{const s=t.r0,o=t.r1;if(!Object(O.a)(s).gt(0)||!Object(O.a)(o).gt(0))return{value:Object(O.a)(0)};const a=Object(O.a)(s).times(e).times(1e3),i=Object(O.a)(o).minus(e).times(997);return i.eq(0)?{value:Object(O.a)(0)}:{numerator:a,denominator:i,value:a.div(i).plus(1)}},D=(t,e,s,o)=>{if(x()(s>0,"MAX_SIZE_ZERO"),x()(t.length<=s,"ITEMS_SIZE"),0===t.length)return t.push(e),null;{const a=t.length===s;if(a&&o(t[t.length-1],e)<=0)return e;let i=0,n=t.length;for(;i<n;){const s=i+n>>>1;o(t[s],e)<=0?i=s+1:n=s}return t.splice(i,0,e),a?t.pop():null}},M=(t,e)=>{const s=((t,e)=>t.outputAmount.outputAmount.eq(e.outputAmount.outputAmount)?t.inputAmount.inputAmount.eq(e.inputAmount.inputAmount)?0:t.inputAmount.inputAmount.lt(e.inputAmount.inputAmount)?-1:1:t.outputAmount.outputAmount.lt(e.outputAmount.outputAmount)?1:-1)(t,e);return 0!==s?s:t.priceImpact.lt(e.priceImpact)?-1:t.priceImpact.gt(e.priceImpact)?1:t.route.path.length-e.route.path.length},L=async function(t,e,s){let{maxNumResults:o=3,maxHops:a=3}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{...e},r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];x()(t.length>0,"PAIRS"),x()(a>0,"MAX_HOPS"),x()(e.tokenAddress===n.tokenAddress||i.length>0,"INVALID_RECURSION");const c={...n},l={...s};for(let d=0;d<t.length;d++){const n=t[d];if(n.t0.tokenAddress!==c.tokenAddress&&n.t1.tokenAddress!==c.tokenAddress)continue;if(n.t1.tokenAddress===c.tokenAddress){let t=null,e=null;t=v.a.cloneDeep(n.t0),n.t0=v.a.cloneDeep(n.t1),n.t1={...t},e=n.r0,n.r0=n.r1,n.r1=e}else n.t0.tokenAddress===c.tokenAddress&&(n.t0={...n.t0,...c});if(!n.r0||!n.r1){const t=await Object(A.r)(n.t0.tokenAddress,n.t1.tokenAddress,n.pairAddress||Object(O.j)(n.t0.tokenAddress,n.t1.tokenAddress));n.r0=t.reserveA,n.r1=t.reserveB}if(!n.r0.gt(0)||!n.r1.gt(0))continue;let h,m=null;try{if(n.t0.value=c.value,m=V(n,c.value),Object(O.a)(m.value._toFixedNew(Number(n.t1.tokenDecimal),1)).lte(0))continue;h={...n.t1,value:m.value},n.t1.value=m.value,n.numerator=m.numerator,n.denominator=m.denominator}catch(p){throw p}if(h.tokenAddress===l.tokenAddress)D(r,new B(new T([...i,{...n}],e,s),e,N),o,M);else if(a>1&&t.length>1){const c=t.slice(0,d).concat(t.slice(d+1,t.length));await L(c,e,s,{maxNumResults:o,maxHops:a-1},[...i,{...n}],h,r)}}return r},R=async function(t,e,s,o){let{maxNumResults:a=3,maxHops:i=3}=o,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];x()(t.length>0,"PAIRS"),x()(i>0,"MAX_HOPS"),x()(s.tokenAddress===r.tokenAddress||n.length>0,"INVALID_RECURSION");const l={...r},p={...e};for(let h=0;h<t.length;h++){const o=t[h];if(o.t0.tokenAddress!==l.tokenAddress&&o.t1.tokenAddress!==l.tokenAddress)continue;if(o.t0.tokenAddress===l.tokenAddress){let t=null,e=null;t=v.a.cloneDeep(o.t0),o.t0=v.a.cloneDeep(o.t1),o.t1={...t},e=o.r0,o.r0=o.r1,o.r1=e}else o.t1.tokenAddress===l.tokenAddress&&(o.t1={...o.t1,...l});if(!o.r0||!o.r1){const t=await Object(A.r)(o.t0.tokenAddress,o.t1.tokenAddress,o.pairAddress||Object(O.j)(o.t0.tokenAddress,o.t1.tokenAddress));o.r0=t.reserveA,o.r1=t.reserveB}if(!o.r0.gt(0)||!o.r1.gt(0))continue;let r,m=null;try{if(o.t1.value=l.value,m=F(o,l.value),Object(O.a)(m.value._toFixedNew(Number(o.t0.tokenDecimal),1)).lte(0)){console.log("input too low");continue}r={...o.t0,value:m.value},o.t0.value=m.value,o.numerator=m.numerator,o.denominator=m.denominator}catch(d){throw d}if(r.tokenAddress===p.tokenAddress)D(c,new B(new T([{...o},...n],e,s),s,C),a,M);else if(i>1&&t.length>1){const l=t.slice(0,h).concat(t.slice(h+1,t.length));await R(l,e,s,{maxNumResults:a,maxHops:i-1},[o,...n],r,c)}}return c},P=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.b;if(t&&!e)return!1;if(e&&!t)return!0;if(t&&e){if(t.tradeType!==e.tradeType||!t.inputAmount.tokenAddress===e.inputAmount.tokenAddress||!t.outputAmount.tokenAddress===e.outputAmount.tokenAddress)throw new Error("Comparing incomparable trades");return s.eq(y.b)?t.executionPrice.lt(e.executionPrice):t.executionPrice.times(s.plus(y.a)).lt(e.executionPrice)}};class B{constructor(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N;this.route=t,this.tradeType=s;const o=new Array(t.path.length);if(s===N){x()(e.tokenAddress===t.input.tokenAddress,"INPUT"),o[0]=e;for(let e=0;e<t.path.length-1;e++){const s=t.pairs[e],a=V(s,s.t0.value);o[e+1]={...s.t1,value:a.value}}this.inputAmount={...t.input,inputAmount:t.input.value},this.outputAmount={...t.output,numerator:o[o.length-1].numerator,denominator:o[o.length-1].denominator,outputAmount:o[o.length-1].value}}else{x()(e.tokenAddress===t.output.tokenAddress,"OUTPUT"),o[o.length-1]=e;for(let e=t.path.length-1;e>0;e--){const s=t.pairs[e-1],a=F(s,s.t1.value);o[e-1]={...s.t1,...a}}this.inputAmount={...t.input,numerator:o[0].numerator,denominator:o[0].denominator,inputAmount:o[0].value},this.outputAmount={...t.output,numerator:e.numerator,denominator:e.denominator,outputAmount:t.output.value}}this.executionPrice=Object(O.a)(this.outputAmount.outputAmount).div(this.inputAmount.inputAmount),this.priceImpact=E(t.midPrice,this.inputAmount,this.outputAmount,t.path||[])}}const E=(t,e,s,o)=>{const a=o.length;if(a>0){const o=Object(O.a)(1).minus(Object(O.a)(a-1).times(.003)),i=Object(O.a)(t).times(s.outputAmount).div(e.inputAmount);return o.minus(i).times(100).abs().times(-1)}return null};s(1445);var U,H=s(1446),q=s(1447),X=(s(1448),s(1449)),Z=s(296),W=s(945),J=s.p+"static/media/trans-route.a197ce9c.svg",Q=s.p+"static/media/trans-route-white.c4f0e2f9.svg",K=s(16);let Y=Object(n.b)("network")(U=Object(n.b)("pool")(U=Object(n.c)(U=class extends a.a.Component{constructor(t){var e;super(t),e=this,this.componentWillUnmount=()=>{clearInterval(this.timer),clearInterval(this.timer1)},this.isSwapTRX=function(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).tokenAddress,s=t.tokenAddress,{trxFakeAddress:o,wtrxAddress:a}=g.a;return e===o&&s===a||e===a&&s===o},this.checkInput=()=>{const t=this.props.pool.swapToken.fromToken,e=this.props.pool.swapToken.toToken,s=t.tokenAddress,o=e.tokenAddress,a=this.state.dependentValue,i=Object(O.a)(t.balance),n=(e.balance,t=>{this.setState({actionError:t})}),{fromValue:r,toValue:l,receivedFlag:p,bestTrade:d,recipientAddr:h,swapTRXState:m}=this.state;if(this.state.miniError)return n(c.a.get("swap.action_zero"));if(!m)if(h){if(!Object(O.B)(h))return this.setState({recipientValid:!1}),n(c.a.get("swap.action_invalid_recipient"));this.setState({recipientValid:!0})}else if(this.setState({recipientValid:!1}),this.state.addRecipient)return n(c.a.get("swap.action_enter_recipient"));if(!s&&!Object(O.w)("t0")||!o&&!Object(O.w)("t1"))return n(c.a.get("swap.action_select_token"));if(!r)return!p&&l?Object(O.a)(l).lte(0)?n(c.a.get("swap.action_enter_amount")):n(c.a.get("swap.action_insufficient_liquidity")):n(c.a.get("swap.action_enter_amount"));if(Object(O.M)(r).lte(0))return n(c.a.get("swap.action_enter_amount"));if(m&&i&&i.lt(Object(O.M)(r)))return n(c.a.get("swap.action_insufficient",{token:Object(O.p)(t.tokenSymbol,t.tokenAddress)}));if(p){if(!l)return n(c.a.get("swap.action_insufficient_liquidity"));if(i&&i.lt(Object(O.M)(r)))return n(c.a.get("swap.action_insufficient",{token:Object(O.p)(t.tokenSymbol,t.tokenAddress)}));if(Object(O.M)(r).gt(t.approvedAmount))return this.setState({actionError:"",needApprove:!0})}else{if(!m&&i.lt(Object(O.M)(a)))return n(c.a.get("swap.action_insufficient",{token:Object(O.p)(t.tokenSymbol,t.tokenAddress)}));if(!m&&Object(O.a)(a).gt(t.approvedAmount))return this.setState({actionError:"",needApprove:!0})}this.setState({actionError:"",needApprove:!1})},this.onFromValueChange=t=>{let e=t.target.value,s=this.state.toValue;if(e){const{valid:t,str:o}=Object(O.E)(e.replace(/,/g,""),this.props.pool.swapToken.fromToken.tokenDecimal);if(!t)return;e=o,this.props.pool.swapToken.fromToken.tokenAddress&&this.props.pool.swapToken.toToken.tokenAddress||(s="")}else s="";this.setState({fromValue:Object(O.c)(e),toValue:Object(O.c)(s),receivedFlag:!0},(async()=>{await this.calcPrice(),this.checkInput()}))},this.onToValueChange=t=>{let e=this.state.fromValue,s=t.target.value;if(s){const{valid:t,str:o}=Object(O.E)(s.replace(/,/g,""),this.props.pool.swapToken.toToken.tokenDecimal);if(!t)return;s=o,this.props.pool.swapToken.fromToken.tokenAddress&&this.props.pool.swapToken.toToken.tokenAddress||(e="")}else e="";this.setState({fromValue:Object(O.c)(e),toValue:Object(O.c)(s),receivedFlag:!1},(async()=>{await this.calcPrice()}))},this.onFromValueBlur=()=>{let t=this.state.fromValue;t&&this.setState({fromValue:Object(O.c)(t)})},this.onToValueBlur=()=>{let t=this.state.toValue;t&&this.setState({toValue:Object(O.c)(t)})},this.calcPriceTRXSwap=(t,e)=>{let{receivedFlag:s,fromValue:o,toValue:a}=this.state;const i=Object(O.a)(10).pow(t.tokenDecimal),n=Object(O.a)(10).pow(e.tokenDecimal);s?a=Object(O.M)(o).gt(0)?Object(O.M)(o).times(i).div(n)._toFixed(Number(e.tokenDecimal),1):"":o=Object(O.M)(a).gt(0)?Object(O.M)(a).times(n).div(i)._toFixed(Number(t.tokenDecimal),1):"",this.setState({fromValue:Object(O.c)(o),toValue:Object(O.c)(a)},(()=>{this.checkInput(),this.calcDependentValue(o,a)}))},this.calcPrice=async()=>{try{const{fromToken:t,toToken:e,pairAddress:s,validPairs:o=[]}=this.props.pool.swapToken;let{receivedFlag:a,fromValue:i,toValue:n}=this.state;const r=this.isSwapTRX(t,e);if(r)return this.setState({swapTRXState:r,priceStr:1,priceInverseStr:1},(()=>{this.calcPriceTRXSwap(t,e)}));this.setState({swapTRXState:!1}),this.state.swapTRXState=!1;let c="-",l="-";const p=Object(O.a)(10).pow(t.tokenDecimal),d=Object(O.a)(10).pow(e.tokenDecimal);t.value=Object(O.M)(i).times(p),e.value=Object(O.M)(n).times(d);const h=await async function(t,e,s,o,a){let{maxHops:i=g.a.MAX_HOPS}=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(Object(O.a)(t).gt(0)&&e.tokenAddress&&s.tokenAddress&&o.length>0){if(1===i){const i={maxHops:1,maxNumResults:1};if(a===N){var n;const a={value:Object(O.a)(t),...e};return null!==(n=(await L(o,a,s,i))[0])&&void 0!==n?n:null}{var r;const a={value:Object(O.a)(t),...s};return null!==(r=(await R(o,e,a,i))[0])&&void 0!==r?r:null}}let p=null;for(let n=1;n<=i;n++){const i={maxHops:n,maxNumResults:1};let r=null;if(a===N){var c;const a={value:Object(O.a)(t),...e};r=null!==(c=(await L(o,a,s,i))[0])&&void 0!==c?c:null}else{var l;const a={value:Object(O.a)(t),...s};r=null!==(l=(await R(o,e,a,i))[0])&&void 0!==l?l:null}P(p,r,I)&&(p=r)}return{bestTrade:p,fromTokenAddress:e.tokenAddress,toTokenAddress:s.tokenAddress,amountSpecified:t}}return{bestTrade:null,fromTokenAddress:e.tokenAddress,toTokenAddress:s.tokenAddress,amountSpecified:t}}(a?Object(O.M)(i).times(p):Object(O.M)(n).times(d),{...t},{...e},[...o],a?1:2),{bestTrade:m,fromTokenAddress:j,toTokenAddress:u,amountSpecified:b}=h;if(j===t.tokenAddress&&u===e.tokenAddress)if(a&&Object(O.M)(this.state.fromValue).times(p).eq(b)||!a&&Object(O.M)(this.state.toValue).times(d).eq(b)){if(this.state.bestTrade=m,this.setState({bestTrade:m}),!m)return void this.initStateData();const{tradeType:s,inputAmount:o,outputAmount:r,route:h,executionPrice:j,priceImpact:u}=m,b=r.outputAmount,k=o.inputAmount;if(a){const t=b.div(d)._toFixed(Number(e.tokenDecimal),1);n=Object(O.a)(t).gt(0)?t:""}else{const e=k.div(p)._toFixed(Number(t.tokenDecimal),1);i=Object(O.a)(e).gt(0)?e:""}c=k.div(b).div(p).times(d),l=j.div(d).times(p),this.calcDependentValue(i,n);let g="-",w=Object(O.M)(i);if(h&&h.path&&h.path.length){const e=h.path.length;w=w.times(.003).times(e-1),g=w._toFixed(Number(t.tokenDecimal),1)}this.setState({priceStr:c,priceInverseStr:l,fromValue:Object(O.c)(i),toValue:Object(O.c)(n),liquidityProviderFee:g},(()=>{this.checkInput()})),this.calcPriceImpact(u)}else this.checkInput()}catch(t){console.error(t)}},this.calcDependentValue=(t,e)=>{const s=this.state.swapTRXState,o=new O.a(this.props.network.settingSlippageV2).div(100);let a=new O.a(0),i=g.a.trxDecimal;this.state.receivedFlag?(a=s?Object(O.M)(e):Object(O.M)(e).times(Object(O.a)(1).minus(o)),i=this.props.pool.swapToken.toToken.tokenDecimal):(a=s?Object(O.M)(t):Object(O.M)(t).times(Object(O.a)(1).plus(o)),i=this.props.pool.swapToken.fromToken.tokenDecimal),this.setState({dependentValue:a,dependentValueSunBig:Object(O.a)(a).times(new O.a(10).pow(i))})},this.calcPriceImpact=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"--",s="",o="--";o=Object(O.a)(t).lte(0)&&Object(O.a)(t).gt(-.01)?"0.00%":"".concat(Object(O.a)(t)._toFixed(2),"%"),s=Object(O.a)(t).lte(-15)?"red":Object(O.a)(t).gt(-15)&&Object(O.a)(t).lte(-5)?"orange":"blue",e.setState({priceImpact:o,priceImpactColor:s})},this.setMaxFrom=()=>{const{swapToken:t}=this.props.pool,{fromToken:e}=t,s=Object(O.a)(e.balance);if(!Object(O.a)(s).gte(0))return;let o=s;const a=o.gt(0)?o._toFixed(Number(6),1):"0";this.setState({fromValue:Object(O.c)(a),receivedFlag:!0},(async()=>{await this.calcPrice()}))},this.addSolor=t=>{try{t.tokenDecimal=Number(t.tokenDecimal);const{solor:e=[]}=this.props.pool,s=_.findIndex(e,(e=>e.tokenAddress===t.tokenAddress));s>=0?e.splice(s,1,{...t,cst:2}):e.unshift({...t,cst:2}),this.props.pool.setData({solor:e}),window.localStorage.setItem("solor",JSON.stringify(e))}catch(e){console.log(e)}},this.onFromTokenChange=async t=>{try{const{swapToken:e}=this.props.pool;if(t.tokenDecimal=Number(t.tokenDecimal),t.tokenAddress===e.fromToken.tokenAddress)return;if(this.props.pool.showModal(1,!1),t.cst&&this.addSolor(t),t.tokenAddress===e.toToken.tokenAddress)return this.switchToken();let s=this.state.fromValue;s&&t.tokenDecimal!=e.fromToken.tokenDecimal&&(s=Object(O.M)(s)._toFixed(Number(t.tokenDecimal),1)),e.fromToken={...t},this.props.pool.setData({swapToken:e}),this.setState({fromValue:Object(O.c)(s),needApprove:!1},(async()=>{await this.props.pool.useAllCurrencyCombinations(),await this.props.pool.getBalanceAndApprove(),await this.calcPrice()}))}catch(e){this.props.pool.showModal(1,!1),console.log(e)}},this.onToTokenChange=async t=>{const{swapToken:e}=this.props.pool;if(t.tokenAddress!==e.toToken.tokenAddress){this.props.pool.showModal(2,!1),t.cst&&this.addSolor(t);try{if(t.tokenAddress===e.fromToken.tokenAddress)return this.switchToken();t.tokenDecimal=Number(t.tokenDecimal);let s=this.state.toValue;s&&t.tokenDecimal!=e.toToken.tokenDecimal&&(s=new O.a(s)._toFixed(Number(t.tokenDecimal),1)),e.toToken={...t},this.props.pool.setData({swapToken:e}),this.setState({toValue:s},(async()=>{await this.props.pool.useAllCurrencyCombinations(),await this.props.pool.getBalanceAndApprove(),await this.calcPrice()}))}catch(s){this.props.pool.showModal(2,!1),console.error(s)}}},this.showAddRecipient=()=>{this.setState({addRecipient:!0},(()=>{this.checkInput()}))},this.switchPriceInverseFlag=()=>{this.setState({priceInverseFlag:!this.state.priceInverseFlag})},this.initStateData=()=>{let{receivedFlag:t,fromValue:e,toValue:s}=this.state;t?s="":e="";this.setState({fromValue:Object(O.c)(e),toValue:s,priceStr:"-",priceInverseStr:"-",dependentValue:"",priceImpact:"",priceImpactColor:"",liquidityProviderFee:"",actionError:c.a.get("swap.action_insufficient_liquidity")})},this.switchToken=()=>{const t={...this.props.pool.swapToken.fromToken},e={...this.props.pool.swapToken.toToken};this.props.pool.swapToken.fromToken=e,this.props.pool.swapToken.toToken=t;const{fromToken:s,toToken:o}=this.props.pool.swapToken;let{receivedFlag:a,fromValue:i,toValue:n,priceInverseFlag:r}=this.state;a?(n=this.state.fromValue,i=this.state.toValue):(i=this.state.toValue,n=this.state.fromValue),this.setState({priceInverseFlag:!r,receivedFlag:!a,fromValue:i,toValue:n,needApprove:!1},(async()=>{await this.calcPrice(),await this.props.pool.getBalanceAndApprove()}))},this.hideAddRecipient=()=>{this.setState({addRecipient:!1,recipientAddr:""},(()=>{this.checkInput()}))},this.onRecipientChange=t=>{const e=t.target.value;this.setState({recipientAddr:e},(()=>{this.checkInput()}))},this.showSettingModal=()=>{this.props.network.setData({settingVisibleV2:!0})},this.initSwapModal=()=>{const{swapTRXState:t}=this.state,e=this.props.pool.swapToken.fromToken,s=this.props.pool.swapToken.toToken,o=!t&&this.state.needApprove,a=this.state.recipientAddr,i=a?c.a.get("swap.action_swapSend"):c.a.get("swap.action_swap"),n=["orange","red"].includes(this.state.priceImpactColor)?c.a.get("swap.action_swapStill"):a?c.a.get("swap.confirm_swapSend"):c.a.get("swap.confirm_swap"),r=a?c.a.get("action.swapSendAct",{from:Object(O.p)(e.tokenSymbol,e.tokenAddress),to:Object(O.p)(s.tokenSymbol,s.tokenAddress)}):c.a.get("action.swapAct",{from:Object(O.p)(e.tokenSymbol,e.tokenAddress),to:Object(O.p)(s.tokenSymbol,s.tokenAddress)}),l=a?c.a.get("action.swapSendActErr"):c.a.get("action.swapActErr");return{swapPopTitle:i,swapPopBtn:n,swapPopBtnDisabled:!1,swapErrorInfo:"",approveActionTitle:c.a.get("action.approveAct",{token:Object(O.p)(e.tokenSymbol,e.tokenAddress)}),approveActionError:c.a.get("action.approveActErr"),approveActionState:"",swapActionTitle:r,swapActionError:l,swapActionState:"",actionInfo:c.a.get("action.startBtn"),actionDisabled:!0,actionRetry:"",actionState:o?"line":"info",actionStarted:!1,successFromValue:"",successToValue:"",miniPopVisible:!1}},this.showSwapModal=()=>{this.setState({...this.initSwapModal(),swapVisible:!0},(()=>{this.onRetryAction()}))},this.beforeHideSwapModal=()=>{this.state.actionStarted?this.setState({miniPopVisible:!0}):this.hideSwapModal()},this.hideSwapModal=()=>{this.setState({swapVisible:!1},(()=>{setTimeout((()=>{this.setState({...this.initSwapModal()})}),1e3)}))},this.approveToken=async()=>{const{fromToken:t,toToken:e}=this.props.pool.swapToken;if(t&&e&&(t.tokenAddress===g.a.trxFakeAddress&&e.tokenAddress===g.a.wtrxAddress||e.tokenAddress===g.a.trxFakeAddress&&t.tokenAddress===g.a.wtrxAddress))return;const s=this.props.pool.swapToken.fromToken.tokenAddress,o=await Object(A.h)(t.tokenAddress,e.tokenAddress)?g.a.v2Contract.pumpRouter:g.a.v2Contract.router;await Object(A.e)(s,o,{title:"swap.pop_title_approve",obj:{token:Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)}})?this.setState({approveActionState:"pending",actionInfo:c.a.get("action.doingBtn"),actionDisabled:!0,actionStarted:!0,needApprove:!1},(()=>{setTimeout((()=>{this.setState({approveActionState:"success",actionState:"info"})}),5e3)})):this.setState({approveActionState:"error",actionRetry:"approveToken",actionInfo:c.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0})},this.beforeSwapToken=async()=>{this.setState({actionStarted:!0,swapPopBtn:c.a.get("action.startBtn"),swapPopBtnDisabled:!0},(()=>{this.swapToken()}))},this.getSwapFuncType=(t,e)=>{const{receivedFlag:s,swapTRXState:o}=this.state;return o?t.tokenAddress===g.a.trxFakeAddress?"deposit":"withdraw":s?t.tokenAddress===g.a.trxFakeAddress?"swapExactETHForTokens":e.tokenAddress===g.a.trxFakeAddress?"swapExactTokensForETH":"swapExactTokensForTokens":t.tokenAddress===g.a.trxFakeAddress?"swapETHForExactTokens":e.tokenAddress===g.a.trxFakeAddress?"swapTokensForExactETH":"swapTokensForExactTokens"},this.swapToken=async()=>{const t=this.props.pool.swapToken.fromToken,e=this.props.pool.swapToken.toToken,s=this.state.fromValue,o=this.state.toValue,a=this.state.recipientAddr,{swapTRXState:i,dependentValueSunBig:n}=this.state,r=!i&&this.state.needApprove,l=s,p=o;let d="";const h={title:a&&!i?"swap.pop_title_swap_send":"swap.pop_title_swap",obj:{from:"".concat(Object(O.n)(Object(O.M)(s),t.tokenDecimal)," ").concat(Object(O.p)(t.tokenSymbol,t.tokenAddress)),to:"".concat(Object(O.n)(Object(O.M)(o),e.tokenDecimal)," ").concat(Object(O.p)(e.tokenSymbol,e.tokenAddress)),addr:i?window.defaultAccount:a}},{bestTrade:m}=this.state,j=this.getSwapFuncType(t,e,m),u=await Object(A.h)(t.tokenAddress,e.tokenAddress);if(i)d=await A.E[j]({amountIn:Object(O.M)(s).times(Object(O.a)(10).pow(t.tokenDecimal))._toIntegerDown()._toHex(),amountOut:Object(O.M)(o).times(Object(O.a)(10).pow(e.tokenDecimal))._toIntegerDown()._toHex(),intlObj:h,isNewTradeRouter:u});else{const{route:i}=this.state.bestTrade,r=(i.path||[]).map((t=>t.tokenAddress===g.a.trxFakeAddress?g.a.wtrxAddress:t.tokenAddress));d=await A.E[j]({amountIn:Object(O.M)(s).times(Object(O.a)(10).pow(t.tokenDecimal))._toIntegerDown()._toHex(),amountOut:Object(O.M)(o).times(Object(O.a)(10).pow(e.tokenDecimal))._toIntegerDown()._toHex(),dependentValueSunBig:Object(O.a)(n)._toIntegerDown()._toHex(),deadline:await Object(A.g)(this.props.network.settingDeadlineV2),to:a||window.defaultAccount,path:r,intlObj:h,isNewTradeRouter:u})}if(d){let t={swapErrorInfo:"",swapPopBtn:c.a.get("action.doingBtn"),swapPopBtnDisabled:!0,actionStarted:!0};r&&!i&&(t={actionInfo:c.a.get("action.doingBtn"),actionDisabled:!0,swapActionState:"pending",actionState:"line",actionStarted:!0}),this.setState(t,(()=>{setTimeout((async()=>{this.setState({fromValue:"",toValue:"",successFromValue:l,successToValue:p,actionRetry:"",actionState:"success",actionStarted:!1}),await this.props.pool.getBalanceAndApprove(),await this.calcPrice()}),5e3)}))}else{let t={swapErrorInfo:a?c.a.get("action.swapSendActErr"):c.a.get("action.swapActErr"),swapPopBtn:c.a.get("action.retryBtn"),swapPopBtnDisabled:!1,actionStarted:!0};r&&(t={actionState:"line",swapActionState:"error",actionRetry:"swapToken",actionInfo:c.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0}),this.setState(t)}},this.onRetryAction=()=>{let{actionRetry:t,needApprove:e,swapTRXState:s}=this.state;switch(s&&(e=!1),!t&&e&&(t="approveToken"),t){case"approveToken":this.setState({approveActionState:"start",actionInfo:c.a.get("action.startBtn"),actionDisabled:!0},(()=>{this.approveToken()}));break;case"swapToken":this.setState({swapActionState:"start",actionInfo:c.a.get("action.startBtn"),actionDisabled:!0},(()=>{this.swapToken()}))}},this.miniPopOk=()=>{const t=this.state.needApprove;this.setState({miniPopVisible:!1},(async()=>{this.hideSwapModal(),t&&await this.props.pool.getBalanceAndApprove()}))},this.miniPopCancel=()=>{this.setState({miniPopVisible:!1})},this.transRouteRender=()=>{const{bestTrade:t={}}=this.state,e=t.route.path||[],s=e.length;return Object(K.jsxs)("div",{className:"tr-content",children:[Object(K.jsxs)("p",{children:[Object(K.jsx)("img",{src:Q}),Object(K.jsx)("span",{children:c.a.get("migrate.trans_route")})]}),Object(K.jsx)("div",{children:Object(K.jsx)("ul",{className:s<=2?"jcc":"",children:e.map(((t,s)=>Object(K.jsxs)("li",{children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("img",{src:t.tokenLogoUrl||Z.a}),Object(K.jsxs)("span",{children:[Object(K.jsx)("span",{className:"token",children:Object(O.p)(null===t||void 0===t?void 0:t.tokenSymbol,null===t||void 0===t?void 0:t.tokenAddress)}),s!=e.length-1&&Object(K.jsx)("span",{children:"-0.3%"})]})]}),s!=e.length-1&&Object(K.jsx)("span",{className:"tr-arrow"})]},t.tokenAddress)))})})]})},this.useSafeMax=t=>{const{swapToken:e}=this.props.pool,{fromToken:s,toToken:o}=e;if("from"===t){const t=Object(O.c)(Object(O.M)(s.balance).minus(g.a.swapFeeAmountV2));this.setState({fromValue:t,receivedFlag:!0},(async()=>{await this.calcPrice()}))}else if("to"===t){const t=Object(O.c)(Object(O.M)(o.balance).minus(g.a.swapFeeAmountV2));this.setState({toValue:t},(async()=>{await this.calcPrice()}))}},this.timer=0,this.timer1=0,this.swapFuncType="",this.state={swapTRXState:!1,bestTrade:null,fromValue:"",toValue:"",priceStr:"-",priceInverseStr:"-",priceInverseFlag:!1,dependentValueSunBig:"",dependentValue:"",priceImpact:"",priceImpactColor:"",liquidityProviderFee:"",receivedFlag:!0,addRecipient:!1,recipientAddr:"",recipientValid:!1,needApprove:!0,actionError:c.a.get("swap.action_enter_amount"),swapInfo:c.a.get("swap.action_swap"),swapVisible:!1,priceChartVisible:!1,swapPopTitle:"",swapPopBtn:"",swapPopBtnDisabled:!1,swapErrorInfo:"",approveActionTitle:"",approveActionError:"",approveActionState:"",swapActionTitle:"",swapActionError:"",swapActionState:"",actionInfo:"",actionDisabled:!1,actionRetry:"",actionState:"",actionStarted:!1,successFromValue:"",successToValue:"",miniPopVisible:!1,betterPrice:!1,notCreatedOfNew:!1,transRouteArr:[{symbol:"trx"},{symbol:"btt"},{symbol:"wbtt"},{symbol:"sunold"},{symbol:"nft"},{symbol:"usdj"}]}}componentDidMount(){this.props.pool.getBalanceAndApprove(),this.timer=setInterval((()=>{this.props.pool.getBalanceAndApprove()}),6e3),this.timer1=setInterval((()=>{this.props.pool.getReservesAll()}),3e3),this.checkInput()}render(){const{swapToken:t,modalVisibleInfo:e}=this.props.pool,{fromToken:s,toToken:o}=t,{priceStr:n,priceInverseStr:r,dependentValue:w,swapTRXState:x,bestTrade:f}=this.state;return Object(K.jsxs)(l.a,{className:"swap-content",children:[Object(K.jsxs)("div",{className:"flex justify-content swap-block",children:[Object(K.jsxs)("div",{className:"left-block",children:[Object(K.jsx)("div",{children:c.a.get("swap.input_from")+(this.state.receivedFlag?"":c.a.get("swap.input_estimated"))}),Object(K.jsx)("div",{className:"flex input-number",children:Object(K.jsx)("input",{value:this.state.fromValue,onChange:this.onFromValueChange,onBlur:this.onFromValueBlur,placeholder:c.a.get("swap.input_placeholder")})})]}),Object(K.jsxs)("div",{className:"right-block",children:[Object(K.jsxs)("div",{children:[c.a.get("swap.input_from_balance")," ",Object(K.jsx)("span",{children:Object(O.o)(s.balance,{dp:6,cutZero:!0})})]}),Object(K.jsxs)("div",{className:"flex flex-end",children:[this.props.network.isConnected?Object(K.jsx)("span",{className:"link",onClick:this.setMaxFrom,children:c.a.get("swap.input_from_max")}):null,Object(K.jsx)(h.a,{showModal:()=>{this.props.pool.showModal(1)},token:s}),Object(K.jsx)(j.a,{modalVisible:e.visible1,onCancel:()=>this.props.pool.showModal(1,!1),type:1,onChangeToken:t=>{this.onFromTokenChange(t)}})]})]})]}),Object(K.jsxs)("div",{className:"flex justify-content rates",children:[Object(K.jsx)("div",{className:"word-break",children:c.a.get("swap.input_from_price")}),Object(K.jsx)("div",{className:"flex ai-center between",children:s.tokenAddress&&o.tokenAddress?Object(K.jsxs)(a.a.Fragment,{children:[Object(K.jsx)("span",{className:"swap-token",children:this.state.priceInverseFlag?c.a.get("swap.input_from_per",{toToken:Object(O.p)(s.tokenSymbol,s.tokenAddress),price:Object(O.o)(r,{miniText:g.a.minPrice,miniTextNoZero:!0,separator:!1,dp:o.tokenDecimal,cutZero:!0}),fromToken:Object(O.p)(o.tokenSymbol,o.tokenAddress)}):c.a.get("swap.input_from_per",{toToken:Object(O.p)(this.props.pool.swapToken.toToken.tokenSymbol,this.props.pool.swapToken.toToken.tokenAddress),price:Object(O.o)(n,{miniText:g.a.minPrice,miniTextNoZero:!0,separator:!1,dp:s.tokenDecimal,cutZero:!0}),fromToken:Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})}),Object(K.jsx)("img",{src:H.a,alt:"",onClick:this.switchPriceInverseFlag})]}):Object(K.jsx)("div",{children:"--"})})]}),"TRX"===s.tokenSymbol&&this.state.fromValue?Object(O.M)(s.balance).lt(g.a.swapFeeAmountV2)?Object(K.jsx)("div",{className:"safe-amount-tip safe-amount",children:c.a.getHTML("list.trx_tip_3",{value:g.a.swapFeeAmountV2})}):Object(O.M)(s.balance).minus(g.a.swapFeeAmountV2).lt(Object(O.M)(this.state.fromValue))?Object(K.jsxs)("div",{className:"safe-amount-tip safe-amount",children:[c.a.getHTML("list.trx_tip_1",{value:g.a.swapFeeAmountV2})," ",Object(K.jsx)("em",{onClick:()=>this.useSafeMax("from"),children:c.a.get("list.trx_tip_2")})]}):null:null,Object(K.jsxs)("div",{className:"flex justify-content setting",children:[Object(K.jsx)("img",{src:q.a,className:"arrDown",alt:"",onClick:this.switchToken}),!x&&Object(K.jsx)("span",{className:"link",onClick:this.showSettingModal,children:c.a.get("swap.settings_title")})]}),Object(K.jsxs)("div",{className:"flex justify-content swap-block",children:[Object(K.jsxs)("div",{className:"left-block",children:[Object(K.jsx)("div",{children:c.a.get("swap.input_to")+(this.state.receivedFlag?c.a.get("swap.input_estimated"):"")}),Object(K.jsx)("div",{className:"flex input-number",children:Object(K.jsx)("input",{value:this.state.toValue,onChange:this.onToValueChange,onBlur:this.onToValueBlur,placeholder:c.a.get("swap.input_placeholder")})})]}),Object(K.jsxs)("div",{className:"right-block",children:[Object(K.jsxs)("div",{children:[c.a.get("swap.input_to_balance")," ",Object(K.jsx)("span",{children:Object(O.o)(o.balance,{dp:6,cutZero:!0})})]}),Object(K.jsx)(h.a,{showModal:()=>{this.props.pool.showModal(2)},token:o}),Object(K.jsx)(j.a,{modalVisible:e.visible2,onCancel:()=>this.props.pool.showModal(2,!1),type:2,onChangeToken:t=>{this.onToTokenChange(t)}})]})]}),"TRX"===o.tokenSymbol&&this.state.toValue&&Object(O.M)(o.balance).lt(g.a.swapFeeAmountV2)?Object(K.jsx)("div",{className:"safe-amount-tip safe-amount",children:c.a.getHTML("list.trx_tip_3",{value:g.a.swapFeeAmountV2})}):null,!x&&Object(K.jsx)(K.Fragment,{children:this.state.addRecipient?Object(K.jsxs)(a.a.Fragment,{children:[Object(K.jsxs)("div",{className:"flex justify-content add-recipient",children:[Object(K.jsx)("img",{src:q.a,alt:""}),Object(K.jsx)("span",{className:"link",onClick:this.hideAddRecipient,children:c.a.get("swap.input_remove_recipient")})]}),Object(K.jsxs)("div",{className:"recipient-list",children:[Object(K.jsxs)("div",{className:"flex",children:[Object(K.jsx)("div",{children:c.a.get("swap.input_recipient")}),this.state.recipientAddr&&this.state.recipientValid?Object(K.jsx)("a",{className:"link",href:"".concat(g.a.tronscanUrl,"/address/").concat(this.state.recipientAddr),target:"_blank",children:c.a.get("swap.input_recipient_tronscan")}):null]}),Object(K.jsx)("input",{value:this.state.recipientAddr,onChange:this.onRecipientChange,placeholder:c.a.get("swap.input_recipient_placeholder")})]})]}):Object(K.jsxs)("div",{className:"add-recipient-btn new-recipient",children:[this.state.fromValue&&this.state.toValue&&f&&f.route&&f.route.path.length>0?Object(K.jsx)("div",{className:"flex trans-route",children:Object(K.jsxs)(p.a,{title:this.transRouteRender(),overlayClassName:"tr-tooltip",placement:Object(i.a)(window.navigator).any?"bottomLeft":"bottom",color:"rgba(27,31,38,0.90)",arrowPointAtCenter:!0,children:[Object(K.jsx)("img",{src:J}),c.a.get("migrate.trans_route")]})}):Object(K.jsx)("span",{}),Object(K.jsx)("span",{className:"link",onClick:this.showAddRecipient,children:c.a.get("swap.input_add_recipient")})]})}),Object(K.jsx)("div",{className:"flex justify-content detail-item token-info align-items-center",children:Object(K.jsxs)("div",{className:"token-pairs",children:[Object(K.jsx)("div",{children:this.state.addRecipient&&f&&f.route&&f.route.path.length>0&&Object(K.jsxs)("div",{className:"flex trans-route",style:{marginBottom:"10px"},children:[Object(K.jsx)(p.a,{title:this.transRouteRender(),overlayClassName:"tr-tooltip",placement:Object(i.a)(window.navigator).any?"bottomLeft":"bottom",color:"rgba(27,31,38,0.90)",arrowPointAtCenter:!0,children:Object(K.jsx)("img",{src:J})}),c.a.get("migrate.trans_route")]})}),Object(K.jsxs)("div",{children:[c.a.get("swap.detail_token_info")," "]}),Object(K.jsxs)("div",{children:[this.props.pool.swapToken.fromToken.tokenAddress?this.props.pool.swapToken.fromToken.tokenAddress===g.a.trxFakeAddress?Object(K.jsxs)(a.a.Fragment,{children:[!Object(i.a)(window.navigator).any&&Object(K.jsx)("img",{src:this.props.pool.swapToken.fromToken.tokenLogoUrl,alt:"logo",onError:t=>{t.target.onerror=null,t.target.src=Z.a}}),Object(K.jsx)("span",{className:"trx",children:Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})]}):Object(K.jsx)(a.a.Fragment,{children:Object(O.P)(Object(K.jsxs)(a.a.Fragment,{children:[!Object(i.a)(window.navigator).any&&Object(K.jsx)("img",{src:this.props.pool.swapToken.fromToken.tokenLogoUrl,alt:"logo",onError:t=>{t.target.onerror=null,t.target.src=Z.a}}),Object(K.jsx)("span",{children:Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})]}),this.props.pool.swapToken.fromToken.tokenAddress)}):Object(K.jsx)("span",{children:"-"}),Object(K.jsx)("span",{children:"\xa0\xa0"}),this.props.pool.swapToken.toToken.tokenAddress?this.props.pool.swapToken.toToken.tokenAddress===g.a.trxFakeAddress?Object(K.jsxs)(a.a.Fragment,{children:[!Object(i.a)(window.navigator).any&&Object(K.jsx)("img",{src:this.props.pool.swapToken.toToken.tokenLogoUrl,alt:"logo",onError:t=>{t.target.onerror=null,t.target.src=Z.a}}),Object(K.jsx)("span",{className:"trx",children:Object(O.p)(this.props.pool.swapToken.toToken.tokenSymbol,this.props.pool.swapToken.toToken.tokenAddress)})]}):Object(K.jsx)(a.a.Fragment,{children:Object(O.P)(Object(K.jsxs)(a.a.Fragment,{children:[!Object(i.a)(window.navigator).any&&Object(K.jsx)("img",{src:this.props.pool.swapToken.toToken.tokenLogoUrl,alt:"logo",onError:t=>{t.target.onerror=null,t.target.src=Z.a}}),Object(K.jsx)("span",{children:Object(O.p)(this.props.pool.swapToken.toToken.tokenSymbol,this.props.pool.swapToken.toToken.tokenAddress)})]}),this.props.pool.swapToken.toToken.tokenAddress)}):Object(K.jsx)("span",{children:"-"})]})]})}),!x&&Object(K.jsx)(K.Fragment,{children:"0.5"!=this.props.network.settingSlippageV2?Object(K.jsxs)("div",{className:"flex justify-content detail-item slippage",children:[Object(K.jsxs)("div",{children:[c.a.get("swap.detail_slippage")," "]}),Object(K.jsx)("div",{children:(Object(O.a)(this.props.network.settingSlippageV2).lt(.01)?"<0.01":this.props.network.settingSlippageV2)+"%"})]}):null}),!x&&this.state.fromValue&&this.state.toValue&&this.props.pool.swapToken.fromToken.tokenAddress&&this.props.pool.swapToken.toToken.tokenAddress?Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{className:"flex justify-content detail-item",children:this.state.receivedFlag?Object(K.jsxs)(a.a.Fragment,{children:[Object(K.jsx)(m.a,{tip:c.a.get("swap.detail_min_received_tip"),left:!0,children:c.a.get("swap.detail_min_received")}),Object(K.jsx)("span",{children:Object(O.o)(w,{dp:o.tokenDecimal})+" "+Object(O.p)(o.tokenSymbol,o.tokenAddress)})]}):Object(K.jsxs)(a.a.Fragment,{children:[Object(K.jsx)(m.a,{tip:c.a.get("swap.detail_max_sold_tip"),left:!0,children:c.a.get("swap.detail_max_sold")}),Object(K.jsx)("span",{children:Object(O.o)(w,{dp:s.tokenDecimal})+" "+Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})]})}),Object(K.jsxs)("div",{className:"flex justify-content detail-item",children:[Object(K.jsx)(m.a,{tip:c.a.get("swap.detail_price_impact_tip"),left:!0,children:c.a.get("swap.detail_price_impact")}),Object(K.jsx)("span",{className:["orange","red"].includes(this.state.priceImpactColor)?this.state.priceImpactColor:"normal",children:this.state.priceImpact.indexOf("NaN")>-1?"--":this.state.priceImpact})]}),Object(K.jsxs)("div",{className:"flex justify-content detail-item",children:[Object(K.jsx)(m.a,{tip:c.a.getHTML("swap.detail_liquidity_fee_tip_v2"),left:!0,children:c.a.get("swap.detail_liquidity_fee")}),Object(K.jsx)("span",{children:this.state.liquidityProviderFee+" "+Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})]})]}):null,Object(K.jsx)("div",{className:"action-btns",children:this.props.network.isConnected?Object(K.jsx)(K.Fragment,{children:this.state.actionError?Object(K.jsx)(u.a,{type:"single",disabled:!0,info:this.state.actionError}):Object(K.jsx)(u.a,{type:"single",btnColor:this.state.priceImpactColor,info:"red"===this.state.priceImpactColor?c.a.get("swap.action_high"):this.state.swapInfo,onClick:this.showSwapModal})}):Object(K.jsx)(u.a,{type:"single",info:c.a.get("swap.action_connect"),onClick:()=>{this.props.network.connectWallet()}})}),Object(K.jsxs)(d.a,{title:null,closable:"success"!==this.state.actionState,visible:this.state.swapVisible,onCancel:this.beforeHideSwapModal,footer:null,className:"confirm-swap-modal",style:{marginLeft:Object(O.u)()},width:630,centered:!0,children:["line"===this.state.actionState&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("div",{className:"title big",children:this.state.swapPopTitle}),Object(K.jsxs)("div",{className:"ib-parent center trans-modal amount",children:[Object(K.jsxs)("div",{className:"from",children:[Object(K.jsx)("div",{className:"from-value",children:this.state.fromValue}),Object(K.jsx)("div",{className:"from-token",children:Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})]}),Object(K.jsx)("img",{src:X.a,alt:"",className:"plus w10"}),Object(K.jsxs)("div",{className:"to",children:[Object(K.jsx)("div",{className:"to-value",children:this.state.toValue}),Object(K.jsx)("div",{className:"to-token",children:Object(O.p)(this.props.pool.swapToken.toToken.tokenSymbol,this.props.pool.swapToken.toToken.tokenAddress)})]}),this.state.recipientAddr&&Object(K.jsxs)("div",{className:"recipient",children:[c.a.get("swap.recipient"),this.state.recipientAddr]})]}),Object(K.jsx)("div",{className:"middleTip",children:this.state.recipientAddr?c.a.get("action.swapSendLineTitle"):c.a.get("action.swapLineTitle")}),Object(K.jsxs)(b.a,{children:[Object(K.jsx)("span",{status:this.state.approveActionState,err:this.state.approveActionError,children:this.state.approveActionTitle}),Object(K.jsx)("span",{status:this.state.swapActionState,err:this.state.swapActionError,children:this.state.swapActionTitle})]}),Object(K.jsx)(u.a,{type:"single",disabled:this.state.actionDisabled,info:this.state.actionInfo,onClick:this.onRetryAction})]}),"info"===this.state.actionState&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("div",{className:"title big",children:this.state.swapPopTitle}),Object(K.jsxs)("div",{className:"ib-parent center tokens amount",children:[Object(K.jsxs)("div",{className:"from",children:[Object(K.jsx)("div",{className:"from-value",children:this.state.fromValue}),Object(K.jsxs)("div",{className:"from-token",children:[Object(K.jsx)("img",{src:this.props.pool.swapToken.fromToken.tokenLogoUrl,alt:""}),Object(K.jsx)("span",{children:Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})]})]}),Object(K.jsx)("img",{src:X.a,alt:"",className:"plus w10"}),Object(K.jsxs)("div",{className:"to",children:[Object(K.jsx)("div",{className:"to-value",children:this.state.toValue}),Object(K.jsxs)("div",{className:"to-token",children:[Object(K.jsx)("img",{src:this.props.pool.swapToken.toToken.tokenLogoUrl,alt:""}),Object(K.jsx)("span",{children:Object(O.p)(this.props.pool.swapToken.toToken.tokenSymbol,this.props.pool.swapToken.toToken.tokenAddress)})]})]}),this.state.recipientAddr&&!x&&Object(K.jsxs)("div",{className:"recipient",children:[c.a.get("swap.recipient"),this.state.recipientAddr]})]}),Object(K.jsxs)("div",{className:"flex justify-content price",children:[Object(K.jsx)("div",{className:"",children:c.a.get("swap.input_from_price")}),Object(K.jsxs)("div",{className:"right",children:[Object(K.jsx)("div",{children:"1 ".concat(Object(O.p)(this.props.pool.swapToken.toToken.tokenSymbol,this.props.pool.swapToken.toToken.tokenAddress)," =\n                    ").concat(Object(O.o)(this.state.priceStr,{dp:this.props.pool.swapToken.fromToken.tokenDecimal,cutZero:!0,miniTextNoZero:!0,miniText:g.a.minPrice}),"\n                    ").concat(Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)," ")}),Object(K.jsx)("div",{className:"mt3",children:"1 ".concat(Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)," =\n                    ").concat(Object(O.o)(this.state.priceInverseStr,{dp:this.props.pool.swapToken.toToken.tokenDecimal,cutZero:!0,miniTextNoZero:!0,miniText:g.a.minPrice}),"\n                    ").concat(Object(O.p)(this.props.pool.swapToken.toToken.tokenSymbol,this.props.pool.swapToken.toToken.tokenAddress)," ")})]})]}),"0.5"!=this.props.network.settingSlippageV2?Object(K.jsxs)("div",{className:"flex justify-content detail-slippage",children:[Object(K.jsxs)("div",{children:[c.a.get("swap.detail_slippage")," "]}),Object(K.jsx)("div",{children:(Object(O.a)(this.props.network.settingSlippageV2).lt(.01)?"<0.01":this.props.network.settingSlippageV2)+"%"})]}):null,!x&&Object(K.jsxs)("div",{className:"detail-list",children:[Object(K.jsx)("div",{className:"flex justify-content detail-item",children:this.state.receivedFlag?Object(K.jsxs)(a.a.Fragment,{children:[Object(K.jsx)(m.a,{tip:c.a.get("swap.detail_min_received_tip"),left:!0,children:c.a.get("swap.detail_min_received")}),Object(K.jsx)("span",{className:"right",children:Object(O.o)(w,{dp:o.tokenDecimal})+" "+Object(O.p)(this.props.pool.swapToken.toToken.tokenSymbol,this.props.pool.swapToken.toToken.tokenAddress)})]}):Object(K.jsxs)(a.a.Fragment,{children:[Object(K.jsx)(m.a,{tip:c.a.get("swap.detail_max_sold_tip"),left:!0,children:c.a.get("swap.detail_max_sold")}),Object(K.jsx)("span",{className:"right",children:Object(O.o)(w,{dp:s.tokenDecimal})+" "+Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})]})}),Object(K.jsxs)("div",{className:"flex justify-content detail-item",children:[Object(K.jsx)(m.a,{tip:c.a.get("swap.detail_price_impact_tip"),left:!0,children:c.a.get("swap.detail_price_impact")}),Object(K.jsx)("span",{className:"right "+(["orange","red"].includes(this.state.priceImpactColor)?this.state.priceImpactColor:"normal"),children:this.state.priceImpact.indexOf("NaN")>-1?"--":this.state.priceImpact})]}),Object(K.jsxs)("div",{className:"flex justify-content detail-item",children:[Object(K.jsx)(m.a,{tip:c.a.getHTML("swap.detail_liquidity_fee_tip_v2"),left:!0,children:c.a.get("swap.detail_liquidity_fee")}),Object(K.jsx)("span",{className:"right",children:this.state.liquidityProviderFee+" "+Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})]})]}),Object(K.jsx)("div",{className:"warning",children:this.state.receivedFlag?Object(K.jsx)("div",{children:c.a.get("swap.confirm_warning_output",{amount:Object(O.o)(w,{dp:o.tokenDecimal}),token:Object(O.p)(this.props.pool.swapToken.toToken.tokenSymbol,this.props.pool.swapToken.toToken.tokenAddress)})}):Object(K.jsx)("div",{children:c.a.get("swap.confirm_warning_input",{amount:Object(O.o)(w,{dp:s.tokenDecimal}),token:Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})})}),this.state.swapErrorInfo&&Object(K.jsx)("div",{className:"errorMsg",children:this.state.swapErrorInfo}),Object(K.jsx)(u.a,{type:"single",btnColor:this.state.priceImpactColor,disabled:this.state.swapPopBtnDisabled,info:this.state.swapPopBtn,onClick:this.beforeSwapToken})]}),"success"===this.state.actionState&&Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)("div",{className:"modal-success",children:[Object(K.jsx)("img",{src:W.a,alt:""}),this.state.recipientAddr?Object(K.jsx)("div",{className:"title green",children:c.a.get("action.swapSendSuccessTitle")}):Object(K.jsx)("div",{className:"title green",children:c.a.get("action.swapSuccessTitle")}),Object(K.jsxs)("div",{className:"ib-parent center trans-modal mb25",children:[Object(K.jsxs)("div",{className:"from",children:[Object(K.jsx)("div",{className:"from-value",children:this.state.successFromValue}),Object(K.jsx)("div",{className:"from-token",children:Object(O.p)(this.props.pool.swapToken.fromToken.tokenSymbol,this.props.pool.swapToken.fromToken.tokenAddress)})]}),Object(K.jsx)("img",{src:X.a,alt:"",className:"plus w10"}),Object(K.jsxs)("div",{className:"to",children:[Object(K.jsx)("div",{className:"to-value",children:this.state.successToValue}),Object(K.jsx)("div",{className:"to-token",children:Object(O.p)(this.props.pool.swapToken.toToken.tokenSymbol,this.props.pool.swapToken.toToken.tokenAddress)})]}),this.state.recipientAddr&&Object(K.jsxs)("div",{className:"recipient",children:[c.a.get("swap.recipient"),Object(O.l)(this.state.recipientAddr)]})]}),Object(K.jsx)(u.a,{type:"single",info:c.a.get("action.closeBtn"),onClick:this.hideSwapModal}),this.state.recipientAddr?Object(K.jsx)("div",{className:"endTip",children:c.a.get("action.swapSendDescTitle")}):Object(K.jsx)("div",{className:"endTip",children:c.a.get("action.swapDescTitle")})]})})]}),Object(K.jsx)(k.a,{visible:this.state.miniPopVisible,confirm:this.miniPopOk,cancel:this.miniPopCancel})]})}})||U)||U)||U;e.a=Y},1494:function(t,e,s){"use strict";var o=s(1468),a=s(1463),i=o.e;i.Header=o.c,i.Footer=o.b,i.Content=o.a,i.Sider=a.b,i._InternalSiderContext=a.a,e.a=i},1530:function(t,e,s){"use strict";s.r(e);var o,a=s(0),i=s.n(a),n=s(253),r=s(1483),c=s(16);let l=Object(n.b)("network")(o=Object(n.c)(o=class extends i.a.Component{render(){return Object(c.jsx)("div",{children:Object(c.jsx)(r.a,{})})}})||o)||o;e.default=l},830:function(t,e,s){"use strict";var o=s(0),a=s.n(o),i=(s(39),s(196),s(885),s(16));class n extends a.a.Component{constructor(t){super(t),this.onClick=()=>{this.props.disabled||this.props.state||this.props.onClick&&this.props.onClick()},this.onLeftClick=()=>{this.props.lDisabled||this.props.lState||this.props.onLeftClick&&this.props.onLeftClick()},this.onMiddleClick=()=>{this.props.mDisabled||this.props.mState||this.props.onMiddleClick&&this.props.onMiddleClick()},this.onRightClick=()=>{this.props.rDisabled||this.props.rState||this.props.onRightClick&&this.props.onRightClick()},this.state={}}render(){let t=null;switch(this.props.type){case"trisection":t=Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{className:"trisection "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick,children:this.props.lInfo}),Object(i.jsx)("button",{className:"trisection "+(this.props.mDisabled?"gray":this.props.mState?this.props.mState:"blue"),onClick:this.onMiddleClick,children:this.props.mInfo}),Object(i.jsx)("button",{className:"trisection "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick,children:this.props.rInfo})]});break;case"half":t=Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{className:"half "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick,children:this.props.lInfo}),Object(i.jsx)("button",{className:"half "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick,children:this.props.rInfo})]});break;default:t=Object(i.jsx)("button",{className:"single "+(this.props.disabled?"gray":this.props.state?this.props.state:this.props.btnColor?this.props.btnColor:"blue"),onClick:this.onClick,...this.props,children:this.props.info})}return Object(i.jsx)(a.a.Fragment,{children:t})}}e.a=n},885:function(t,e,s){},944:function(t,e,s){"use strict";var o=s(0),a=s.n(o),i=s(196),n=s(39),r=s.n(n),c=s(775),l=s(4),p=(s(1109),s(16));class d extends a.a.Component{constructor(t){super(t),this.confirm=()=>{this.props.confirm&&this.props.confirm()},this.cancel=()=>{this.props.cancel&&this.props.cancel()},this.state={}}render(){const t=Object(i.a)(window.navigator).any?0:64;return Object(p.jsxs)(c.a,{footer:null,title:null,closable:!0,maskClosable:!1,visible:this.props.visible,className:"unfinished-pop",onCancel:this.cancel,style:{marginLeft:Object(l.u)()+t},width:430,centered:!0,children:[Object(p.jsxs)("div",{className:"title",children:[r.a.get("action.popTitle"),Object(p.jsx)("p",{children:r.a.get("action.popDesc")})]}),Object(p.jsxs)("div",{className:"btns",children:[Object(p.jsx)("button",{onClick:this.confirm,children:r.a.get("action.popQuitBtn")}),Object(p.jsx)("button",{onClick:this.cancel,children:r.a.get("action.popCancelBtn")})]})]})}}e.a=d},945:function(t,e,s){"use strict";e.a=s.p+"static/media/TransactionSuccess.9be097c2.svg"}}]);